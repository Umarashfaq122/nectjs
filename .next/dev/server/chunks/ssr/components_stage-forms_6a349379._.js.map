{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Nextjs/landdirectorateDashboardVersion1-main/landdirectorateDashboardVersion1-main/components/stage-forms/pre-sowing-form.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport {\n  Card,\n  CardContent,\n  CardHeader,\n  CardTitle,\n  CardDescription,\n  CardFooter,\n} from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n  DialogFooter,\n} from \"@/components/ui/dialog\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport {\n  MapPin,\n  Calendar,\n  Sprout,\n  Leaf,\n  CheckCircle,\n  XCircle,\n  ChevronRight,\n  Eye,\n  Filter,\n  Search,\n  Download,\n  BarChart3,\n  Wheat,\n  AlertCircle,\n  TrendingUp,\n  Package,\n  Clock,\n} from \"lucide-react\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\n\ninterface LandPreparationData {\n  id: number;\n  residue_management_display: string;\n  field_name: string;\n  crop_name: string;\n  land_prepared: boolean;\n  preparation_date: string;\n  methods_used: string;\n  organic_amendments_used: string;\n  residue_management: string;\n  expected_sowing_date: string | null;\n  reason_not_prepared: string;\n  created_at: string;\n  field: number;\n}\n\nexport function PreSowingForm() {\n  const [landPrepData, setLandPrepData] = useState<LandPreparationData[]>([]);\n  const [filteredData, setFilteredData] = useState<LandPreparationData[]>([]);\n  const [selectedRecord, setSelectedRecord] =\n    useState<LandPreparationData | null>(null);\n  const [isDetailModalOpen, setIsDetailModalOpen] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [filterField, setFilterField] = useState<string>(\"all\");\n  const [activeTab, setActiveTab] = useState(\"all\");\n  const [page, setPage] = useState(1);\n  const [hasNextPage, setHasNextPage] = useState(false);\n\n  // Stats calculation\n  const totalRecords = landPrepData.length;\n  const landPreparedCount = landPrepData.filter(\n    (record) => record.land_prepared\n  ).length;\n  const landNotPreparedCount = landPrepData.filter(\n    (record) => !record.land_prepared\n  ).length;\n  const uniqueFieldsCount = [\n    ...new Set(landPrepData.map((record) => record.field)),\n  ].length;\n\n  // Unique fields\n  const uniqueFields = Array.from(\n    new Map(\n      landPrepData.map((record) => [\n        record.field, // unique key (id)\n        {\n          id: record.field,\n          field_name: record.field_name,\n        },\n      ])\n    ).values()\n  );\n\n  useEffect(() => {\n    fetchLandPrepData();\n  }, []);\n\n  // Filter data based on search and filter\n  useEffect(() => {\n    let results = [...landPrepData];\n\n    // Apply search filter\n    if (searchQuery.trim() !== \"\") {\n      const query = searchQuery.toLowerCase();\n      results = results.filter(\n        (record) =>\n          record.crop_name.toLowerCase().includes(query) ||\n          record.organic_amendments_used.toLowerCase().includes(query) ||\n          record.methods_used.toLowerCase().includes(query)\n      );\n    }\n\n    // Apply field filter\n    if (filterField !== \"all\") {\n      const fieldId = parseInt(filterField);\n      results = results.filter((record) => record.field === fieldId);\n    }\n\n    // Apply tab filter\n    if (activeTab === \"prepared\") {\n      results = results.filter((record) => record.land_prepared);\n    } else if (activeTab === \"not-prepared\") {\n      results = results.filter((record) => !record.land_prepared);\n    } else if (activeTab === \"burnt\") {\n      results = results.filter(\n        (record) => record.residue_management === \"burnt\"\n      );\n    } else if (activeTab === \"incorporated\") {\n      results = results.filter(\n        (record) => record.residue_management === \"incorporated\"\n      );\n    }\n\n    setFilteredData(results);\n  }, [searchQuery, filterField, activeTab, landPrepData]);\n\n  const fetchLandPrepData = async () => {\n    try {\n      setLoading(true);\n      const token =\n        typeof window !== \"undefined\"\n          ? localStorage.getItem(\"authToken\")\n          : null;\n\n      if (!token) {\n        setError(\"No authentication token found\");\n        return;\n      }\n\n      const response = await fetch(\n        \"https://rda.ngrok.app/api/land-preparations/\",\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n            \"ngrok-skip-browser-warning\": \"true\",\n          },\n        }\n      );\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const data = await response.json();\n      console.log(\"Fetched land preparation data:\", data);\n      setLandPrepData(data.results || []);\n      setFilteredData(data.results || []);\n      setHasNextPage(!!data.next);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : \"Failed to fetch data\");\n      console.error(\"Error fetching land preparation data:\", err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadMoreData = async () => {\n    try {\n      const token =\n        typeof window !== \"undefined\"\n          ? localStorage.getItem(\"authToken\")\n          : null;\n\n      if (!token || !hasNextPage) return;\n\n      const response = await fetch(\n        `https://rda.ngrok.app/api/land-preparations/?page=${\n          page + 1\n        }`,\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n            \"ngrok-skip-browser-warning\": \"true\",\n          },\n        }\n      );\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const data = await response.json();\n      setLandPrepData((prev) => [...prev, ...(data.results || [])]);\n      setFilteredData((prev) => [...prev, ...(data.results || [])]);\n      setHasNextPage(!!data.next);\n      setPage((prev) => prev + 1);\n    } catch (err) {\n      console.error(\"Error loading more data:\", err);\n    }\n  };\n\n  const getLandPreparedColor = (prepared: boolean) => {\n    return prepared ? \"bg-green-100 text-green-800\" : \"bg-red-100 text-red-800\";\n  };\n\n  const getResidueManagementColor = (management: string) => {\n    switch (management?.toLowerCase()) {\n      case \"burnt\":\n        return \"bg-orange-100 text-orange-800\";\n      case \"incorporated\":\n        return \"bg-green-100 text-green-800\";\n      case \"removed\":\n        return \"bg-blue-100 text-blue-800\";\n      default:\n        return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  const formatDate = (dateString: string | null) => {\n    if (!dateString) return \"Not specified\";\n    return new Date(dateString).toLocaleDateString(\"en-US\", {\n      month: \"short\",\n      day: \"numeric\",\n      year: \"numeric\",\n    });\n  };\n\n  const parseMethods = (methods: string) => {\n    // Handle [object Object] cases\n    if (methods.includes(\"[object Object]\")) {\n      return \"Various methods\";\n    }\n    // Handle comma-separated list\n    return methods\n      .split(\",\")\n      .map((method) => method.trim())\n      .filter(Boolean);\n  };\n\n  const parseOrganicAmendments = (amendments: string) => {\n    // Handle [object Object] cases\n    if (amendments.includes(\"[object Object]\")) {\n      return \"Various organic amendments\";\n    }\n    // Handle comma-separated list\n    return amendments\n      .split(\",\")\n      .map((amendment) => amendment.trim())\n      .filter(Boolean);\n  };\n\n  const renderBooleanStatus = (value: boolean) => (\n    <div className=\"flex items-center gap-1\">\n      {value ? (\n        <>\n          <CheckCircle className=\"h-4 w-4 text-green-500\" />\n          <span className=\"text-green-600 font-medium\">Yes</span>\n        </>\n      ) : (\n        <>\n          <XCircle className=\"h-4 w-4 text-red-500\" />\n          <span className=\"text-red-600\">No</span>\n        </>\n      )}\n    </div>\n  );\n\n  // Function to render each card\n  const renderCard = (record: LandPreparationData) => {\n    const methods = parseMethods(record.methods_used);\n    const amendments = parseOrganicAmendments(record.organic_amendments_used);\n\n    return (\n      <Card\n        key={record.id}\n        className=\"group hover:shadow-lg transition-all duration-300 hover:border-primary/30 overflow-hidden\"\n      >\n        <CardContent className=\"p-0\">\n          {/* Header Section */}\n          <div\n            className={\n              record.land_prepared\n                ? \"bg-gradient-to-r from-amber-50 to-amber-100 p-5\"\n                : \"bg-gradient-to-r from-red-50 to-red-100 p-5\"\n            }\n          >\n            <div className=\"flex justify-between items-start\">\n              <div>\n                <h3 className=\"text-xl font-bold text-gray-900 line-clamp-1 capitalize\">\n                  {record.crop_name}\n                </h3>\n                <p className=\"text-sm text-gray-600 mt-1\">\n                  Record #{record.id} •{record.field_name}\n                </p>\n              </div>\n              <Badge className={getLandPreparedColor(record.land_prepared)}>\n                {record.land_prepared ? \"Prepared\" : \"Not Prepared\"}\n              </Badge>\n            </div>\n          </div>\n\n          {/* Content */}\n          <div className=\"p-5\">\n            <div className=\"space-y-4\">\n              {/* Preparation Date - Always show */}\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-2 text-gray-600\">\n                  <Calendar className=\"h-4 w-4\" />\n                  <span className=\"text-sm\">Preparation Date</span>\n                </div>\n                <span className=\"font-medium\">\n                  {formatDate(record.preparation_date)}\n                </span>\n              </div>\n\n              {record.land_prepared ? (\n                <>\n                  {/* Show these details ONLY when land is prepared */}\n                  {/* Organic Amendments */}\n                  <div>\n                    <Label className=\"text-sm font-medium text-gray-700 mb-2\">\n                      Organic Amendments\n                    </Label>\n                    <div className=\"bg-green-50 p-3 rounded-lg\">\n                      {Array.isArray(amendments) ? (\n                        <div className=\"flex flex-wrap gap-2\">\n                          {amendments.map((amendment, index) => (\n                            <Badge\n                              key={index}\n                              variant=\"outline\"\n                              className=\"bg-white\"\n                            >\n                              {amendment}\n                            </Badge>\n                          ))}\n                        </div>\n                      ) : (\n                        <span className=\"text-sm\">{amendments}</span>\n                      )}\n                    </div>\n                  </div>\n\n                  {/* Residue Management */}\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-2 text-gray-600\">\n                      <Leaf className=\"h-4 w-4\" />\n                      <span className=\"text-sm\">Residue Management</span>\n                    </div>\n                    <Badge\n                      className={getResidueManagementColor(\n                        record.residue_management\n                      )}\n                    >\n                      {record.residue_management_display || \"Not specified\"}\n                    </Badge>\n                  </div>\n\n                  {/* Methods Used */}\n                  <div>\n                    <Label className=\"text-sm font-medium text-gray-700 mb-2\">\n                      Methods Used\n                    </Label>\n                    <div className=\"bg-gray-50 p-3 rounded-lg\">\n                      {Array.isArray(methods) ? (\n                        <div className=\"flex flex-wrap gap-2\">\n                          {methods.map((method, index) => (\n                            <Badge\n                              key={index}\n                              variant=\"secondary\"\n                              className=\"text-xs\"\n                            >\n                              {method}\n                            </Badge>\n                          ))}\n                        </div>\n                      ) : (\n                        <span className=\"text-sm\">{methods}</span>\n                      )}\n                    </div>\n                  </div>\n\n                  {/* Expected Sowing Date */}\n                  {record.expected_sowing_date && (\n                    <div className=\"mt-4 p-3 bg-blue-50 rounded-lg border border-blue-200\">\n                      <h4 className=\"text-sm font-medium text-blue-800 mb-1 flex items-center gap-1\">\n                        <Clock className=\"h-4 w-4\" />\n                        Expected Sowing Date\n                      </h4>\n                      <p className=\"text-sm text-blue-700\">\n                        {formatDate(record.expected_sowing_date)}\n                      </p>\n                    </div>\n                  )}\n                </>\n              ) : (\n                /* Show ONLY reason when land is NOT prepared */\n                <div className=\"mt-4 p-3 bg-red-50 rounded-lg border border-red-200\">\n                  <h4 className=\"text-sm font-medium text-red-800 mb-1 flex items-center gap-1\">\n                    <AlertCircle className=\"h-4 w-4\" />\n                    Reason Not Prepared\n                  </h4>\n                  <p className=\"text-sm text-red-700\">\n                    {record.reason_not_prepared || \"No reason provided\"}\n                  </p>\n                </div>\n              )}\n            </div>\n\n            {/* Action Button */}\n            <Button\n              onClick={() => {\n                setSelectedRecord(record);\n                setIsDetailModalOpen(true);\n              }}\n              variant=\"outline\"\n              className=\"w-full mt-4 gap-2 group-hover:border-primary\"\n            >\n              <Eye className=\"h-4 w-4\" />\n              View Full Details\n              <ChevronRight className=\"h-4 w-4\" />\n            </Button>\n          </div>\n\n          {/* Footer */}\n          <CardFooter className=\"border-t pt-4 flex justify-between text-sm text-gray-500\">\n            <div className=\"flex items-center gap-2\">\n              <div\n                className={`w-2 h-2 rounded-full ${\n                  record.land_prepared ? \"bg-amber-500\" : \"bg-red-500\"\n                }`}\n              ></div>\n              <span>Field {record.field}</span>\n            </div>\n          </CardFooter>\n        </CardContent>\n      </Card>\n    );\n  };\n\n  // Function to render detail modal content\n  const renderDetailModal = () => {\n    if (!selectedRecord) return null;\n\n    const methods = parseMethods(selectedRecord.methods_used);\n    const amendments = parseOrganicAmendments(\n      selectedRecord.organic_amendments_used\n    );\n\n    return (\n      <>\n        <DialogHeader>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <DialogTitle className=\"text-2xl flex items-center gap-2\">\n                <MapPin className=\"h-6 w-6 text-primary\" />\n                Land Preparation #{selectedRecord.id}\n              </DialogTitle>\n              <DialogDescription>\n                Complete land preparation details • Field {selectedRecord.field}\n              </DialogDescription>\n            </div>\n            <Badge\n              className={getLandPreparedColor(selectedRecord.land_prepared)}\n            >\n              {selectedRecord.land_prepared ? \"Prepared\" : \"Not Prepared\"}\n            </Badge>\n          </div>\n        </DialogHeader>\n\n        <div className=\"space-y-6\">\n          {/* Basic Information - Always show */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Wheat className=\"h-5 w-5 text-green-600\" />\n                  Crop & Field Details\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <Label className=\"text-sm text-muted-foreground\">\n                      Crop Name\n                    </Label>\n                    <p className=\"font-medium capitalize\">\n                      {selectedRecord.crop_name}\n                    </p>\n                  </div>\n                  <div>\n                    <Label className=\"text-sm text-muted-foreground\">\n                      Field\n                    </Label>\n                    <p className=\"font-medium\">Field {selectedRecord.field}</p>\n                  </div>\n                  <div>\n                    <Label className=\"text-sm text-muted-foreground\">\n                      Field Name\n                    </Label>\n                    <p className=\"font-medium\">{selectedRecord.field_name}</p>\n                  </div>\n                  <div>\n                    <Label className=\"text-sm text-muted-foreground\">\n                      Land Prepared\n                    </Label>\n                    <div className=\"flex items-center gap-1\">\n                      {selectedRecord.land_prepared ? (\n                        <>\n                          <CheckCircle className=\"h-4 w-4 text-green-500\" />\n                          <span className=\"text-green-600 font-medium\">\n                            Yes\n                          </span>\n                        </>\n                      ) : (\n                        <>\n                          <XCircle className=\"h-4 w-4 text-red-500\" />\n                          <span className=\"text-red-600\">No</span>\n                        </>\n                      )}\n                    </div>\n                  </div>\n                </div>\n\n                <Separator />\n\n                <div>\n                  <Label className=\"text-sm text-muted-foreground mb-2\">\n                    Preparation Date\n                  </Label>\n                  <div className=\"bg-gray-50 p-3 rounded-lg flex items-center gap-2\">\n                    <Calendar className=\"h-4 w-4 text-gray-500\" />\n                    <span className=\"font-medium\">\n                      {formatDate(selectedRecord.preparation_date)}\n                    </span>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            {selectedRecord.land_prepared ? (\n              /* Show Preparation Methods ONLY when land is prepared */\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Package className=\"h-5 w-5 text-amber-600\" />\n                    Preparation Methods\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div>\n                    <Label className=\"font-medium text-gray-700 mb-2\">\n                      Methods Used\n                    </Label>\n                    <div className=\"bg-gray-50 p-3 rounded-lg\">\n                      {Array.isArray(methods) && methods.length > 0 ? (\n                        <div className=\"space-y-2\">\n                          {methods.map((method, index) => (\n                            <div\n                              key={index}\n                              className=\"flex items-center gap-2\"\n                            >\n                              <div className=\"w-2 h-2 rounded-full bg-blue-500\"></div>\n                              <span className=\"text-sm\">{method}</span>\n                            </div>\n                          ))}\n                        </div>\n                      ) : (\n                        <p className=\"text-sm text-gray-500\">\n                          No methods specified\n                        </p>\n                      )}\n                    </div>\n                  </div>\n\n                  <div>\n                    <Label className=\"font-medium text-gray-700 mb-2\">\n                      Organic Amendments\n                    </Label>\n                    <div className=\"bg-green-50 p-3 rounded-lg\">\n                      {Array.isArray(amendments) && amendments.length > 0 ? (\n                        <div className=\"space-y-2\">\n                          {amendments.map((amendment, index) => (\n                            <div\n                              key={index}\n                              className=\"flex items-center gap-2\"\n                            >\n                              <div className=\"w-2 h-2 rounded-full bg-green-500\"></div>\n                              <span className=\"text-sm\">{amendment}</span>\n                            </div>\n                          ))}\n                        </div>\n                      ) : (\n                        <p className=\"text-sm text-gray-500\">\n                          No organic amendments specified\n                        </p>\n                      )}\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ) : (\n              /* Show Reason for Not Prepared ONLY when land is NOT prepared */\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <AlertCircle className=\"h-5 w-5 text-red-600\" />\n                    Reason Not Prepared\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"bg-red-50 p-4 rounded-lg border border-red-200\">\n                    <div className=\"flex items-start gap-3\">\n                      <AlertCircle className=\"h-6 w-6 text-red-600 mt-1\" />\n                      <div>\n                        <p className=\"font-medium text-red-800 mb-1\">\n                          Reason for Not Preparing Land\n                        </p>\n                        <p className=\"text-red-700\">\n                          {selectedRecord.reason_not_prepared ||\n                            \"No reason provided\"}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            )}\n          </div>\n\n          {/* Additional details - ONLY show when land is prepared */}\n          {selectedRecord.land_prepared && (\n            <>\n              {/* Residue Management & Sowing */}\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <Card>\n                  <CardHeader>\n                    <CardTitle className=\"flex items-center gap-2\">\n                      <Leaf className=\"h-5 w-5 text-blue-600\" />\n                      Residue Management\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"space-y-3\">\n                      <div>\n                        <Label className=\"font-medium text-gray-700 mb-2\">\n                          Management Method\n                        </Label>\n                        <div\n                          className={`p-3 rounded-lg ${getResidueManagementColor(\n                            selectedRecord.residue_management\n                          )}`}\n                        >\n                          <div className=\"flex items-center justify-between\">\n                            <span className=\"font-medium\">\n                              {selectedRecord.residue_management_display ||\n                                \"Not specified\"}\n                            </span>\n                            <Badge variant=\"outline\" className=\"bg-white\">\n                              {selectedRecord.residue_management || \"N/A\"}\n                            </Badge>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n\n                <Card>\n                  <CardHeader>\n                    <CardTitle className=\"flex items-center gap-2\">\n                      <Calendar className=\"h-5 w-5 text-purple-600\" />\n                      Sowing Schedule\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    {selectedRecord.expected_sowing_date ? (\n                      <div className=\"space-y-3\">\n                        <div>\n                          <Label className=\"font-medium text-gray-700 mb-2\">\n                            Expected Sowing Date\n                          </Label>\n                          <div className=\"bg-purple-50 p-3 rounded-lg\">\n                            <div className=\"flex items-center gap-2\">\n                              <Calendar className=\"h-4 w-4 text-purple-600\" />\n                              <span className=\"font-medium\">\n                                {formatDate(\n                                  selectedRecord.expected_sowing_date\n                                )}\n                              </span>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    ) : (\n                      <div className=\"text-center py-4 text-gray-500\">\n                        No sowing date specified\n                      </div>\n                    )}\n                  </CardContent>\n                </Card>\n              </div>\n            </>\n          )}\n\n          {/* Timeline Information - Always show */}\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Clock className=\"h-5 w-5 text-gray-600\" />\n                Timeline Information\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <Label className=\"font-medium text-gray-700 mb-2\">\n                    Record Created\n                  </Label>\n                  <div className=\"bg-gray-50 p-3 rounded-lg\">\n                    <div className=\"flex items-center gap-2\">\n                      <Calendar className=\"h-4 w-4 text-gray-500\" />\n                      <span>{formatDate(selectedRecord.created_at)}</span>\n                    </div>\n                  </div>\n                </div>\n                <div>\n                  <Label className=\"font-medium text-gray-700 mb-2\">\n                    Record ID\n                  </Label>\n                  <div className=\"bg-gray-50 p-3 rounded-lg\">\n                    <div className=\"flex justify-between items-center\">\n                      <span className=\"font-medium\">#{selectedRecord.id}</span>\n                      <Badge variant=\"outline\">Land Prep</Badge>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <DialogFooter>\n            <Button\n              variant=\"outline\"\n              onClick={() => setIsDetailModalOpen(false)}\n            >\n              Close\n            </Button>\n            <Button>Export Report</Button>\n          </DialogFooter>\n        </div>\n      </>\n    );\n  };\n\n  if (loading) {\n    return (\n      <div className=\"space-y-8\">\n        {/* Header Skeleton */}\n        <div className=\"flex justify-between items-center\">\n          <div>\n            <Skeleton className=\"h-10 w-48\" />\n            <Skeleton className=\"h-4 w-64 mt-2\" />\n          </div>\n          <Skeleton className=\"h-10 w-32\" />\n        </div>\n\n        {/* Stats Skeleton */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          {[1, 2, 3, 4].map((i) => (\n            <Skeleton key={i} className=\"h-32 rounded-lg\" />\n          ))}\n        </div>\n\n        {/* Cards Skeleton */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {[1, 2, 3, 4, 5, 6].map((i) => (\n            <Skeleton key={i} className=\"h-64 rounded-lg\" />\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <Card>\n        <CardContent className=\"pt-6\">\n          <div className=\"text-center py-8 text-red-500\">\n            <AlertCircle className=\"h-12 w-12 mx-auto mb-4\" />\n            <p className=\"text-lg font-semibold\">Error Loading Data</p>\n            <p className=\"text-sm mt-2\">{error}</p>\n            <Button onClick={fetchLandPrepData} className=\"mt-4\">\n              Retry\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Header Section */}\n      <div className=\"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4\">\n        <div>\n          <h1 className=\"text-3xl font-bold tracking-tight\">\n            Land Preparation Records\n          </h1>\n          <p className=\"text-muted-foreground mt-2\">\n            Track land preparation activities, methods used, and residue\n            management\n          </p>\n        </div>\n        <div className=\"flex items-center gap-3\">\n          <Button variant=\"outline\" size=\"sm\">\n            <Download className=\"h-4 w-4 mr-2\" />\n            Export\n          </Button>\n          <Button size=\"sm\" onClick={fetchLandPrepData}>\n            <BarChart3 className=\"h-4 w-4 mr-2\" />\n            Refresh\n          </Button>\n        </div>\n      </div>\n\n      {/* Stats Overview */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        <Card className=\"bg-gradient-to-br from-amber-50 to-amber-100 border-amber-200\">\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-amber-700\">\n                  Total Records\n                </p>\n                <h3 className=\"text-2xl font-bold text-amber-900 mt-2\">\n                  {totalRecords}\n                </h3>\n              </div>\n              <div className=\"h-12 w-12 rounded-full bg-amber-200 flex items-center justify-center\">\n                <MapPin className=\"h-6 w-6 text-amber-700\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"bg-gradient-to-br from-green-50 to-green-100 border-green-200\">\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-green-700\">\n                  Land Prepared\n                </p>\n                <h3 className=\"text-2xl font-bold text-green-900 mt-2\">\n                  {landPreparedCount}\n                </h3>\n              </div>\n              <div className=\"h-12 w-12 rounded-full bg-green-200 flex items-center justify-center\">\n                <CheckCircle className=\"h-6 w-6 text-green-700\" />\n              </div>\n            </div>\n            <p className=\"text-xs text-green-600 mt-2\">\n              {totalRecords > 0\n                ? ((landPreparedCount / totalRecords) * 100).toFixed(1)\n                : 0}\n              % of total\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card className=\"bg-gradient-to-br from-red-50 to-red-100 border-red-200\">\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-red-700\">Not Prepared</p>\n                <h3 className=\"text-2xl font-bold text-red-900 mt-2\">\n                  {landNotPreparedCount}\n                </h3>\n              </div>\n              <div className=\"h-12 w-12 rounded-full bg-red-200 flex items-center justify-center\">\n                <XCircle className=\"h-6 w-6 text-red-700\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200\">\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-blue-700\">\n                  Active Fields\n                </p>\n                <h3 className=\"text-2xl font-bold text-blue-900 mt-2\">\n                  {uniqueFieldsCount}\n                </h3>\n              </div>\n              <div className=\"h-12 w-12 rounded-full bg-blue-200 flex items-center justify-center\">\n                <Sprout className=\"h-6 w-6 text-blue-700\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Filters and Controls */}\n      <Card>\n        <CardContent className=\"p-6\">\n          <div className=\"flex flex-col lg:flex-row gap-4 items-center\">\n            <div className=\"flex-1 w-full lg:w-auto\">\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4\" />\n                <Input\n                  placeholder=\"Search by crop name, organic amendments, or methods...\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  className=\"pl-10 w-full lg:w-[400px]\"\n                />\n              </div>\n            </div>\n\n            <div className=\"flex flex-wrap items-center gap-3\">\n              <div className=\"flex items-center gap-2\">\n                <Filter className=\"h-4 w-4 text-muted-foreground\" />\n                <Select value={filterField} onValueChange={setFilterField}>\n                  <SelectTrigger className=\"w-[180px]\">\n                    <SelectValue placeholder=\"Filter by field\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">All Fields</SelectItem>\n                    {uniqueFields.map((field) => (\n                      <SelectItem\n                        key={field.id}\n                        value={field.id.toString()}\n                        className=\"capitalize\"\n                      >\n                        {field.field_name}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <Tabs\n                value={activeTab}\n                onValueChange={setActiveTab}\n                className=\"w-auto\"\n              >\n                <TabsList>\n                  <TabsTrigger value=\"all\">All</TabsTrigger>\n                  <TabsTrigger value=\"prepared\">Prepared</TabsTrigger>\n                  <TabsTrigger value=\"not-prepared\">Not Prepared</TabsTrigger>\n                  <TabsTrigger value=\"burnt\">Burnt Residue</TabsTrigger>\n                </TabsList>\n              </Tabs>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Results Section */}\n      <div>\n        <div className=\"flex justify-between items-center mb-4\">\n          <h2 className=\"text-xl font-semibold\">\n            Land Preparation Records\n            <span className=\"text-muted-foreground font-normal ml-2\">\n              ({filteredData.length}{\" \"}\n              {filteredData.length === 1 ? \"record\" : \"records\"})\n            </span>\n          </h2>\n          <p className=\"text-sm text-muted-foreground\">\n            Sorted by latest preparation date\n          </p>\n        </div>\n\n        {filteredData.length === 0 ? (\n          <Card>\n            <CardContent className=\"py-12 text-center\">\n              <MapPin className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n              <h3 className=\"text-lg font-semibold text-gray-700 mb-2\">\n                No land preparation data found\n              </h3>\n              <p className=\"text-gray-500 max-w-sm mx-auto\">\n                {searchQuery\n                  ? \"No records match your search criteria. Try different keywords.\"\n                  : \"No land preparation data has been recorded yet.\"}\n              </p>\n            </CardContent>\n          </Card>\n        ) : (\n          <>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {filteredData.map(renderCard)}\n            </div>\n\n            {/* Load More Button */}\n            {hasNextPage && (\n              <div className=\"mt-8 text-center\">\n                <Button variant=\"outline\" onClick={loadMoreData}>\n                  Load More Records\n                </Button>\n              </div>\n            )}\n          </>\n        )}\n      </div>\n\n      {/* Detail Modal */}\n      <Dialog open={isDetailModalOpen} onOpenChange={setIsDetailModalOpen}>\n        <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto\">\n          {renderDetailModal()}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2366, "column": 0}, "map": {"version":3,"sources":["file:///D:/Nextjs/landdirectorateDashboardVersion1-main/landdirectorateDashboardVersion1-main/components/stage-forms/sowing-form.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport {\n  Card, CardContent, CardHeader, CardTitle,\n} from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Badge } from '@/components/ui/badge'\nimport { Label } from '@/components/ui/label'\nimport { Separator } from '@/components/ui/separator'\nimport {\n  Tabs, TabsList, TabsTrigger,\n} from '@/components/ui/tabs'\nimport {\n  Dialog, DialogContent, DialogHeader,\n  DialogTitle, DialogDescription, DialogFooter,\n} from '@/components/ui/dialog'\nimport {\n  Select, SelectContent, SelectItem,\n  SelectTrigger, SelectValue,\n} from '@/components/ui/select'\nimport { Skeleton } from '@/components/ui/skeleton'\n\nimport {\n  Wheat, Sprout, Leaf, AlertCircle, Search, Filter,\n  Calendar, Package, Eye, ChevronRight,\n  ThermometerSun, Thermometer, Droplet,\n  CloudRain, Sun, Cloud, Wind,\n} from 'lucide-react'\n\n/* ===================== TYPES ===================== */\n\nexport interface FarmData {\n  id: number\n  farm: number\n  farm_name: string\n  farmer_name: string\n  crop_name: string\n  variety: string\n  method_of_sowing: string\n  seed_rate: string\n  raya_sowing_date: string\n\n  germination_percentage: 'Good' | 'Average' | 'Poor'\n  germination_issues?: Record<string, string[]> | null\n\n  farm_picture?: string | null\n\n  max_temp_day?: number | null\n  min_temp_day?: number | null\n  avg_temp_night?: number | null\n  humidity?: number | null\n  precipitation?: number | null\n\n  seed_treatment?: boolean\n  seed_treatment_product?: string | null\n  soil_conditioner?: boolean\n  soil_conditioner_product?: string | null\n  bio_stimulant?: string | null\n  aphid_recommendation?: string | string[] | null\n}\n\n/* ===================== COMPONENT ===================== */\n\nexport function SowingForm() {\n  const [farmData, setFarmData] = useState<FarmData[]>([])\n  const [filteredFarms, setFilteredFarms] = useState<FarmData[]>([])\n  const [selectedFarm, setSelectedFarm] = useState<FarmData | null>(null)\n\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n\n  const [searchQuery, setSearchQuery] = useState('')\n  const [activeTab, setActiveTab] = useState<'all' | 'good' | 'average' | 'poor' | 'issues' | 'recent'>('all')\n  const [selectedFarmNumber, setSelectedFarmNumber] = useState('all')\n\n  const [isDetailModalOpen, setIsDetailModalOpen] = useState(false)\n\n  /* ===================== FETCH ===================== */\n\n  useEffect(() => {\n    fetchFarmData()\n  }, [])\n\n  const fetchFarmData = async () => {\n    try {\n      const token = localStorage.getItem('authToken')\n      if (!token) return\n\n      setLoading(true)\n\n      const res = await fetch(\n        'https://rda.ngrok.app/api/sowing-emergence-stageView/',\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n            'ngrok-skip-browser-warning': 'true',\n          },\n        }\n      )\n\n      if (!res.ok) throw new Error(`HTTP ${res.status}`)\n\n      const json = await res.json()\n      console.log('Fetched Sowing & Emergence Data:', json)\n\n      // ✅ NORMALIZE DATA (CRITICAL FIX)\n      const normalized: FarmData[] = (json.results || []).map((farm: FarmData) => ({\n        ...farm,\n        germination_issues: farm.germination_issues ?? {},\n      }))\n\n      setFarmData(normalized)\n      setFilteredFarms(normalized)\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to load data')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  /* ===================== FILTERING ===================== */\n\n  useEffect(() => {\n    let results = [...farmData]\n\n    if (searchQuery.trim()) {\n      const q = searchQuery.toLowerCase()\n      results = results.filter(f =>\n        f.crop_name.toLowerCase().includes(q) ||\n        f.variety.toLowerCase().includes(q) ||\n        f.method_of_sowing.toLowerCase().includes(q) ||\n        f.farm.toString().includes(q)\n      )\n    }\n\n    if (selectedFarmNumber !== 'all') {\n      results = results.filter(f => f.farm.toString() === selectedFarmNumber)\n    }\n\n    if (activeTab === 'issues') {\n      results = results.filter(f => Object.keys(f.germination_issues ?? {}).length > 0)\n    } else if (activeTab !== 'all') {\n      results = results.filter(f => f.germination_percentage.toLowerCase() === activeTab)\n    }\n\n    setFilteredFarms(results)\n  }, [farmData, searchQuery, activeTab, selectedFarmNumber])\n\n  /* ===================== HELPERS ===================== */\n\n  const getGerminationColor = (status: string) => {\n    if (status === 'Good') return 'bg-green-100 text-green-800'\n    if (status === 'Average') return 'bg-yellow-100 text-yellow-800'\n    if (status === 'Poor') return 'bg-red-100 text-red-800'\n    return 'bg-gray-100'\n  }\n\n  const formatDate = (date: string) =>\n    new Date(date).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })\n\n  const parseAphidRecommendation = (rec: string | string[]) =>\n    Array.isArray(rec) ? rec : (() => {\n      try {\n        const parsed = JSON.parse(rec)\n        return Array.isArray(parsed) ? parsed : [rec]\n      } catch {\n        return [rec]\n      }\n    })()\n\n  /* ===================== UI ===================== */\n\n  if (loading) {\n    return <Skeleton className=\"h-64 w-full\" />\n  }\n\n  if (error) {\n    return (\n      <Card>\n        <CardContent className=\"py-10 text-center text-red-600\">\n          <AlertCircle className=\"mx-auto mb-4\" />\n          <p>{error}</p>\n          <Button className=\"mt-4\" onClick={fetchFarmData}>Retry</Button>\n        </CardContent>\n      </Card>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <h2 className=\"text-3xl font-bold\">Sowing & Emergence Data</h2>\n\n      {/* SEARCH + FILTER */}\n      <div className=\"flex gap-4\">\n        <Input\n          placeholder=\"Search farms…\"\n          value={searchQuery}\n          onChange={e => setSearchQuery(e.target.value)}\n        />\n\n        <Tabs value={activeTab} onValueChange={v => setActiveTab(v as any)}>\n          <TabsList>\n            <TabsTrigger value=\"all\">All</TabsTrigger>\n            <TabsTrigger value=\"good\">Good</TabsTrigger>\n            <TabsTrigger value=\"average\">Average</TabsTrigger>\n            <TabsTrigger value=\"poor\">Poor</TabsTrigger>\n            <TabsTrigger value=\"issues\">Issues</TabsTrigger>\n          </TabsList>\n        </Tabs>\n      </div>\n\n      {/* CARDS */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {filteredFarms.map(farm => (\n          <Card key={farm.id} className=\"hover:shadow-lg transition\">\n            <CardContent className=\"p-5 space-y-3\">\n              <div className=\"flex justify-between\">\n                <h3 className=\"font-semibold\">{farm.crop_name}</h3>\n                <Badge className={getGerminationColor(farm.germination_percentage)}>\n                  {farm.germination_percentage}\n                </Badge>\n              </div>\n\n              <p className=\"text-sm text-muted-foreground\">\n                Farm #{farm.farm} • {farm.farm_name}\n              </p>\n\n              <Separator />\n\n              <div className=\"flex justify-between text-sm\">\n                <span>Sowing Date</span>\n                <span>{formatDate(farm.raya_sowing_date)}</span>\n              </div>\n\n              <Button\n                variant=\"outline\"\n                className=\"w-full\"\n                onClick={() => {\n                  setSelectedFarm(farm)\n                  setIsDetailModalOpen(true)\n                }}\n              >\n                <Eye className=\"mr-2 h-4 w-4\" /> View Details\n              </Button>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n\n      {/* DETAIL MODAL */}\n      <Dialog open={isDetailModalOpen} onOpenChange={setIsDetailModalOpen}>\n        <DialogContent className=\"max-w-3xl\">\n          {selectedFarm && (\n            <>\n              <DialogHeader>\n                <DialogTitle>{selectedFarm.crop_name}</DialogTitle>\n                <DialogDescription>\n                  {selectedFarm.farm_name} • Farmer: {selectedFarm.farmer_name}\n                </DialogDescription>\n              </DialogHeader>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle>Germination Issues</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  {Object.keys(selectedFarm.germination_issues ?? {}).length > 0 ? (\n                    Object.entries(selectedFarm.germination_issues ?? {}).map(([k, v]) => (\n                      <div key={k} className=\"mb-3\">\n                        <Label>{k}</Label>\n                        <div className=\"flex flex-wrap gap-2 mt-1\">\n                          {(v ?? []).map((issue, i) => (\n                            <Badge key={i} variant=\"outline\">{issue}</Badge>\n                          ))}\n                        </div>\n                      </div>\n                    ))\n                  ) : (\n                    <p className=\"text-muted-foreground\">No issues reported</p>\n                  )}\n                </CardContent>\n              </Card>\n\n              <DialogFooter>\n                <Button onClick={() => setIsDetailModalOpen(false)}>Close</Button>\n              </DialogFooter>\n            </>\n          )}\n        </DialogContent>\n      </Dialog>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAGA;AAQA;AAEA;AAAA;AAxBA;;;;;;;;;;;;;AAiEO,SAAS;IACd,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAa,EAAE;IACvD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAa,EAAE;IACjE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAkB;IAElE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAElD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAA4D;IACtG,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,iNAAQ,EAAC;IAE7D,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,iNAAQ,EAAC;IAE3D,qDAAqD,GAErD,IAAA,kNAAS,EAAC;QACR;IACF,GAAG,EAAE;IAEL,MAAM,gBAAgB;QACpB,IAAI;YACF,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,IAAI,CAAC,OAAO;YAEZ,WAAW;YAEX,MAAM,MAAM,MAAM,MAChB,yDACA;gBACE,SAAS;oBACP,eAAe,CAAC,OAAO,EAAE,OAAO;oBAChC,8BAA8B;gBAChC;YACF;YAGF,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,CAAC,KAAK,EAAE,IAAI,MAAM,EAAE;YAEjD,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,QAAQ,GAAG,CAAC,oCAAoC;YAEhD,kCAAkC;YAClC,MAAM,aAAyB,CAAC,KAAK,OAAO,IAAI,EAAE,EAAE,GAAG,CAAC,CAAC,OAAmB,CAAC;oBAC3E,GAAG,IAAI;oBACP,oBAAoB,KAAK,kBAAkB,IAAI,CAAC;gBAClD,CAAC;YAED,YAAY;YACZ,iBAAiB;QACnB,EAAE,OAAO,KAAK;YACZ,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;QAChD,SAAU;YACR,WAAW;QACb;IACF;IAEA,yDAAyD,GAEzD,IAAA,kNAAS,EAAC;QACR,IAAI,UAAU;eAAI;SAAS;QAE3B,IAAI,YAAY,IAAI,IAAI;YACtB,MAAM,IAAI,YAAY,WAAW;YACjC,UAAU,QAAQ,MAAM,CAAC,CAAA,IACvB,EAAE,SAAS,CAAC,WAAW,GAAG,QAAQ,CAAC,MACnC,EAAE,OAAO,CAAC,WAAW,GAAG,QAAQ,CAAC,MACjC,EAAE,gBAAgB,CAAC,WAAW,GAAG,QAAQ,CAAC,MAC1C,EAAE,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QAE/B;QAEA,IAAI,uBAAuB,OAAO;YAChC,UAAU,QAAQ,MAAM,CAAC,CAAA,IAAK,EAAE,IAAI,CAAC,QAAQ,OAAO;QACtD;QAEA,IAAI,cAAc,UAAU;YAC1B,UAAU,QAAQ,MAAM,CAAC,CAAA,IAAK,OAAO,IAAI,CAAC,EAAE,kBAAkB,IAAI,CAAC,GAAG,MAAM,GAAG;QACjF,OAAO,IAAI,cAAc,OAAO;YAC9B,UAAU,QAAQ,MAAM,CAAC,CAAA,IAAK,EAAE,sBAAsB,CAAC,WAAW,OAAO;QAC3E;QAEA,iBAAiB;IACnB,GAAG;QAAC;QAAU;QAAa;QAAW;KAAmB;IAEzD,uDAAuD,GAEvD,MAAM,sBAAsB,CAAC;QAC3B,IAAI,WAAW,QAAQ,OAAO;QAC9B,IAAI,WAAW,WAAW,OAAO;QACjC,IAAI,WAAW,QAAQ,OAAO;QAC9B,OAAO;IACT;IAEA,MAAM,aAAa,CAAC,OAClB,IAAI,KAAK,MAAM,kBAAkB,CAAC,SAAS;YAAE,OAAO;YAAS,KAAK;YAAW,MAAM;QAAU;IAE/F,MAAM,2BAA2B,CAAC,MAChC,MAAM,OAAO,CAAC,OAAO,MAAM,CAAC;YAC1B,IAAI;gBACF,MAAM,SAAS,KAAK,KAAK,CAAC;gBAC1B,OAAO,MAAM,OAAO,CAAC,UAAU,SAAS;oBAAC;iBAAI;YAC/C,EAAE,OAAM;gBACN,OAAO;oBAAC;iBAAI;YACd;QACF,CAAC;IAEH,kDAAkD,GAElD,IAAI,SAAS;QACX,qBAAO,8OAAC,yIAAQ;YAAC,WAAU;;;;;;IAC7B;IAEA,IAAI,OAAO;QACT,qBACE,8OAAC,iIAAI;sBACH,cAAA,8OAAC,wIAAW;gBAAC,WAAU;;kCACrB,8OAAC,mOAAW;wBAAC,WAAU;;;;;;kCACvB,8OAAC;kCAAG;;;;;;kCACJ,8OAAC,qIAAM;wBAAC,WAAU;wBAAO,SAAS;kCAAe;;;;;;;;;;;;;;;;;IAIzD;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAqB;;;;;;0BAGnC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,mIAAK;wBACJ,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAA,IAAK,eAAe,EAAE,MAAM,CAAC,KAAK;;;;;;kCAG9C,8OAAC,iIAAI;wBAAC,OAAO;wBAAW,eAAe,CAAA,IAAK,aAAa;kCACvD,cAAA,8OAAC,qIAAQ;;8CACP,8OAAC,wIAAW;oCAAC,OAAM;8CAAM;;;;;;8CACzB,8OAAC,wIAAW;oCAAC,OAAM;8CAAO;;;;;;8CAC1B,8OAAC,wIAAW;oCAAC,OAAM;8CAAU;;;;;;8CAC7B,8OAAC,wIAAW;oCAAC,OAAM;8CAAO;;;;;;8CAC1B,8OAAC,wIAAW;oCAAC,OAAM;8CAAS;;;;;;;;;;;;;;;;;;;;;;;0BAMlC,8OAAC;gBAAI,WAAU;0BACZ,cAAc,GAAG,CAAC,CAAA,qBACjB,8OAAC,iIAAI;wBAAe,WAAU;kCAC5B,cAAA,8OAAC,wIAAW;4BAAC,WAAU;;8CACrB,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAG,WAAU;sDAAiB,KAAK,SAAS;;;;;;sDAC7C,8OAAC,mIAAK;4CAAC,WAAW,oBAAoB,KAAK,sBAAsB;sDAC9D,KAAK,sBAAsB;;;;;;;;;;;;8CAIhC,8OAAC;oCAAE,WAAU;;wCAAgC;wCACpC,KAAK,IAAI;wCAAC;wCAAI,KAAK,SAAS;;;;;;;8CAGrC,8OAAC,2IAAS;;;;;8CAEV,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;sDAAK;;;;;;sDACN,8OAAC;sDAAM,WAAW,KAAK,gBAAgB;;;;;;;;;;;;8CAGzC,8OAAC,qIAAM;oCACL,SAAQ;oCACR,WAAU;oCACV,SAAS;wCACP,gBAAgB;wCAChB,qBAAqB;oCACvB;;sDAEA,8OAAC,uMAAG;4CAAC,WAAU;;;;;;wCAAiB;;;;;;;;;;;;;uBA5B3B,KAAK,EAAE;;;;;;;;;;0BAoCtB,8OAAC,qIAAM;gBAAC,MAAM;gBAAmB,cAAc;0BAC7C,cAAA,8OAAC,4IAAa;oBAAC,WAAU;8BACtB,8BACC;;0CACE,8OAAC,2IAAY;;kDACX,8OAAC,0IAAW;kDAAE,aAAa,SAAS;;;;;;kDACpC,8OAAC,gJAAiB;;4CACf,aAAa,SAAS;4CAAC;4CAAY,aAAa,WAAW;;;;;;;;;;;;;0CAIhE,8OAAC,iIAAI;;kDACH,8OAAC,uIAAU;kDACT,cAAA,8OAAC,sIAAS;sDAAC;;;;;;;;;;;kDAEb,8OAAC,wIAAW;kDACT,OAAO,IAAI,CAAC,aAAa,kBAAkB,IAAI,CAAC,GAAG,MAAM,GAAG,IAC3D,OAAO,OAAO,CAAC,aAAa,kBAAkB,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,iBAC/D,8OAAC;gDAAY,WAAU;;kEACrB,8OAAC,mIAAK;kEAAE;;;;;;kEACR,8OAAC;wDAAI,WAAU;kEACZ,CAAC,KAAK,EAAE,EAAE,GAAG,CAAC,CAAC,OAAO,kBACrB,8OAAC,mIAAK;gEAAS,SAAQ;0EAAW;+DAAtB;;;;;;;;;;;+CAJR;;;;sEAUZ,8OAAC;4CAAE,WAAU;sDAAwB;;;;;;;;;;;;;;;;;0CAK3C,8OAAC,2IAAY;0CACX,cAAA,8OAAC,qIAAM;oCAAC,SAAS,IAAM,qBAAqB;8CAAQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQpE"}},
    {"offset": {"line": 2862, "column": 0}, "map": {"version":3,"sources":["file:///D:/Nextjs/landdirectorateDashboardVersion1-main/landdirectorateDashboardVersion1-main/components/stage-forms/growth-form.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport {\n  Card,\n  CardContent,\n  CardHeader,\n  CardTitle,\n  CardDescription,\n  CardFooter,\n} from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n  DialogFooter,\n} from \"@/components/ui/dialog\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport {\n  Sprout,\n  Leaf,\n  Package,\n  Droplet,\n  Bug,\n  AlertCircle,\n  CheckCircle,\n  XCircle,\n  ChevronRight,\n  Eye,\n  Filter,\n  Search,\n  Download,\n  BarChart3,\n  Calendar,\n  Wheat,\n  Thermometer,\n  TrendingUp,\n} from \"lucide-react\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\n\ninterface GrowthData {\n  id: number;\n  crop_name: string;\n  weeds_present: boolean;\n  post_emergent_applied: boolean;\n  post_emergent_product: string | null;\n  post_emergent_other_text: string | null;\n  fertilizers_applied_2nd_irrigation: string;\n  fertilizer_type: string;\n  zn_applied: string;\n  zn_product: string;\n  bio_stimulant_applied: string;\n  bio_stimulant_product: string;\n  yellowing_observed: string;\n  yellowing_bio_stimulant: string;\n  crop_health: string;\n  crop_height: string;\n  irrigation_3rd_fertilizers: string;\n  plant_growth_regulator: string;\n  rust_management: string;\n  aphid_control: string;\n  created_at: string;\n  farm: number | null;\n}\n\nexport function GrowthForm() {\n  const [growthData, setGrowthData] = useState<GrowthData[]>([]);\n  const [filteredData, setFilteredData] = useState<GrowthData[]>([]);\n  const [selectedRecord, setSelectedRecord] = useState<GrowthData | null>(null);\n  const [isDetailModalOpen, setIsDetailModalOpen] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [filterField, setFilterField] = useState<string>(\"all\");\n  const [activeTab, setActiveTab] = useState(\"all\");\n\n  // Stats calculation\n  const totalRecords = growthData.length;\n  const healthyCrops = growthData.filter(\n    (record) =>\n      record.crop_health === \"Healthy\" || record.crop_health === \"healthy\"\n  ).length;\n  const weedsPresentCount = growthData.filter(\n    (record) => record.weeds_present\n  ).length;\n  const yellowingObservedCount = growthData.filter(\n    (record) => record.yellowing_observed === \"Yes\"\n  ).length;\n\n  // Unique crops\n  const uniqueCrops = Array.from(\n    new Set(growthData.map((record) => record.crop_name))\n  ).map((cropName) => ({ id: cropName, name: cropName }));\n\n  useEffect(() => {\n    fetchGrowthData();\n  }, []);\n\n  // Filter data based on search and filter\n  useEffect(() => {\n    let results = [...growthData];\n\n    // Apply search filter\n    if (searchQuery.trim() !== \"\") {\n      const query = searchQuery.toLowerCase();\n      results = results.filter(\n        (record) =>\n          record.crop_name.toLowerCase().includes(query) ||\n          record.fertilizer_type.toLowerCase().includes(query) ||\n          record.bio_stimulant_product.toLowerCase().includes(query)\n      );\n    }\n\n    // Apply crop filter\n    if (filterField !== \"all\") {\n      results = results.filter((record) => record.crop_name === filterField);\n    }\n\n    // Apply tab filter\n    if (activeTab === \"issues\") {\n      results = results.filter(\n        (record) => record.yellowing_observed === \"Yes\" || record.weeds_present\n      );\n    } else if (activeTab === \"healthy\") {\n      results = results.filter(\n        (record) =>\n          record.crop_health === \"Healthy\" || record.crop_health === \"healthy\"\n      );\n    } else if (activeTab === \"yellowing\") {\n      results = results.filter((record) => record.yellowing_observed === \"Yes\");\n    }\n\n    setFilteredData(results);\n  }, [searchQuery, filterField, activeTab, growthData]);\n\n  const fetchGrowthData = async () => {\n    try {\n      setLoading(true);\n      const token =\n        typeof window !== \"undefined\"\n          ? localStorage.getItem(\"authToken\")\n          : null;\n\n      if (!token) {\n        setError(\"No authentication token found\");\n        return;\n      }\n\n      const response = await fetch(\n        \"https://rda.ngrok.app/api/growth-tillering/\",\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n            \"ngrok-skip-browser-warning\": \"true\",\n          },\n        }\n      );\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const data = await response.json();\n      console.log(\"Fetched growth & tillering data:\", data);\n      setGrowthData(data || []);\n      setFilteredData(data || []);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : \"Failed to fetch data\");\n      console.error(\"Error fetching growth & tillering data:\", err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getCropHealthColor = (health: string) => {\n    const healthLower = health.toLowerCase();\n    switch (healthLower) {\n      case \"healthy\":\n        return \"bg-green-100 text-green-800\";\n      case \"fair\":\n        return \"bg-yellow-100 text-yellow-800\";\n      case \"stressed\":\n        return \"bg-red-100 text-red-800\";\n      default:\n        return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  const getCropHeightColor = (height: string) => {\n    if (height.includes(\"<\") || height.includes(\"less\")) {\n      return \"text-blue-600\";\n    } else if (height.includes(\"6-12\")) {\n      return \"text-green-600\";\n    } else {\n      return \"text-amber-600\";\n    }\n  };\n\n  const formatHeight = (height: string) => {\n    if (height.includes(\"less_than_6_inches\") || height === \"<6\") {\n      return \"Less than 6 inches\";\n    }\n    return height;\n  };\n\n  const getYellowingStatusColor = (status: string) => {\n    return status === \"Yes\"\n      ? \"bg-red-100 text-red-800\"\n      : \"bg-green-100 text-green-800\";\n  };\n\n  const getBioStimulantStatusColor = (status: string) => {\n    return status === \"Yes\"\n      ? \"bg-blue-100 text-blue-800\"\n      : \"bg-gray-100 text-gray-800\";\n  };\n\n  const renderYesNoStatus = (value: string) => (\n    <div className=\"flex items-center gap-1\">\n      {value === \"Yes\" ? (\n        <>\n          <CheckCircle className=\"h-4 w-4 text-green-500\" />\n          <span className=\"text-green-600 font-medium\">Yes</span>\n        </>\n      ) : (\n        <>\n          <XCircle className=\"h-4 w-4 text-gray-400\" />\n          <span className=\"text-gray-500\">No</span>\n        </>\n      )}\n    </div>\n  );\n\n  const renderBooleanStatus = (value: boolean) => (\n    <div className=\"flex items-center gap-1\">\n      {value ? (\n        <>\n          <CheckCircle className=\"h-4 w-4 text-green-500\" />\n          <span className=\"text-green-600 font-medium\">Yes</span>\n        </>\n      ) : (\n        <>\n          <XCircle className=\"h-4 w-4 text-gray-400\" />\n          <span className=\"text-gray-500\">No</span>\n        </>\n      )}\n    </div>\n  );\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString(\"en-US\", {\n      month: \"short\",\n      day: \"numeric\",\n      year: \"numeric\",\n    });\n  };\n\n  // Function to render each card\n  const renderCard = (record: GrowthData) => (\n    <Card\n      key={record.id}\n      className=\"group hover:shadow-lg transition-all duration-300 hover:border-primary/30 overflow-hidden\"\n    >\n      <CardContent className=\"p-0\">\n        {/* Header Section */}\n        <div className=\"bg-gradient-to-r from-blue-50 to-blue-100 p-5\">\n          <div className=\"flex justify-between items-start\">\n            <div>\n              <h3 className=\"text-xl font-bold text-gray-900 line-clamp-1\">\n                {record.crop_name}\n              </h3>\n              <p className=\"text-sm text-gray-600 mt-1\">\n                Record #{record.id} {record.farm && `• Farm ${record.farm}`}\n              </p>\n            </div>\n            <Badge className={getCropHealthColor(record.crop_health)}>\n              {record.crop_health}\n            </Badge>\n          </div>\n        </div>\n\n        {/* Content */}\n        <div className=\"p-5\">\n          <div className=\"space-y-4\">\n            {/* Key Information */}\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center gap-2 text-gray-600\">\n                    <Package className=\"h-4 w-4\" />\n                    <span className=\"text-sm\">Fertilizer</span>\n                  </div>\n                  <Badge variant=\"outline\" className=\"capitalize\">\n                    {record.fertilizer_type}\n                  </Badge>\n                </div>\n              </div>\n\n              <div className=\"space-y-2\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center gap-2 text-gray-600\">\n                    <Leaf className=\"h-4 w-4\" />\n                    <span className=\"text-sm\">Yellowing</span>\n                  </div>\n                  <Badge\n                    className={getYellowingStatusColor(\n                      record.yellowing_observed\n                    )}\n                  >\n                    {record.yellowing_observed}\n                  </Badge>\n                </div>\n              </div>\n            </div>\n\n            {/* Show Yellowing Bio Stimulant when Yellowing is Yes */}\n            {record.yellowing_observed === \"Yes\" &&\n              record.yellowing_bio_stimulant && (\n                <div className=\"mt-2 p-3 bg-red-50 rounded-lg border border-red-200\">\n                  <h4 className=\"text-sm font-medium text-red-800 mb-1 flex items-center gap-1\">\n                    <AlertCircle className=\"h-4 w-4\" />\n                    Yellowing Treatment\n                  </h4>\n                  <p className=\"text-sm text-red-700\">\n                    {record.yellowing_bio_stimulant}\n                  </p>\n                </div>\n              )}\n\n            {/* Bio Stimulant */}\n            <div>\n              <Label className=\"text-sm font-medium text-gray-700 mb-2\">\n                Bio Stimulant\n              </Label>\n              <div className=\"flex items-center justify-between bg-gray-50 p-3 rounded-lg\">\n                <div>\n                  <span className=\"font-medium\">\n                    {record.bio_stimulant_product}\n                  </span>\n                  <p className=\"text-xs text-gray-500 mt-1\">\n                    Applied: {record.bio_stimulant_applied}\n                  </p>\n                </div>\n                <Badge\n                  className={getBioStimulantStatusColor(\n                    record.bio_stimulant_applied\n                  )}\n                >\n                  {record.bio_stimulant_applied}\n                </Badge>\n              </div>\n            </div>\n\n            {/* Quick Status Indicators */}\n            <div className=\"grid grid-cols-2 gap-3\">\n              <div className=\"bg-gray-50 p-3 rounded-lg\">\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-sm text-gray-600\">Weeds Present</span>\n                  {renderBooleanStatus(record.weeds_present)}\n                </div>\n              </div>\n              <div className=\"bg-gray-50 p-3 rounded-lg\">\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-sm text-gray-600\">Crop Height</span>\n                  <span\n                    className={`font-bold ${getCropHeightColor(\n                      record.crop_height\n                    )}`}\n                  >\n                    {formatHeight(record.crop_height)}\n                  </span>\n                </div>\n              </div>\n              <div className=\"bg-gray-50 p-3 rounded-lg\">\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-sm text-gray-600\">Zn Applied</span>\n                  {renderYesNoStatus(record.zn_applied)}\n                </div>\n              </div>\n              <div className=\"bg-gray-50 p-3 rounded-lg\">\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-sm text-gray-600\">2nd Irrigation</span>\n                  {renderYesNoStatus(record.fertilizers_applied_2nd_irrigation)}\n                </div>\n              </div>\n            </div>\n\n            {/* Pest Control Summary */}\n            {(record.aphid_control || record.rust_management) && (\n              <div className=\"mt-4 p-3 bg-amber-50 rounded-lg border border-amber-200\">\n                <h4 className=\"text-sm font-medium text-amber-800 mb-2 flex items-center gap-1\">\n                  <Bug className=\"h-4 w-4\" />\n                  Pest Control\n                </h4>\n                <div className=\"space-y-1\">\n                  {record.aphid_control && (\n                    <div className=\"flex justify-between text-sm\">\n                      <span className=\"text-gray-600\">Aphid Control:</span>\n                      <span className=\"font-medium\">\n                        {record.aphid_control}\n                      </span>\n                    </div>\n                  )}\n                  {record.rust_management && (\n                    <div className=\"flex justify-between text-sm\">\n                      <span className=\"text-gray-600\">Rust Management:</span>\n                      <span className=\"font-medium\">\n                        {record.rust_management}\n                      </span>\n                    </div>\n                  )}\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Action Button */}\n          <Button\n            onClick={() => {\n              setSelectedRecord(record);\n              setIsDetailModalOpen(true);\n            }}\n            variant=\"outline\"\n            className=\"w-full mt-4 gap-2 group-hover:border-primary\"\n          >\n            <Eye className=\"h-4 w-4\" />\n            View Full Details\n            <ChevronRight className=\"h-4 w-4\" />\n          </Button>\n        </div>\n\n        {/* Footer */}\n        <CardFooter className=\"border-t pt-4 flex justify-between text-sm text-gray-500\">\n          <div className=\"flex items-center gap-1\">\n            <Calendar className=\"h-3 w-3\" />\n            <span>{formatDate(record.created_at)}</span>\n          </div>\n        </CardFooter>\n      </CardContent>\n    </Card>\n  );\n\n  // Function to render detail modal content\n  const renderDetailModal = () => {\n    if (!selectedRecord) return null;\n\n    return (\n      <>\n        <DialogHeader>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <DialogTitle className=\"text-2xl flex items-center gap-2\">\n                <Sprout className=\"h-6 w-6 text-primary\" />\n                {selectedRecord.crop_name} - Record #{selectedRecord.id}\n              </DialogTitle>\n              <DialogDescription>\n                Complete growth & tillering data{\" \"}\n                {selectedRecord.farm && `• Farm ${selectedRecord.farm}`}\n              </DialogDescription>\n            </div>\n            <Badge className={getCropHealthColor(selectedRecord.crop_health)}>\n              {selectedRecord.crop_health}\n            </Badge>\n          </div>\n        </DialogHeader>\n\n        <div className=\"space-y-6\">\n          {/* Basic Information */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Wheat className=\"h-5 w-5 text-green-600\" />\n                  Crop Status\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <Label className=\"text-sm text-muted-foreground\">\n                      Crop Name\n                    </Label>\n                    <p className=\"font-medium\">{selectedRecord.crop_name}</p>\n                  </div>\n                  <div>\n                    <Label className=\"text-sm text-muted-foreground\">\n                      Crop Health\n                    </Label>\n                    <Badge\n                      className={getCropHealthColor(selectedRecord.crop_health)}\n                    >\n                      {selectedRecord.crop_health}\n                    </Badge>\n                  </div>\n                  <div>\n                    <Label className=\"text-sm text-muted-foreground\">\n                      Crop Height\n                    </Label>\n                    <p\n                      className={`font-bold ${getCropHeightColor(\n                        selectedRecord.crop_height\n                      )}`}\n                    >\n                      {formatHeight(selectedRecord.crop_height)}\n                    </p>\n                  </div>\n                  <div>\n                    <Label className=\"text-sm text-muted-foreground\">\n                      Yellowing Observed\n                    </Label>\n                    <Badge\n                      className={getYellowingStatusColor(\n                        selectedRecord.yellowing_observed\n                      )}\n                    >\n                      {selectedRecord.yellowing_observed}\n                    </Badge>\n                  </div>\n                </div>\n\n                <Separator />\n\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm\">Weeds Present</span>\n                    {renderBooleanStatus(selectedRecord.weeds_present)}\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm\">Post Emergent Applied</span>\n                    {renderBooleanStatus(selectedRecord.post_emergent_applied)}\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Package className=\"h-5 w-5 text-amber-600\" />\n                  Fertilizers & Stimulants\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div>\n                  <Label className=\"font-medium text-gray-700 mb-2\">\n                    Fertilizer Type\n                  </Label>\n                  <div className=\"bg-gray-50 p-3 rounded-lg\">\n                    <div className=\"flex justify-between items-center\">\n                      <span className=\"font-medium capitalize\">\n                        {selectedRecord.fertilizer_type}\n                      </span>\n                      <Badge variant=\"outline\">\n                        2nd Irrigation:{\" \"}\n                        {selectedRecord.fertilizers_applied_2nd_irrigation}\n                      </Badge>\n                    </div>\n                  </div>\n                </div>\n\n                <div>\n                  <Label className=\"font-medium text-gray-700 mb-2\">\n                    Zinc Application\n                  </Label>\n                  <div className=\"bg-blue-50 p-3 rounded-lg\">\n                    <div className=\"flex justify-between items-center\">\n                      <span className=\"font-medium\">\n                        {selectedRecord.zn_product}\n                      </span>\n                      <Badge\n                        className={getBioStimulantStatusColor(\n                          selectedRecord.zn_applied\n                        )}\n                      >\n                        {selectedRecord.zn_applied}\n                      </Badge>\n                    </div>\n                  </div>\n                </div>\n\n                <div>\n                  <Label className=\"font-medium text-gray-700 mb-2\">\n                    Bio Stimulant\n                  </Label>\n                  <div className=\"bg-green-50 p-3 rounded-lg\">\n                    <div className=\"flex justify-between items-center\">\n                      <div>\n                        <span className=\"font-medium\">\n                          {selectedRecord.bio_stimulant_product}\n                        </span>\n                        <p className=\"text-xs text-gray-600 mt-1\">\n                          Applied: {selectedRecord.bio_stimulant_applied}\n                        </p>\n                        {/* Show Yellowing Bio Stimulant if yellowing is observed and has value */}\n                        {selectedRecord.yellowing_observed === \"Yes\" &&\n                          selectedRecord.yellowing_bio_stimulant && (\n                            <div className=\"mt-2 p-2 bg-red-100 rounded border border-red-200\">\n                              <p className=\"text-sm font-medium text-red-700\">\n                                Yellowing Treatment:\n                              </p>\n                              <p className=\"text-sm text-red-600 mt-1\">\n                                {selectedRecord.yellowing_bio_stimulant}\n                              </p>\n                            </div>\n                          )}\n                      </div>\n                      <Badge\n                        className={getBioStimulantStatusColor(\n                          selectedRecord.bio_stimulant_applied\n                        )}\n                      >\n                        {selectedRecord.bio_stimulant_applied}\n                      </Badge>\n                    </div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n\n          {/* Management & Control */}\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Bug className=\"h-5 w-5 text-red-600\" />\n                Management & Control\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-4\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <Label className=\"font-medium text-gray-700 mb-2\">\n                      Plant Growth Regulator\n                    </Label>\n                    <div className=\"bg-purple-50 p-3 rounded-lg\">\n                      <p className=\"font-medium\">\n                        {selectedRecord.plant_growth_regulator}\n                      </p>\n                    </div>\n                  </div>\n                  <div>\n                    <Label className=\"font-medium text-gray-700 mb-2\">\n                      Irrigation & Fertilizers\n                    </Label>\n                    <div className=\"bg-blue-50 p-3 rounded-lg\">\n                      <p className=\"font-medium\">\n                        {selectedRecord.irrigation_3rd_fertilizers}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <Label className=\"font-medium text-gray-700 mb-2\">\n                      Rust Management\n                    </Label>\n                    <div className=\"bg-orange-50 p-3 rounded-lg\">\n                      <p className=\"font-medium capitalize\">\n                        {selectedRecord.rust_management}\n                      </p>\n                    </div>\n                  </div>\n                  <div>\n                    <Label className=\"font-medium text-gray-700 mb-2\">\n                      Aphid Control\n                    </Label>\n                    <div className=\"bg-red-50 p-3 rounded-lg\">\n                      <p className=\"font-medium\">\n                        {selectedRecord.aphid_control}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Post Emergent Details */}\n          {selectedRecord.post_emergent_applied && (\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <AlertCircle className=\"h-5 w-5 text-amber-600\" />\n                  Post Emergent Details\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-3\">\n                  <div>\n                    <Label className=\"font-medium text-gray-700 mb-2\">\n                      Product\n                    </Label>\n                    <div className=\"bg-gray-50 p-3 rounded-lg\">\n                      <p className=\"font-medium\">\n                        {selectedRecord.post_emergent_product ||\n                          \"Not specified\"}\n                      </p>\n                    </div>\n                  </div>\n                  {selectedRecord.post_emergent_other_text && (\n                    <div>\n                      <Label className=\"font-medium text-gray-700 mb-2\">\n                        Additional Notes\n                      </Label>\n                      <div className=\"bg-blue-50 p-3 rounded-lg\">\n                        <p className=\"text-gray-700\">\n                          {selectedRecord.post_emergent_other_text}\n                        </p>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          <DialogFooter>\n            <Button\n              variant=\"outline\"\n              onClick={() => setIsDetailModalOpen(false)}\n            >\n              Close\n            </Button>\n            <Button>Export Report</Button>\n          </DialogFooter>\n        </div>\n      </>\n    );\n  };\n\n  if (loading) {\n    return (\n      <div className=\"space-y-8\">\n        {/* Header Skeleton */}\n        <div className=\"flex justify-between items-center\">\n          <div>\n            <Skeleton className=\"h-10 w-48\" />\n            <Skeleton className=\"h-4 w-64 mt-2\" />\n          </div>\n          <Skeleton className=\"h-10 w-32\" />\n        </div>\n\n        {/* Stats Skeleton */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          {[1, 2, 3, 4].map((i) => (\n            <Skeleton key={i} className=\"h-32 rounded-lg\" />\n          ))}\n        </div>\n\n        {/* Cards Skeleton */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {[1, 2, 3, 4, 5, 6].map((i) => (\n            <Skeleton key={i} className=\"h-64 rounded-lg\" />\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <Card>\n        <CardContent className=\"pt-6\">\n          <div className=\"text-center py-8 text-red-500\">\n            <AlertCircle className=\"h-12 w-12 mx-auto mb-4\" />\n            <p className=\"text-lg font-semibold\">Error Loading Data</p>\n            <p className=\"text-sm mt-2\">{error}</p>\n            <Button onClick={fetchGrowthData} className=\"mt-4\">\n              Retry\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Header Section */}\n      <div className=\"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4\">\n        <div>\n          <h1 className=\"text-3xl font-bold tracking-tight\">\n            Growth & Tillering Stage\n          </h1>\n          <p className=\"text-muted-foreground mt-2\">\n            Monitor crop development, fertilizer applications, and pest\n            management\n          </p>\n        </div>\n        <div className=\"flex items-center gap-3\">\n          <Button variant=\"outline\" size=\"sm\">\n            <Download className=\"h-4 w-4 mr-2\" />\n            Export\n          </Button>\n          <Button size=\"sm\" onClick={fetchGrowthData}>\n            <BarChart3 className=\"h-4 w-4 mr-2\" />\n            Refresh\n          </Button>\n        </div>\n      </div>\n\n      {/* Stats Overview */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        <Card className=\"bg-gradient-to-br from-green-50 to-green-100 border-green-200\">\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-green-700\">\n                  Total Records\n                </p>\n                <h3 className=\"text-2xl font-bold text-green-900 mt-2\">\n                  {totalRecords}\n                </h3>\n              </div>\n              <div className=\"h-12 w-12 rounded-full bg-green-200 flex items-center justify-center\">\n                <Sprout className=\"h-6 w-6 text-green-700\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200\">\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-blue-700\">\n                  Healthy Crops\n                </p>\n                <h3 className=\"text-2xl font-bold text-blue-900 mt-2\">\n                  {healthyCrops}\n                </h3>\n              </div>\n              <div className=\"h-12 w-12 rounded-full bg-blue-200 flex items-center justify-center\">\n                <CheckCircle className=\"h-6 w-6 text-blue-700\" />\n              </div>\n            </div>\n            <p className=\"text-xs text-blue-600 mt-2\">\n              {totalRecords > 0\n                ? ((healthyCrops / totalRecords) * 100).toFixed(1)\n                : 0}\n              % of total\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card className=\"bg-gradient-to-br from-red-50 to-red-100 border-red-200\">\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-red-700\">\n                  Weeds Present\n                </p>\n                <h3 className=\"text-2xl font-bold text-red-900 mt-2\">\n                  {weedsPresentCount}\n                </h3>\n              </div>\n              <div className=\"h-12 w-12 rounded-full bg-red-200 flex items-center justify-center\">\n                <Leaf className=\"h-6 w-6 text-red-700\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"bg-gradient-to-br from-amber-50 to-amber-100 border-amber-200\">\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-amber-700\">\n                  Yellowing Observed\n                </p>\n                <h3 className=\"text-2xl font-bold text-amber-900 mt-2\">\n                  {yellowingObservedCount}\n                </h3>\n              </div>\n              <div className=\"h-12 w-12 rounded-full bg-amber-200 flex items-center justify-center\">\n                <AlertCircle className=\"h-6 w-6 text-amber-700\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Filters and Controls */}\n      <Card>\n        <CardContent className=\"p-6\">\n          <div className=\"flex flex-col lg:flex-row gap-4 items-center\">\n            <div className=\"flex-1 w-full lg:w-auto\">\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4\" />\n                <Input\n                  placeholder=\"Search by crop name, fertilizer type, or bio stimulant...\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  className=\"pl-10 w-full lg:w-[400px]\"\n                />\n              </div>\n            </div>\n\n            <div className=\"flex flex-wrap items-center gap-3\">\n              <div className=\"flex items-center gap-2\">\n                <Filter className=\"h-4 w-4 text-muted-foreground\" />\n                <Select value={filterField} onValueChange={setFilterField}>\n                  <SelectTrigger className=\"w-[180px]\">\n                    <SelectValue placeholder=\"Filter by crop\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">All Crops</SelectItem>\n                    {uniqueCrops.map((crop) => (\n                      <SelectItem key={crop.id} value={crop.id}>\n                        {crop.name}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <Tabs\n                value={activeTab}\n                onValueChange={setActiveTab}\n                className=\"w-auto\"\n              >\n                <TabsList>\n                  <TabsTrigger value=\"all\">All</TabsTrigger>\n                  <TabsTrigger value=\"issues\">With Issues</TabsTrigger>\n                  <TabsTrigger value=\"healthy\">Healthy Only</TabsTrigger>\n                  <TabsTrigger value=\"yellowing\">\n                    Yellowing Observed\n                  </TabsTrigger>\n                </TabsList>\n              </Tabs>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Results Section */}\n      <div>\n        <div className=\"flex justify-between items-center mb-4\">\n          <h2 className=\"text-xl font-semibold\">\n            Growth & Tillering Records\n            <span className=\"text-muted-foreground font-normal ml-2\">\n              ({filteredData.length}{\" \"}\n              {filteredData.length === 1 ? \"record\" : \"records\"})\n            </span>\n          </h2>\n          <p className=\"text-sm text-muted-foreground\">Sorted by latest date</p>\n        </div>\n\n        {filteredData.length === 0 ? (\n          <Card>\n            <CardContent className=\"py-12 text-center\">\n              <Sprout className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n              <h3 className=\"text-lg font-semibold text-gray-700 mb-2\">\n                No growth & tillering data found\n              </h3>\n              <p className=\"text-gray-500 max-w-sm mx-auto\">\n                {searchQuery\n                  ? \"No records match your search criteria. Try different keywords.\"\n                  : \"No growth & tillering data has been recorded yet.\"}\n              </p>\n            </CardContent>\n          </Card>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {filteredData.map(renderCard)}\n          </div>\n        )}\n      </div>\n\n      {/* Detail Modal */}\n      <Dialog open={isDetailModalOpen} onOpenChange={setIsDetailModalOpen}>\n        <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto\">\n          {renderDetailModal()}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5279, "column": 0}, "map": {"version":3,"sources":["file:///D:/Nextjs/landdirectorateDashboardVersion1-main/landdirectorateDashboardVersion1-main/components/stage-forms/rosette-form.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport {\n  Card,\n  CardContent,\n  CardHeader,\n  CardTitle,\n  CardDescription,\n  CardFooter,\n} from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Label } from \"@/components/ui/label\";\nimport { Separator } from \"@/components/ui/separator\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n  DialogFooter,\n} from \"@/components/ui/dialog\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport {\n  Wheat,\n  Thermometer,\n  Droplets,\n  Scale,\n  AlertCircle,\n  Package,\n  Bug,\n  Sprout,\n  CheckCircle,\n  XCircle,\n  ChevronRight,\n  Eye,\n  Filter,\n  Search,\n  Download,\n  BarChart3,\n  Calendar,\n  TrendingUp,\n} from \"lucide-react\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\n\ninterface RosetteData {\n  id: number;\n  crop_name: string;\n  weeds_observed: boolean;\n  post_emergent_applied: boolean;\n  post_emergent_product: string;\n  post_emergent_other_text: string;\n  fertilizers_applied: boolean;\n  fertilizer_type: string | null; // Can be null\n  fertilizer_quantity_bags: string | null; // Can be null\n  sulphur_applied: boolean;\n  sulphur_product: string;\n  sulphur_other_text: string;\n  crop_under_stress: boolean;\n  amino_applied: boolean;\n  amino_product: string;\n  amino_other_text: string;\n  aphid_attack: boolean;\n  aphid_pesticide: string;\n  aphid_other_text: string;\n  crop_health: string;\n  crop_height: string;\n  recommendation_irrigation_fertilizers: string; // Actual product name\n  recommendation_sulphur_kumulus: string; // Actual product name\n  recommendation_white_rust: string; // Actual product name\n  recommendation_aphid_ulala: string; // Actual product name\n  created_at: string;\n  field: number;\n  field_name: string;\n}\n\nexport function RosetteForm() {\n  const [rosetteData, setRosetteData] = useState<RosetteData[]>([]);\n  const [filteredData, setFilteredData] = useState<RosetteData[]>([]);\n  const [selectedRecord, setSelectedRecord] = useState<RosetteData | null>(\n    null\n  );\n  const [isDetailModalOpen, setIsDetailModalOpen] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [selectedFarm, setSelectedFarm] = useState<string>(\"all\");\n  const [activeTab, setActiveTab] = useState(\"all\");\n\n  // Get unique fields for filter\n  const uniqueFarms = Array.from(\n    new Set(rosetteData.map((record) => record.field_name))\n  ).sort((a, b) => a.localeCompare(b));\n\n  // Stats calculation\n  const totalRecords = rosetteData.length;\n  const healthyCrops = rosetteData.filter(\n    (record) => record.crop_health === \"healthy\"\n  ).length;\n  const aphidAttacks = rosetteData.filter(\n    (record) => record.aphid_attack\n  ).length;\n  const cropStress = rosetteData.filter(\n    (record) => record.crop_under_stress\n  ).length;\n  const weedsObserved = rosetteData.filter(\n    (record) => record.weeds_observed\n  ).length;\n\n  useEffect(() => {\n    fetchRosetteData();\n  }, []);\n\n  // Filter data based on search, field, and tab\n  useEffect(() => {\n    let results = [...rosetteData];\n\n    // Apply search filter\n    if (searchQuery.trim() !== \"\") {\n      const query = searchQuery.toLowerCase();\n      results = results.filter(\n        (record) =>\n          record.crop_name.toLowerCase().includes(query) ||\n          record.field_name.toLowerCase().includes(query) ||\n          (record.fertilizer_type &&\n            record.fertilizer_type.toLowerCase().includes(query)) ||\n          record.crop_health.toLowerCase().includes(query)\n      );\n    }\n\n    // Apply field filter\n    if (selectedFarm !== \"all\") {\n      results = results.filter((record) => record.field_name === selectedFarm);\n    }\n\n    // Apply tab filter\n    if (activeTab === \"issues\") {\n      results = results.filter(\n        (record) =>\n          record.aphid_attack ||\n          record.crop_under_stress ||\n          record.weeds_observed\n      );\n    } else if (activeTab === \"healthy\") {\n      results = results.filter((record) => record.crop_health === \"healthy\");\n    } else if (activeTab === \"aphid\") {\n      results = results.filter((record) => record.aphid_attack);\n    } else if (activeTab === \"stress\") {\n      results = results.filter((record) => record.crop_under_stress);\n    } else if (activeTab === \"weeds\") {\n      results = results.filter((record) => record.weeds_observed);\n    } else if (activeTab === \"fair\") {\n      results = results.filter((record) => record.crop_health === \"fair\");\n    } else if (activeTab === \"stressed\") {\n      results = results.filter((record) => record.crop_health === \"stressed\");\n    }\n\n    setFilteredData(results);\n  }, [searchQuery, selectedFarm, activeTab, rosetteData]);\n\n  const fetchRosetteData = async () => {\n    try {\n      setLoading(true);\n      const token =\n        typeof window !== \"undefined\"\n          ? localStorage.getItem(\"authToken\")\n          : null;\n\n      if (!token) {\n        setError(\"No authentication token found\");\n        return;\n      }\n\n      const response = await fetch(\n        \"https://rda.ngrok.app/api/rosette-stage/\",\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n            \"ngrok-skip-browser-warning\": \"true\",\n          },\n        }\n      );\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const data = await response.json();\n      console.log(\"Fetched rosette data:\", data);\n      setRosetteData(data.results || []);\n      setFilteredData(data.results || []);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : \"Failed to fetch data\");\n      console.error(\"Error fetching rosette data:\", err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getCropHealthColor = (health: string) => {\n    switch (health.toLowerCase()) {\n      case \"healthy\":\n        return \"bg-green-100 text-green-800\";\n      case \"fair\":\n        return \"bg-yellow-100 text-yellow-800\";\n      case \"stressed\":\n        return \"bg-red-100 text-red-800\";\n      default:\n        return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  const getCropHealthLabel = (health: string) => {\n    switch (health.toLowerCase()) {\n      case \"healthy\":\n        return \"Healthy\";\n      case \"fair\":\n        return \"Fair\";\n      case \"stressed\":\n        return \"Stressed\";\n      default:\n        return health;\n    }\n  };\n\n  const getCropHeightLabel = (height: string) => {\n    switch (height.toLowerCase()) {\n      case \"less_than_3_inches\":\n        return \"< 3 inches\";\n      case \"3_to_6_inches\":\n        return \"3-6 inches\";\n      case \"greater_than_6_inches\":\n        return \"> 6 inches\";\n      default:\n        return height.replace(/_/g, \" \");\n    }\n  };\n\n  const getCropHeightColor = (height: string) => {\n    switch (height.toLowerCase()) {\n      case \"greater_than_6_inches\":\n        return \"text-green-600\";\n      case \"3_to_6_inches\":\n        return \"text-amber-600\";\n      case \"less_than_3_inches\":\n        return \"text-red-600\";\n      default:\n        return \"text-gray-600\";\n    }\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString(\"en-US\", {\n      month: \"short\",\n      day: \"numeric\",\n      year: \"numeric\",\n    });\n  };\n\n  const openRecordDetails = (record: RosetteData) => {\n    setSelectedRecord(record);\n    setIsDetailModalOpen(true);\n  };\n\n  const renderBooleanStatus = (value: boolean) => (\n    <div className=\"flex items-center gap-1\">\n      {value ? (\n        <>\n          <CheckCircle className=\"h-4 w-4 text-green-500\" />\n          <span className=\"text-green-600 font-medium\">Yes</span>\n        </>\n      ) : (\n        <>\n          <XCircle className=\"h-4 w-4 text-gray-400\" />\n          <span className=\"text-gray-500\">No</span>\n        </>\n      )}\n    </div>\n  );\n\n  // Helper to check if recommendation has a value\n  const hasRecommendation = (recommendation: string) => {\n    return recommendation && recommendation.trim() !== \"\";\n  };\n\n  if (loading) {\n    return (\n      <div className=\"space-y-8\">\n        {/* Header Skeleton */}\n        <div className=\"flex justify-between items-center\">\n          <div>\n            <Skeleton className=\"h-10 w-48\" />\n            <Skeleton className=\"h-4 w-64 mt-2\" />\n          </div>\n          <Skeleton className=\"h-10 w-32\" />\n        </div>\n\n        {/* Stats Skeleton */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          {[1, 2, 3, 4].map((i) => (\n            <Skeleton key={i} className=\"h-32 rounded-lg\" />\n          ))}\n        </div>\n\n        {/* Cards Skeleton */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {[1, 2, 3, 4, 5, 6].map((i) => (\n            <Skeleton key={i} className=\"h-64 rounded-lg\" />\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <Card>\n        <CardContent className=\"pt-6\">\n          <div className=\"text-center py-8 text-red-500\">\n            <AlertCircle className=\"h-12 w-12 mx-auto mb-4\" />\n            <p className=\"text-lg font-semibold\">Error Loading Data</p>\n            <p className=\"text-sm mt-2\">{error}</p>\n            <Button onClick={fetchRosetteData} className=\"mt-4\">\n              Retry\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Header Section */}\n      <div className=\"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4\">\n        <div>\n          <h1 className=\"text-3xl font-bold tracking-tight\">\n            Rosette Stage Data\n          </h1>\n          <p className=\"text-muted-foreground mt-2\">\n            Monitor crop health, fertilizer applications, and pest control by\n            field\n          </p>\n        </div>\n        <div className=\"flex items-center gap-3\">\n          <Button variant=\"outline\" size=\"sm\">\n            <Download className=\"h-4 w-4 mr-2\" />\n            Export\n          </Button>\n          <Button size=\"sm\" onClick={fetchRosetteData}>\n            <BarChart3 className=\"h-4 w-4 mr-2\" />\n            Refresh\n          </Button>\n        </div>\n      </div>\n\n      {/* Stats Overview */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        <Card className=\"bg-gradient-to-br from-green-50 to-green-100 border-green-200\">\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-green-700\">\n                  Total Records\n                </p>\n                <h3 className=\"text-2xl font-bold text-green-900 mt-2\">\n                  {totalRecords}\n                </h3>\n              </div>\n              <div className=\"h-12 w-12 rounded-full bg-green-200 flex items-center justify-center\">\n                <Wheat className=\"h-6 w-6 text-green-700\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200\">\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-blue-700\">\n                  Healthy Crops\n                </p>\n                <h3 className=\"text-2xl font-bold text-blue-900 mt-2\">\n                  {healthyCrops}\n                </h3>\n              </div>\n              <div className=\"h-12 w-12 rounded-full bg-blue-200 flex items-center justify-center\">\n                <CheckCircle className=\"h-6 w-6 text-blue-700\" />\n              </div>\n            </div>\n            <p className=\"text-xs text-blue-600 mt-2\">\n              {totalRecords > 0\n                ? ((healthyCrops / totalRecords) * 100).toFixed(1)\n                : 0}\n              % of total\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card className=\"bg-gradient-to-br from-red-50 to-red-100 border-red-200\">\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-red-700\">\n                  Aphid Attacks\n                </p>\n                <h3 className=\"text-2xl font-bold text-red-900 mt-2\">\n                  {aphidAttacks}\n                </h3>\n              </div>\n              <div className=\"h-12 w-12 rounded-full bg-red-200 flex items-center justify-center\">\n                <Bug className=\"h-6 w-6 text-red-700\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"bg-gradient-to-br from-amber-50 to-amber-100 border-amber-200\">\n          <CardContent className=\"pt-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-amber-700\">\n                  Weeds Observed\n                </p>\n                <h3 className=\"text-2xl font-bold text-amber-900 mt-2\">\n                  {weedsObserved}\n                </h3>\n              </div>\n              <div className=\"h-12 w-12 rounded-full bg-amber-200 flex items-center justify-center\">\n                <AlertCircle className=\"h-6 w-6 text-amber-700\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Filters and Controls */}\n      <Card>\n        <CardContent className=\"p-6\">\n          <div className=\"flex flex-col lg:flex-row gap-4 items-center\">\n            <div className=\"flex-1 w-full lg:w-auto\">\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4\" />\n                <Input\n                  placeholder=\"Search by crop, fertilizer, health, or field number...\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  className=\"pl-10 w-full lg:w-[400px]\"\n                />\n              </div>\n            </div>\n\n            <div className=\"flex flex-wrap items-center gap-3\">\n              {/* Field Filter */}\n              <div className=\"flex items-center gap-2\">\n                <Filter className=\"h-4 w-4 text-muted-foreground\" />\n                <Select value={selectedFarm} onValueChange={setSelectedFarm}>\n                  <SelectTrigger className=\"w-[180px]\">\n                    <SelectValue placeholder=\"Select Field\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">All Fields</SelectItem>\n                    {uniqueFarms.map((farm) => (\n                      <SelectItem\n                        key={farm}\n                        value={farm}\n                        className=\"capitalize\"\n                      >\n                        {farm}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              {/* Tab Filters */}\n              <Tabs\n                value={activeTab}\n                onValueChange={setActiveTab}\n                className=\"w-auto\"\n              >\n                <TabsList>\n                  <TabsTrigger value=\"all\">All</TabsTrigger>\n                  <TabsTrigger value=\"issues\">With Issues</TabsTrigger>\n                  <TabsTrigger value=\"healthy\">Healthy</TabsTrigger>\n                  <TabsTrigger value=\"fair\">Fair</TabsTrigger>\n                  <TabsTrigger value=\"stressed\">Stressed</TabsTrigger>\n                  <TabsTrigger value=\"aphid\">Aphid Attack</TabsTrigger>\n                  <TabsTrigger value=\"weeds\">Weeds</TabsTrigger>\n                </TabsList>\n              </Tabs>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Results Section */}\n      <div>\n        <div className=\"flex justify-between items-center mb-4\">\n          <h2 className=\"text-xl font-semibold\">\n            Rosette Stage Records\n            <span className=\"text-muted-foreground font-normal ml-2\">\n              ({filteredData.length}{\" \"}\n              {filteredData.length === 1 ? \"record\" : \"records\"})\n            </span>\n          </h2>\n          <div className=\"text-sm text-muted-foreground\">\n            {selectedFarm !== \"all\" && (\n              <Badge variant=\"outline\" className=\"mr-2 capitalize\">\n                {selectedFarm}\n              </Badge>\n            )}\n            Sorted by latest date\n          </div>\n        </div>\n\n        {filteredData.length === 0 ? (\n          <Card>\n            <CardContent className=\"py-12 text-center\">\n              <Sprout className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n              <h3 className=\"text-lg font-semibold text-gray-700 mb-2\">\n                No rosette data found\n              </h3>\n              <p className=\"text-gray-500 max-w-sm mx-auto\">\n                {searchQuery\n                  ? \"No records match your search criteria. Try different keywords.\"\n                  : selectedFarm !== \"all\"\n                  ? `No data found for ${selectedFarm}`\n                  : \"No rosette stage data has been recorded yet.\"}\n              </p>\n            </CardContent>\n          </Card>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {filteredData.map((record) => (\n              <Card\n                key={record.id}\n                className=\"group hover:shadow-lg transition-all duration-300 hover:border-primary/30 overflow-hidden\"\n              >\n                <CardContent className=\"p-0\">\n                  {/* Header Section */}\n                  <div className=\"bg-gradient-to-r from-blue-50 to-blue-100 p-5\">\n                    <div className=\"flex justify-between items-start\">\n                      <div>\n                        <h3 className=\"text-xl font-bold text-gray-900 line-clamp-1 capitalize\">\n                          {record.crop_name}\n                        </h3>\n                        <p className=\"text-sm text-gray-600 mt-1\">\n                          Record #{record.id} • {record.field_name}\n                        </p>\n                      </div>\n                      <div className=\"flex flex-col items-end gap-1\">\n                        <Badge\n                          variant=\"outline\"\n                          className=\"bg-white/90 capitalize\"\n                        >\n                          {record.field_name}\n                        </Badge>\n\n                        <Badge\n                          className={getCropHealthColor(record.crop_health)}\n                        >\n                          {getCropHealthLabel(record.crop_health)}\n                        </Badge>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Content */}\n                  <div className=\"p-5\">\n                    <div className=\"space-y-4\">\n                      {/* Crop Height */}\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center gap-2 text-gray-600\">\n                          <Scale className=\"h-4 w-4\" />\n                          <span className=\"text-sm\">Crop Height</span>\n                        </div>\n                        <span\n                          className={`font-bold ${getCropHeightColor(\n                            record.crop_height\n                          )}`}\n                        >\n                          {getCropHeightLabel(record.crop_height)}\n                        </span>\n                      </div>\n\n                      {/* Fertilizer Type */}\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center gap-2 text-gray-600\">\n                          <Package className=\"h-4 w-4\" />\n                          <span className=\"text-sm\">Fertilizer</span>\n                        </div>\n                        <div className=\"text-right\">\n                          <span className=\"font-medium\">\n                            {record.fertilizer_type || \"None\"}\n                          </span>\n                          {record.fertilizer_quantity_bags && (\n                            <p className=\"text-xs text-gray-500\">\n                              {record.fertilizer_quantity_bags} bags\n                            </p>\n                          )}\n                        </div>\n                      </div>\n\n                      {/* Quick Status Indicators */}\n                      <div className=\"grid grid-cols-2 gap-3\">\n                        <div className=\"bg-gray-50 p-3 rounded-lg\">\n                          <div className=\"flex items-center justify-between\">\n                            <span className=\"text-sm text-gray-600\">\n                              Weeds Observed\n                            </span>\n                            {renderBooleanStatus(record.weeds_observed)}\n                          </div>\n                        </div>\n                        <div className=\"bg-gray-50 p-3 rounded-lg\">\n                          <div className=\"flex items-center justify-between\">\n                            <span className=\"text-sm text-gray-600\">\n                              Aphid Attack\n                            </span>\n                            {renderBooleanStatus(record.aphid_attack)}\n                          </div>\n                        </div>\n                        <div className=\"bg-gray-50 p-3 rounded-lg\">\n                          <div className=\"flex items-center justify-between\">\n                            <span className=\"text-sm text-gray-600\">\n                              Crop Stress\n                            </span>\n                            {renderBooleanStatus(record.crop_under_stress)}\n                          </div>\n                        </div>\n                        <div className=\"bg-gray-50 p-3 rounded-lg\">\n                          <div className=\"flex items-center justify-between\">\n                            <span className=\"text-sm text-gray-600\">\n                              Fertilizers Applied\n                            </span>\n                            {renderBooleanStatus(record.fertilizers_applied)}\n                          </div>\n                        </div>\n                      </div>\n\n                      {/* Recommendations Section in the card */}\n                      <div className=\"mt-4 p-3 bg-amber-50 rounded-lg border border-amber-200\">\n                        <h4 className=\"text-sm font-medium text-amber-800 mb-2 flex items-center gap-1\">\n                          <AlertCircle className=\"h-4 w-4\" />\n                          Key Recommendations\n                        </h4>\n                        <div className=\"space-y-2\">\n                          {hasRecommendation(\n                            record.recommendation_irrigation_fertilizers\n                          ) && (\n                            <div className=\"flex items-center gap-2\">\n                              <div className=\"w-2 h-2 rounded-full bg-green-500 flex-shrink-0\"></div>\n                              <div className=\"text-xs\">\n                                <span className=\"font-medium text-gray-700\">\n                                  Fertilizer:\n                                </span>\n                                <span className=\"text-gray-600 ml-1\">\n                                  {record.recommendation_irrigation_fertilizers}\n                                </span>\n                              </div>\n                            </div>\n                          )}\n                          {hasRecommendation(\n                            record.recommendation_sulphur_kumulus\n                          ) && (\n                            <div className=\"flex items-center gap-2\">\n                              <div className=\"w-2 h-2 rounded-full bg-yellow-500 flex-shrink-0\"></div>\n                              <div className=\"text-xs\">\n                                <span className=\"font-medium text-gray-700\">\n                                  Sulphur:\n                                </span>\n                                <span className=\"text-gray-600 ml-1\">\n                                  {record.recommendation_sulphur_kumulus}\n                                </span>\n                              </div>\n                            </div>\n                          )}\n                          {hasRecommendation(\n                            record.recommendation_white_rust\n                          ) && (\n                            <div className=\"flex items-center gap-2\">\n                              <div className=\"w-2 h-2 rounded-full bg-blue-500 flex-shrink-0\"></div>\n                              <div className=\"text-xs\">\n                                <span className=\"font-medium text-gray-700\">\n                                  White Rust:\n                                </span>\n                                <span className=\"text-gray-600 ml-1\">\n                                  {record.recommendation_white_rust}\n                                </span>\n                              </div>\n                            </div>\n                          )}\n                          {hasRecommendation(\n                            record.recommendation_aphid_ulala\n                          ) && (\n                            <div className=\"flex items-center gap-2\">\n                              <div className=\"w-2 h-2 rounded-full bg-red-500 flex-shrink-0\"></div>\n                              <div className=\"text-xs\">\n                                <span className=\"font-medium text-gray-700\">\n                                  Aphid Control:\n                                </span>\n                                <span className=\"text-gray-600 ml-1\">\n                                  {record.recommendation_aphid_ulala}\n                                </span>\n                              </div>\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n\n                    {/* Action Button */}\n                    <Button\n                      onClick={() => openRecordDetails(record)}\n                      variant=\"outline\"\n                      className=\"w-full mt-4 gap-2 group-hover:border-primary\"\n                    >\n                      <Eye className=\"h-4 w-4\" />\n                      View Field Details\n                      <ChevronRight className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n\n                  {/* Footer */}\n                  <CardFooter className=\"border-t pt-4 flex justify-between text-sm text-gray-500\">\n                    <div className=\"flex items-center gap-1\">\n                      <Calendar className=\"h-3 w-3\" />\n                      <span>{formatDate(record.created_at)}</span>\n                    </div>\n                  </CardFooter>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Detail Modal */}\n      <Dialog open={isDetailModalOpen} onOpenChange={setIsDetailModalOpen}>\n        <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto\">\n          {selectedRecord && (\n            <>\n              <DialogHeader>\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <DialogTitle className=\"text-2xl flex items-center gap-2\">\n                      <Wheat className=\"h-6 w-6 text-primary\" />\n                      {selectedRecord.crop_name} - {selectedRecord.field_name}\n                    </DialogTitle>\n                    <DialogDescription>\n                      Complete rosette stage data for {selectedRecord.field_name}\n                    </DialogDescription>\n                  </div>\n                  <div className=\"flex gap-2\">\n                    <Badge variant=\"outline\">\n                      <Label>Farm Name</Label>\n                      <p className=\"font-bold capitalize\">\n                        {selectedRecord.field_name}\n                      </p>\n                    </Badge>\n                    <Badge\n                      className={getCropHealthColor(selectedRecord.crop_health)}\n                    >\n                      {getCropHealthLabel(selectedRecord.crop_health)}\n                    </Badge>\n                  </div>\n                </div>\n              </DialogHeader>\n\n              <div className=\"space-y-6\">\n                {/* Basic Information */}\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <Card>\n                    <CardHeader>\n                      <CardTitle className=\"flex items-center gap-2\">\n                        <Sprout className=\"h-5 w-5 text-green-600\" />\n                        Crop Status\n                      </CardTitle>\n                    </CardHeader>\n                    <CardContent className=\"space-y-4\">\n                      <div className=\"grid grid-cols-2 gap-4\">\n                        <div>\n                          <Label className=\"text-sm text-muted-foreground\">\n                            Field Number\n                          </Label>\n                          <p className=\"font-bold text-lg\">\n                            #{selectedRecord.field}\n                          </p>\n                        </div>\n                        <div>\n                          <Label className=\"text-sm text-muted-foreground\">\n                            Crop Height\n                          </Label>\n                          <p\n                            className={`font-bold text-lg ${getCropHeightColor(\n                              selectedRecord.crop_height\n                            )}`}\n                          >\n                            {getCropHeightLabel(selectedRecord.crop_height)}\n                          </p>\n                        </div>\n                        <div>\n                          <Label className=\"text-sm text-muted-foreground\">\n                            Crop Health\n                          </Label>\n                          <Badge\n                            className={getCropHealthColor(\n                              selectedRecord.crop_health\n                            )}\n                          >\n                            {getCropHealthLabel(selectedRecord.crop_health)}\n                          </Badge>\n                        </div>\n                      </div>\n\n                      <Separator />\n\n                      <div className=\"space-y-3\">\n                        <div className=\"flex items-center justify-between\">\n                          <span className=\"text-sm\">Crop Under Stress</span>\n                          {renderBooleanStatus(\n                            selectedRecord.crop_under_stress\n                          )}\n                        </div>\n                        <div className=\"flex items-center justify-between\">\n                          <span className=\"text-sm\">Weeds Observed</span>\n                          {renderBooleanStatus(selectedRecord.weeds_observed)}\n                        </div>\n                        <div className=\"flex items-center justify-between\">\n                          <span className=\"text-sm\">Aphid Attack</span>\n                          {renderBooleanStatus(selectedRecord.aphid_attack)}\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n\n                  <Card>\n                    <CardHeader>\n                      <CardTitle className=\"flex items-center gap-2\">\n                        <Package className=\"h-5 w-5 text-amber-600\" />\n                        Field Applications\n                      </CardTitle>\n                    </CardHeader>\n                    <CardContent className=\"space-y-4\">\n                      <div>\n                        <Label className=\"text-sm text-muted-foreground\">\n                          Fertilizer\n                        </Label>\n                        <div className=\"bg-gray-50 p-3 rounded-lg mt-1\">\n                          <div className=\"flex justify-between items-center\">\n                            <span className=\"font-medium\">\n                              {selectedRecord.fertilizer_type || \"None\"}\n                            </span>\n                            {selectedRecord.fertilizer_quantity_bags && (\n                              <Badge variant=\"outline\">\n                                {selectedRecord.fertilizer_quantity_bags} bags\n                              </Badge>\n                            )}\n                          </div>\n                          <p className=\"text-xs text-gray-500 mt-1\">\n                            Applied:{\" \"}\n                            {selectedRecord.fertilizers_applied ? \"Yes\" : \"No\"}\n                          </p>\n                        </div>\n                      </div>\n\n                      {selectedRecord.post_emergent_applied && (\n                        <div>\n                          <Label className=\"text-sm text-muted-foreground\">\n                            Post Emergent\n                          </Label>\n                          <div className=\"bg-green-50 p-3 rounded-lg mt-1\">\n                            <p className=\"font-medium\">\n                              {selectedRecord.post_emergent_product}\n                            </p>\n                            {selectedRecord.post_emergent_other_text && (\n                              <p className=\"text-xs text-gray-600 mt-1\">\n                                {selectedRecord.post_emergent_other_text}\n                              </p>\n                            )}\n                          </div>\n                        </div>\n                      )}\n                    </CardContent>\n                  </Card>\n                </div>\n\n                {/* Chemicals & Treatments */}\n                <Card>\n                  <CardHeader>\n                    <CardTitle className=\"flex items-center gap-2\">\n                      <Bug className=\"h-5 w-5 text-red-600\" />\n                      Field Chemicals & Treatments\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"space-y-4\">\n                      {/* Sulphur Application */}\n                      <div>\n                        <Label className=\"font-medium text-gray-700 mb-2\">\n                          Sulphur Application\n                        </Label>\n                        <div className=\"flex items-center justify-between bg-gray-50 p-3 rounded-lg\">\n                          <div>\n                            <span className=\"font-medium\">\n                              {selectedRecord.sulphur_product || \"None\"}\n                            </span>\n                            <p className=\"text-xs text-gray-500 mt-1\">\n                              Applied:{\" \"}\n                              {selectedRecord.sulphur_applied ? \"Yes\" : \"No\"}\n                            </p>\n                          </div>\n                          {selectedRecord.sulphur_other_text && (\n                            <Badge variant=\"outline\">\n                              Note: {selectedRecord.sulphur_other_text}\n                            </Badge>\n                          )}\n                        </div>\n                      </div>\n\n                      {/* Amino Application */}\n                      <div>\n                        <Label className=\"font-medium text-gray-700 mb-2\">\n                          Amino Application\n                        </Label>\n                        <div className=\"flex items-center justify-between bg-gray-50 p-3 rounded-lg\">\n                          <div>\n                            <span className=\"font-medium\">\n                              {selectedRecord.amino_product || \"None\"}\n                            </span>\n                            <p className=\"text-xs text-gray-500 mt-1\">\n                              Applied:{\" \"}\n                              {selectedRecord.amino_applied ? \"Yes\" : \"No\"}\n                            </p>\n                          </div>\n                          {selectedRecord.amino_other_text && (\n                            <Badge variant=\"outline\">\n                              Note: {selectedRecord.amino_other_text}\n                            </Badge>\n                          )}\n                        </div>\n                      </div>\n\n                      {/* Aphid Pesticide */}\n                      {selectedRecord.aphid_attack && (\n                        <div>\n                          <Label className=\"font-medium text-gray-700 mb-2\">\n                            Aphid Control\n                          </Label>\n                          <div className=\"bg-red-50 p-3 rounded-lg\">\n                            <div className=\"flex justify-between items-center\">\n                              <span className=\"font-medium text-red-700\">\n                                {selectedRecord.aphid_pesticide}\n                              </span>\n                              <Badge variant=\"destructive\">Urgent</Badge>\n                            </div>\n                            {selectedRecord.aphid_other_text && (\n                              <p className=\"text-xs text-gray-600 mt-1\">\n                                {selectedRecord.aphid_other_text}\n                              </p>\n                            )}\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                  </CardContent>\n                </Card>\n\n                {/* Recommendations */}\n                <Card>\n                  <CardHeader>\n                    <CardTitle className=\"flex items-center gap-2\">\n                      <AlertCircle className=\"h-5 w-5 text-blue-600\" />\n                      Field Recommendations\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                      <div\n                        className={`p-3 rounded-lg ${\n                          hasRecommendation(\n                            selectedRecord.recommendation_irrigation_fertilizers\n                          )\n                            ? \"bg-green-50 border border-green-200\"\n                            : \"bg-gray-50\"\n                        }`}\n                      >\n                        <div className=\"flex items-center gap-2 mb-1\">\n                          <Package\n                            className={`h-4 w-4 ${\n                              hasRecommendation(\n                                selectedRecord.recommendation_irrigation_fertilizers\n                              )\n                                ? \"text-green-600\"\n                                : \"text-gray-400\"\n                            }`}\n                          />\n                          <span className=\"text-sm font-medium text-gray-700\">\n                            Fertilizer\n                          </span>\n                        </div>\n                        <p\n                          className={`text-sm ${\n                            hasRecommendation(\n                              selectedRecord.recommendation_irrigation_fertilizers\n                            )\n                              ? \"text-green-700 font-medium\"\n                              : \"text-gray-500\"\n                          }`}\n                        >\n                          {selectedRecord.recommendation_irrigation_fertilizers ||\n                            \"N/A\"}\n                        </p>\n                      </div>\n\n                      <div\n                        className={`p-3 rounded-lg ${\n                          hasRecommendation(\n                            selectedRecord.recommendation_sulphur_kumulus\n                          )\n                            ? \"bg-yellow-50 border border-yellow-200\"\n                            : \"bg-gray-50\"\n                        }`}\n                      >\n                        <div className=\"flex items-center gap-2 mb-1\">\n                          <Thermometer\n                            className={`h-4 w-4 ${\n                              hasRecommendation(\n                                selectedRecord.recommendation_sulphur_kumulus\n                              )\n                                ? \"text-yellow-600\"\n                                : \"text-gray-400\"\n                            }`}\n                          />\n                          <span className=\"text-sm font-medium text-gray-700\">\n                            Sulphur\n                          </span>\n                        </div>\n                        <p\n                          className={`text-sm ${\n                            hasRecommendation(\n                              selectedRecord.recommendation_sulphur_kumulus\n                            )\n                              ? \"text-yellow-700 font-medium\"\n                              : \"text-gray-500\"\n                          }`}\n                        >\n                          {selectedRecord.recommendation_sulphur_kumulus ||\n                            \"N/A\"}\n                        </p>\n                      </div>\n\n                      <div\n                        className={`p-3 rounded-lg ${\n                          hasRecommendation(\n                            selectedRecord.recommendation_white_rust\n                          )\n                            ? \"bg-blue-50 border border-blue-200\"\n                            : \"bg-gray-50\"\n                        }`}\n                      >\n                        <div className=\"flex items-center gap-2 mb-1\">\n                          <AlertCircle\n                            className={`h-4 w-4 ${\n                              hasRecommendation(\n                                selectedRecord.recommendation_white_rust\n                              )\n                                ? \"text-blue-600\"\n                                : \"text-gray-400\"\n                            }`}\n                          />\n                          <span className=\"text-sm font-medium text-gray-700\">\n                            White Rust\n                          </span>\n                        </div>\n                        <p\n                          className={`text-sm ${\n                            hasRecommendation(\n                              selectedRecord.recommendation_white_rust\n                            )\n                              ? \"text-blue-700 font-medium\"\n                              : \"text-gray-500\"\n                          }`}\n                        >\n                          {selectedRecord.recommendation_white_rust || \"N/A\"}\n                        </p>\n                      </div>\n\n                      <div\n                        className={`p-3 rounded-lg ${\n                          hasRecommendation(\n                            selectedRecord.recommendation_aphid_ulala\n                          )\n                            ? \"bg-red-50 border border-red-200\"\n                            : \"bg-gray-50\"\n                        }`}\n                      >\n                        <div className=\"flex items-center gap-2 mb-1\">\n                          <Bug\n                            className={`h-4 w-4 ${\n                              hasRecommendation(\n                                selectedRecord.recommendation_aphid_ulala\n                              )\n                                ? \"text-red-600\"\n                                : \"text-gray-400\"\n                            }`}\n                          />\n                          <span className=\"text-sm font-medium text-gray-700\">\n                            Aphid Control\n                          </span>\n                        </div>\n                        <p\n                          className={`text-sm ${\n                            hasRecommendation(\n                              selectedRecord.recommendation_aphid_ulala\n                            )\n                              ? \"text-red-700 font-medium\"\n                              : \"text-gray-500\"\n                          }`}\n                        >\n                          {selectedRecord.recommendation_aphid_ulala || \"N/A\"}\n                        </p>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n\n                <DialogFooter>\n                  <Button\n                    variant=\"outline\"\n                    onClick={() => setIsDetailModalOpen(false)}\n                  >\n                    Close\n                  </Button>\n                  <Button>Export Field Report</Button>\n                </DialogFooter>\n              </div>\n            </>\n          )}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7823, "column": 0}, "map": {"version":3,"sources":["file:///D:/Nextjs/landdirectorateDashboardVersion1-main/landdirectorateDashboardVersion1-main/components/stage-forms/emergence-form.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport {\n  Card,\n  CardContent,\n  CardHeader,\n  CardTitle,\n  CardDescription,\n  CardFooter,\n} from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n  DialogFooter,\n} from \"@/components/ui/dialog\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport {\n  Leaf,\n  Bug,\n  AlertCircle,\n  CheckCircle,\n  XCircle,\n  Image as ImageIcon,\n  ChevronRight,\n  Eye,\n  Filter,\n  Search,\n  Download,\n  BarChart3,\n  Calendar,\n  Wheat,\n  Droplet,\n  Thermometer,\n  Package,\n  Sprout,\n  Tractor,\n  Beaker,\n  CloudRain,\n  Droplets as DropletsIcon,\n  Shield,\n  CircleAlert,\n} from \"lucide-react\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Progress } from \"@/components/ui/progress\";\n\ninterface DrillSowingData {\n  drill_done: boolean;\n  irrigation_within_week: boolean;\n  [key: string]: any;\n}\n\ninterface FertilizerRecommendation {\n  product?: string;\n  name?: string;\n  fertilizer_name?: string;\n  type?: string;\n  dosage?: string;\n  [key: string]: any;\n}\n\ninterface BioStimulant {\n  [key: string]: any;\n}\n\ninterface ReasonItem {\n  label: string;\n  value: string;\n}\n\ninterface GerminationData {\n  percentage: string;\n  reason: ReasonItem[];\n}\n\ninterface WeedMonitoringData {\n  id: number;\n  crop_name: string;\n  crop_health: string;\n  farm: number | null;\n  leave_observations: boolean;\n  other_issues_text: string | null;\n  post_emergent_weedicide_applied: string | null;\n  weed_cover_percentage: string;\n  weed_cover_percentage_display: string;\n  weed_photo: string | null;\n  weed_type: string;\n  weedicide_product: string;\n  weeds_present: boolean;\n  yellowing_cause: string[];\n  yellowing_cause_display: string[];\n  yellowing_sub_cause: {\n    water_stress: string[];\n    nutrient_deficiency: string[];\n    [key: string]: any;\n  };\n  yellowing_sub_cause_display: string[];\n  farm_name: string;\n\n  // New fields from your data\n  germination_per: string;\n  drill_sowing: DrillSowingData[];\n  fer_rec: FertilizerRecommendation[];\n  bio_stimulant: BioStimulant[];\n}\n\nexport function EmergenceForm() {\n  const [weedData, setWeedData] = useState<WeedMonitoringData[]>([]);\n  const [filteredData, setFilteredData] = useState<WeedMonitoringData[]>([]);\n  const [selectedRecord, setSelectedRecord] =\n    useState<WeedMonitoringData | null>(null);\n  const [isDetailModalOpen, setIsDetailModalOpen] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [filterField, setFilterField] = useState<string>(\"all\");\n  const [activeTab, setActiveTab] = useState(\"all\");\n\n  const API_BASE_URL = \"https://rda.ngrok.app\";\n\n  // Parse germination percentage - MOVED BEFORE USE\n  const parseGerminationPercentage = (\n    germinationString: string,\n  ): GerminationData => {\n    try {\n      if (!germinationString) {\n        return { percentage: \"N/A\", reason: [] };\n      }\n\n      // Try to parse the JSON string\n      const cleanedString = germinationString.replace(/\\\\\"/g, '\"');\n      const germData = JSON.parse(cleanedString);\n\n      return {\n        percentage: germData.percentage || \"N/A\",\n        reason: Array.isArray(germData.reason) ? germData.reason : [],\n      };\n    } catch (e) {\n      console.error(\"Error parsing germination data:\", e, germinationString);\n      return { percentage: \"N/A\", reason: [] };\n    }\n  };\n\n  // Get germination quality color\n  const getGerminationQualityColor = (percentage: string) => {\n    if (percentage === \"N/A\") return \"text-gray-500\";\n\n    const rangeMatch = percentage.match(/(\\d+)-(\\d+)/);\n    if (rangeMatch) {\n      const avg = (parseInt(rangeMatch[1]) + parseInt(rangeMatch[2])) / 2;\n      if (avg >= 80) return \"text-green-600\";\n      if (avg >= 60) return \"text-amber-600\";\n      return \"text-red-600\";\n    }\n    return \"text-gray-500\";\n  };\n\n  // Get germination quality badge\n  const getGerminationQualityBadge = (percentage: string) => {\n    if (percentage === \"N/A\") return null;\n\n    const rangeMatch = percentage.match(/(\\d+)-(\\d+)/);\n    if (rangeMatch) {\n      const avg = (parseInt(rangeMatch[1]) + parseInt(rangeMatch[2])) / 2;\n      if (avg >= 80) {\n        return (\n          <Badge className=\"bg-green-100 text-green-800 text-xs\">\n            Excellent\n          </Badge>\n        );\n      } else if (avg >= 60) {\n        return (\n          <Badge className=\"bg-amber-100 text-amber-800 text-xs\">\n            Moderate\n          </Badge>\n        );\n      } else {\n        return <Badge className=\"bg-red-100 text-red-800 text-xs\">Poor</Badge>;\n      }\n    }\n    return null;\n  };\n\n  // Calculate germination progress value\n  const calculateGerminationProgress = (percentage: string): number => {\n    if (percentage === \"N/A\") return 0;\n\n    const rangeMatch = percentage.match(/(\\d+)-(\\d+)/);\n    if (rangeMatch) {\n      const avg = (parseInt(rangeMatch[1]) + parseInt(rangeMatch[2])) / 2;\n      return avg;\n    }\n    return 0;\n  };\n\n  // Stats calculation - including new fields\n  const totalRecords = weedData.length;\n  const healthyCrops = weedData.filter(\n    (record) => record.crop_health === \"healthy\",\n  ).length;\n  const weedsPresentCount = weedData.filter(\n    (record) => record.weeds_present,\n  ).length;\n  const yellowingIssuesCount = weedData.filter(\n    (record) => record.yellowing_cause && record.yellowing_cause.length > 0,\n  ).length;\n  const drillSowingDoneCount = weedData.filter(\n    (record) => record.drill_sowing && record.drill_sowing[0]?.drill_done,\n  ).length;\n  const irrigationWithinWeekCount = weedData.filter(\n    (record) =>\n      record.drill_sowing && record.drill_sowing[0]?.irrigation_within_week,\n  ).length;\n\n  // Parse germination percentage and calculate average\n  const germinationStats = weedData.reduce(\n    (stats, record) => {\n      try {\n        const germData = parseGerminationPercentage(record.germination_per);\n        if (germData.percentage) {\n          const rangeMatch = germData.percentage.match(/(\\d+)-(\\d+)/);\n          if (rangeMatch) {\n            const avg = (parseInt(rangeMatch[1]) + parseInt(rangeMatch[2])) / 2;\n            stats.total += avg;\n            stats.count++;\n          }\n        }\n      } catch (e) {\n        console.error(\"Error parsing germination data:\", e);\n      }\n      return stats;\n    },\n    { total: 0, count: 0 },\n  );\n\n  const averageGermination =\n    germinationStats.count > 0\n      ? germinationStats.total / germinationStats.count\n      : 0;\n\n  // Calculate germination quality distribution\n  const germinationDistribution = weedData.reduce(\n    (dist, record) => {\n      try {\n        const germData = parseGerminationPercentage(record.germination_per);\n        if (germData.percentage) {\n          const rangeMatch = germData.percentage.match(/(\\d+)-(\\d+)/);\n          if (rangeMatch) {\n            const avg = (parseInt(rangeMatch[1]) + parseInt(rangeMatch[2])) / 2;\n            if (avg >= 80) dist.high++;\n            else if (avg >= 60) dist.medium++;\n            else dist.low++;\n          }\n        }\n      } catch (e) {\n        // Skip invalid data\n      }\n      return dist;\n    },\n    { high: 0, medium: 0, low: 0 },\n  );\n\n  // Unique fields\n  const uniqueFields: string[] = Array.from(\n    new Set(weedData.map((record) => record.farm_name || \"Unknown Farm\")),\n  );\n\n  useEffect(() => {\n    fetchWeedData();\n  }, []);\n\n  // Filter data based on search and filter\n  useEffect(() => {\n    let results = [...weedData];\n\n    // Apply search filter\n    if (searchQuery.trim() !== \"\") {\n      const query = searchQuery.toLowerCase();\n      results = results.filter(\n        (record) =>\n          (record.crop_name?.toLowerCase() || \"\").includes(query) ||\n          (record.crop_health?.toLowerCase() || \"\").includes(query) ||\n          (record.weed_type?.toLowerCase() || \"\").includes(query) ||\n          (record.farm_name?.toLowerCase() || \"\").includes(query),\n      );\n    }\n\n    // Apply field filter\n    if (filterField !== \"all\") {\n      results = results.filter((record) => record.farm_name === filterField);\n    }\n\n    // Apply tab filter\n    if (activeTab === \"issues\") {\n      results = results.filter(\n        (record) =>\n          (record.yellowing_cause && record.yellowing_cause.length > 0) ||\n          record.weeds_present,\n      );\n    } else if (activeTab === \"healthy\") {\n      results = results.filter((record) => record.crop_health === \"healthy\");\n    } else if (activeTab === \"weeds\") {\n      results = results.filter((record) => record.weeds_present);\n    }\n\n    setFilteredData(results);\n  }, [searchQuery, filterField, activeTab, weedData]);\n\n  const fetchWeedData = async () => {\n    try {\n      setLoading(true);\n      const token =\n        typeof window !== \"undefined\"\n          ? localStorage.getItem(\"authToken\")\n          : null;\n\n      if (!token) {\n        setError(\"No authentication token found\");\n        return;\n      }\n\n      const response = await fetch(\n        \"https://rda.ngrok.app/api/weed-monitoring/\",\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n            \"ngrok-skip-browser-warning\": \"true\",\n          },\n        },\n      );\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const data = await response.json();\n      console.log(\"Fetched weed monitoring data:\", data);\n      console.log(\"Fertilizer data sample:\", data.results?.[0]?.fer_rec);\n\n      // Transform the data to include farm_name from farm field if needed\n      const transformedData = (data.results || []).map((record: any) => ({\n        ...record,\n        farm_name: record.farm_name || `Farm #${record.farm || record.id}`,\n      }));\n\n      setWeedData(transformedData);\n      setFilteredData(transformedData);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : \"Failed to fetch data\");\n      console.error(\"Error fetching weed monitoring data:\", err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Fix image URLs\n  const getFullImageUrl = (imagePath: string | null) => {\n    if (!imagePath) return null;\n    // Check if it's already a full URL\n    if (imagePath.startsWith(\"http\")) return imagePath;\n    // Handle both absolute and relative paths\n    if (imagePath.startsWith(\"/\")) {\n      return `${API_BASE_URL}${imagePath}`;\n    }\n    return `${API_BASE_URL}/${imagePath}`;\n  };\n\n  const getCropHealthColor = (health: string) => {\n    switch (health?.toLowerCase()) {\n      case \"healthy\":\n        return \"bg-green-100 text-green-800\";\n      case \"fair\":\n        return \"bg-yellow-100 text-yellow-800\";\n      case \"stressed\":\n        return \"bg-red-100 text-red-800\";\n      default:\n        return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  const getWeedCoverColor = (percentage: string) => {\n    const numericValue = parseInt(percentage.split(\"-\")[0]) || 0;\n    if (numericValue < 10) return \"text-green-600\";\n    if (numericValue < 30) return \"text-amber-600\";\n    return \"text-red-600\";\n  };\n\n  const getYellowingCauseBadges = (causes: string[]) => {\n    if (!causes || !Array.isArray(causes)) return null;\n\n    return causes.map((cause, index) => {\n      let colorClass = \"bg-gray-100 text-gray-800\";\n      let displayText = cause.replace(/_/g, \" \");\n\n      switch (cause) {\n        case \"nutrient_deficiency\":\n          colorClass = \"bg-red-100 text-red-800\";\n          displayText = \"Nutrient Deficiency\";\n          break;\n        case \"water_stress\":\n          colorClass = \"bg-blue-100 text-blue-800\";\n          displayText = \"Water Stress\";\n          break;\n        case \"disease\":\n          colorClass = \"bg-purple-100 text-purple-800\";\n          displayText = \"Disease\";\n          break;\n        case \"pest_damage\":\n          colorClass = \"bg-orange-100 text-orange-800\";\n          displayText = \"Pest Damage\";\n          break;\n      }\n\n      return (\n        <Badge key={index} className={`text-xs ${colorClass}`}>\n          {displayText}\n        </Badge>\n      );\n    });\n  };\n\n  const renderBooleanStatus = (value: boolean) => (\n    <div className=\"flex items-center gap-1\">\n      {value ? (\n        <>\n          <CheckCircle className=\"h-4 w-4 text-green-500\" />\n          <span className=\"text-green-600 font-medium\">Yes</span>\n        </>\n      ) : (\n        <>\n          <XCircle className=\"h-4 w-4 text-gray-400\" />\n          <span className=\"text-gray-500\">No</span>\n        </>\n      )}\n    </div>\n  );\n\n  // Helper to render drill sowing info\n  const renderDrillSowingInfo = (drillSowing: DrillSowingData[]) => {\n    if (!drillSowing || drillSowing.length === 0) return null;\n\n    const data = drillSowing[0];\n    return (\n      <div className=\"space-y-2\">\n        <div className=\"flex items-center justify-between\">\n          <span className=\"text-sm text-gray-600\">Drill Sowing Done</span>\n          {renderBooleanStatus(data.drill_done)}\n        </div>\n        <div className=\"flex items-center justify-between\">\n          <span className=\"text-sm text-gray-600\">Irrigation Within Week</span>\n          {renderBooleanStatus(data.irrigation_within_week)}\n        </div>\n      </div>\n    );\n  };\n\n  // Helper to render fertilizer recommendations - FIXED VERSION\n  const renderFertilizerRecommendations = (\n    ferRec: FertilizerRecommendation[],\n  ) => {\n    if (!ferRec || ferRec.length === 0) return null;\n\n    return (\n      <div className=\"space-y-2\">\n        <Label className=\"text-sm font-medium text-gray-700 mb-1\">\n          Fertilizer Recommendations\n        </Label>\n        <div className=\"space-y-2\">\n          {ferRec.map((fertilizer, index) => {\n            // Try different possible property names\n            const fertilizerName = \n              fertilizer.product || \n              fertilizer.name || \n              fertilizer.fertilizer_name || \n              `Fertilizer ${index + 1}`;\n            \n            const fertilizerType = fertilizer.type || \"N/A\";\n            const dosage = fertilizer.dosage || \"Standard dosage\";\n\n            return (\n              <div key={index} className=\"bg-amber-50 p-3 rounded-lg border border-amber-200\">\n                <div className=\"flex items-start gap-2\">\n                  <Beaker className=\"h-4 w-4 text-amber-600 mt-0.5 flex-shrink-0\" />\n                  <div className=\"flex-1\">\n                    <div className=\"flex justify-between items-start\">\n                      <div>\n                        <h4 className=\"font-semibold text-amber-900 text-sm\">\n                          {fertilizerName}\n                        </h4>\n                        {fertilizerType !== \"N/A\" && (\n                          <p className=\"text-xs text-amber-700 mt-0.5\">\n                            Type: {fertilizerType}\n                          </p>\n                        )}\n                      </div>\n                      <Badge variant=\"outline\" className=\"bg-amber-100 text-amber-800 text-xs\">\n                        Recommended\n                      </Badge>\n                    </div>\n                    <p className=\"text-xs text-amber-600 mt-1\">\n                      {dosage}\n                    </p>\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    );\n  };\n\n  // Helper to render bio stimulants\n  const renderBioStimulants = (bioStimulant: BioStimulant[]) => {\n    if (!bioStimulant || bioStimulant.length === 0) return null;\n\n    return (\n      <div className=\"space-y-2\">\n        <Label className=\"text-sm font-medium text-gray-700 mb-1\">\n          Bio Stimulants\n        </Label>\n        <div className=\"space-y-2\">\n          {bioStimulant.map((stimulant, index) => (\n            <div key={index} className=\"bg-green-50 p-3 rounded-lg border border-green-200\">\n              <div className=\"flex items-center gap-2\">\n                <Shield className=\"h-4 w-4 text-green-600\" />\n                <span className=\"text-sm font-medium text-green-800\">\n                  Bio Stimulant Applied\n                </span>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  };\n\n  // Render germination reasons\n  const renderGerminationReasons = (reasons: ReasonItem[]) => {\n    if (!reasons || reasons.length === 0) return null;\n\n    return (\n      <div className=\"mt-2 space-y-1\">\n        <p className=\"text-xs font-medium text-gray-700\">Reasons:</p>\n        <div className=\"flex flex-wrap gap-1\">\n          {reasons.map((reason, index) => (\n            <Badge key={index} variant=\"outline\" className=\"text-xs\">\n              {reason.label}\n            </Badge>\n          ))}\n        </div>\n      </div>\n    );\n  };\n\n  if (loading) {\n    return (\n      <div className=\"space-y-8\">\n        {/* Header Skeleton */}\n        <div className=\"flex justify-between items-center\">\n          <div>\n            <Skeleton className=\"h-10 w-48\" />\n            <Skeleton className=\"h-4 w-64 mt-2\" />\n          </div>\n          <Skeleton className=\"h-10 w-32\" />\n        </div>\n\n        {/* Stats Skeleton */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          {[1, 2, 3, 4].map((i) => (\n            <Skeleton key={i} className=\"h-32 rounded-lg\" />\n          ))}\n        </div>\n\n        {/* Cards Skeleton */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {[1, 2, 3, 4, 5, 6].map((i) => (\n            <Skeleton key={i} className=\"h-64 rounded-lg\" />\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <Card>\n        <CardContent className=\"pt-6\">\n          <div className=\"text-center py-8 text-red-500\">\n            <AlertCircle className=\"h-12 w-12 mx-auto mb-4\" />\n            <p className=\"text-lg font-semibold\">Error Loading Data</p>\n            <p className=\"text-sm mt-2\">{error}</p>\n            <Button onClick={fetchWeedData} className=\"mt-4\">\n              Retry\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  // Function to render each card\n  const renderCard = (record: WeedMonitoringData) => {\n    const weedImageUrl = getFullImageUrl(record.weed_photo);\n    const germinationData = parseGerminationPercentage(record.germination_per);\n    const germinationProgress = calculateGerminationProgress(\n      germinationData.percentage,\n    );\n    const germinationQualityBadge = getGerminationQualityBadge(\n      germinationData.percentage,\n    );\n\n    return (\n      <Card\n        key={record.id}\n        className=\"group hover:shadow-lg transition-all duration-300 hover:border-primary/30 overflow-hidden\"\n      >\n        <CardContent className=\"p-0\">\n          {/* Header Section */}\n          <div className=\"bg-gradient-to-r from-green-50 to-green-100 p-5\">\n            <div className=\"flex justify-between items-start\">\n              <div>\n                <h3 className=\"text-xl font-bold text-gray-900 line-clamp-1 capitalize\">\n                  {record.crop_name || \"Unknown Crop\"}\n                </h3>\n                <p className=\"text-sm text-gray-600 mt-1\">\n                  Record #{record.id} • {record.farm_name || \"Unknown Farm\"}\n                </p>\n              </div>\n              <Badge className={getCropHealthColor(record.crop_health)}>\n                {record.crop_health || \"Unknown\"}\n              </Badge>\n            </div>\n          </div>\n\n          {/* Content */}\n          <div className=\"p-5\">\n            <div className=\"space-y-4\">\n              {/* Germination Percentage */}\n              <div className=\"space-y-3\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center gap-2 text-gray-600\">\n                    <span className=\"text-sm font-medium\">Germination</span>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <span\n                      className={`font-bold ${getGerminationQualityColor(germinationData.percentage)}`}\n                    >\n                      {germinationData.percentage}\n                    </span>\n                    {germinationQualityBadge}\n                  </div>\n                </div>\n\n                {/* Progress Bar */}\n                <div className=\"space-y-1\">\n                  <div className=\"flex justify-between text-xs text-gray-500\">\n                    <span>0%</span>\n                    <span>Germination</span>\n                    <span>100%</span>\n                  </div>\n                  <div className=\"h-2 bg-gray-200 rounded-full overflow-hidden\">\n                    <div\n                      className={`h-full ${\n                        germinationProgress >= 80\n                          ? \"bg-green-500\"\n                          : germinationProgress >= 60\n                            ? \"bg-amber-500\"\n                            : \"bg-red-500\"\n                      }`}\n                      style={{ width: `${germinationProgress}%` }}\n                    />\n                  </div>\n                </div>\n\n                {/* Reasons */}\n                {renderGerminationReasons(germinationData.reason)}\n              </div>\n\n              {/* Drill Sowing Info */}\n              {record.drill_sowing && record.drill_sowing.length > 0 && (\n                <div className=\"space-y-2\">\n                  <div className=\"flex items-center gap-2 text-gray-600\">\n                    <Tractor className=\"h-4 w-4\" />\n                    <span className=\"text-sm font-medium\">Drill Sowing</span>\n                  </div>\n                  {renderDrillSowingInfo(record.drill_sowing)}\n                </div>\n              )}\n\n              {/* Fertilizer Recommendations */}\n              {record.fer_rec && record.fer_rec.length > 0 && (\n                <div className=\"space-y-2\">\n                  {renderFertilizerRecommendations(record.fer_rec)}\n                </div>\n              )}\n\n              {/* Bio Stimulants */}\n              {record.bio_stimulant && record.bio_stimulant.length > 0 && (\n                <div className=\"space-y-2\">\n                  {renderBioStimulants(record.bio_stimulant)}\n                </div>\n              )}\n\n              {/* Yellowing Causes */}\n              {record.yellowing_cause && record.yellowing_cause.length > 0 && (\n                <div>\n                  <Label className=\"text-sm font-medium text-gray-700 mb-2\">\n                    Yellowing Causes\n                  </Label>\n                  <div className=\"flex flex-wrap gap-2\">\n                    {getYellowingCauseBadges(record.yellowing_cause)}\n                  </div>\n                </div>\n              )}\n\n              {/* Weed Information */}\n              <div className=\"space-y-3\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center gap-2 text-gray-600\">\n                    <Leaf className=\"h-4 w-4\" />\n                    <span className=\"text-sm\">Weed Presence</span>\n                  </div>\n                  {renderBooleanStatus(record.weeds_present)}\n                </div>\n\n                {record.weeds_present && (\n                  <>\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"text-sm text-gray-600\">Weed Type</span>\n                      <Badge variant=\"outline\" className=\"capitalize\">\n                        {record.weed_type || \"Unknown\"}\n                      </Badge>\n                    </div>\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"text-sm text-gray-600\">\n                        Cover Percentage\n                      </span>\n                      <span\n                        className={`font-bold ${getWeedCoverColor(\n                          record.weed_cover_percentage,\n                        )}`}\n                      >\n                        {record.weed_cover_percentage_display || \"N/A\"}\n                      </span>\n                    </div>\n                  </>\n                )}\n              </div>\n\n              {/* Weedicide Application */}\n              {record.post_emergent_weedicide_applied && (\n                <div className=\"mt-4 p-3 bg-blue-50 rounded-lg border border-blue-200\">\n                  <h4 className=\"text-sm font-medium text-blue-800 mb-1 flex items-center gap-1\">\n                    <Package className=\"h-4 w-4\" />\n                    Weedicide Applied\n                  </h4>\n                  <p className=\"text-sm\">{record.weedicide_product || \"N/A\"}</p>\n                </div>\n              )}\n\n              {/* Weed Photo Preview - FIXED IMAGE DISPLAY */}\n              {weedImageUrl && (\n                <div className=\"mt-4\">\n                  <Label className=\"text-sm font-medium text-gray-700 mb-2\">\n                    Weed Photo\n                  </Label>\n                  <div className=\"relative h-32 rounded-lg overflow-hidden bg-gray-100 border\">\n                    <img\n                      src={weedImageUrl}\n                      alt={`Weed photo for ${record.crop_name}`}\n                      className=\"w-full h-full object-cover\"\n                      onError={(e) => {\n                        const parent = e.currentTarget.parentElement;\n                        if (parent) {\n                          parent.innerHTML = `\n                            <div class=\"w-full h-full flex flex-col items-center justify-center\">\n                              <ImageIcon class=\"h-8 w-8 text-gray-300 mb-2\" />\n                              <p class=\"text-xs text-gray-400\">Image unavailable</p>\n                            </div>\n                          `;\n                        }\n                      }}\n                    />\n                  </div>\n                </div>\n              )}\n            </div>\n\n            {/* Action Button */}\n            <Button\n              onClick={() => {\n                setSelectedRecord(record);\n                setIsDetailModalOpen(true);\n              }}\n              variant=\"outline\"\n              className=\"w-full mt-4 gap-2 group-hover:border-primary\"\n            >\n              <Eye className=\"h-4 w-4\" />\n              View Full Details\n              <ChevronRight className=\"h-4 w-4\" />\n            </Button>\n          </div>\n\n          {/* Footer */}\n          <CardFooter className=\"border-t pt-4 flex justify-between text-sm text-gray-500\">\n            <div className=\"flex items-center gap-2\">\n              <div\n                className={`w-2 h-2 rounded-full ${\n                  record.crop_health === \"healthy\"\n                    ? \"bg-green-500\"\n                    : record.crop_health === \"stressed\"\n                      ? \"bg-red-500\"\n                      : \"bg-gray-500\"\n                }`}\n              ></div>\n              <span>{record.farm_name || \"Unknown Farm\"}</span>\n            </div>\n            <div className=\"flex items-center gap-1\">\n              <span\n                className={`text-xs ${getGerminationQualityColor(germinationData.percentage)}`}\n              >\n                {germinationData.percentage}\n              </span>\n            </div>\n          </CardFooter>\n        </CardContent>\n      </Card>\n    );\n  };\n\n  // Function to render detail modal content\n  const renderDetailModal = () => {\n    if (!selectedRecord) return null;\n\n    const selectedWeedImageUrl = getFullImageUrl(selectedRecord.weed_photo);\n    const germinationData = parseGerminationPercentage(\n      selectedRecord.germination_per,\n    );\n    const germinationProgress = calculateGerminationProgress(\n      germinationData.percentage,\n    );\n\n    return (\n      <>\n        <DialogHeader>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <DialogTitle className=\"text-2xl flex items-center gap-2\">\n                <Wheat className=\"h-6 w-6 text-primary\" />\n                {selectedRecord.crop_name || \"Unknown Crop\"} —{\" \"}\n                {selectedRecord.farm_name || \"Unknown Farm\"}\n              </DialogTitle>\n              <DialogDescription>\n                Complete weed monitoring data • Record #{selectedRecord.id}\n              </DialogDescription>\n            </div>\n            <Badge className={getCropHealthColor(selectedRecord.crop_health)}>\n              {selectedRecord.crop_health || \"Unknown\"}\n            </Badge>\n          </div>\n        </DialogHeader>\n\n        <div className=\"space-y-6\">\n          {/* Germination & Planting Section */}\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                Germination Details\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-6\">\n              {/* Germination Percentage */}\n              <div>\n                <div className=\"flex items-center justify-between mb-2\">\n                  <Label className=\"text-lg font-semibold text-gray-900\">\n                    Germination Percentage\n                  </Label>\n                  <div className=\"flex items-center gap-2\">\n                    <span\n                      className={`text-2xl font-bold ${getGerminationQualityColor(germinationData.percentage)}`}\n                    >\n                      {germinationData.percentage}\n                    </span>\n                    {getGerminationQualityBadge(germinationData.percentage)}\n                  </div>\n                </div>\n\n                {/* Progress Bar */}\n                <div className=\"space-y-2\">\n                  <div className=\"flex justify-between text-sm text-gray-600\">\n                    <span>0%</span>\n                    <span className=\"font-medium\">Germination Progress</span>\n                    <span>100%</span>\n                  </div>\n                  <div className=\"h-3 bg-gray-200 rounded-full overflow-hidden\">\n                    <div\n                      className={`h-full ${\n                        germinationProgress >= 80\n                          ? \"bg-green-500\"\n                          : germinationProgress >= 60\n                            ? \"bg-amber-500\"\n                            : \"bg-red-500\"\n                      }`}\n                      style={{ width: `${germinationProgress}%` }}\n                    />\n                  </div>\n                </div>\n              </div>\n\n              {/* Reasons for Germination Level */}\n              {germinationData.reason.length > 0 && (\n                <div>\n                  <Label className=\"font-medium text-gray-700 mb-3\">\n                    Factors Affecting Germination\n                  </Label>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                    {germinationData.reason.map((reason, index) => (\n                      <div\n                        key={index}\n                        className=\"bg-gray-50 p-3 rounded-lg border\"\n                      >\n                        <div className=\"flex items-center gap-2\">\n                          <CircleAlert className=\"h-4 w-4 text-gray-500\" />\n                          <span className=\"font-medium text-gray-800\">\n                            {reason.label}\n                          </span>\n                        </div>\n                        <p className=\"text-sm text-gray-600 mt-1\">\n                          {reason.value === \"seed\"\n                            ? \"Issues related to seed quality, viability, or treatment\"\n                            : \"Issues related to sowing depth, timing, or method\"}\n                        </p>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Drill Sowing Details */}\n              {selectedRecord.drill_sowing &&\n                selectedRecord.drill_sowing.length > 0 && (\n                  <div>\n                    <Label className=\"font-medium text-gray-700 mb-3\">\n                      Drill Sowing Information\n                    </Label>\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <div className=\"space-y-3\">\n                        <div className=\"flex items-center justify-between p-3 bg-blue-50 rounded-lg\">\n                          <div className=\"flex items-center gap-2\">\n                            <Tractor className=\"h-5 w-5 text-blue-600\" />\n                            <span className=\"font-medium text-gray-800\">\n                              Drill Sowing Done\n                            </span>\n                          </div>\n                          {renderBooleanStatus(\n                            selectedRecord.drill_sowing[0].drill_done,\n                          )}\n                        </div>\n                        <div className=\"flex items-center justify-between p-3 bg-blue-50 rounded-lg\">\n                          <div className=\"flex items-center gap-2\">\n                            <DropletsIcon className=\"h-5 w-5 text-blue-600\" />\n                            <span className=\"font-medium text-gray-800\">\n                              Irrigation (Within Week)\n                            </span>\n                          </div>\n                          {renderBooleanStatus(\n                            selectedRecord.drill_sowing[0]\n                              .irrigation_within_week,\n                          )}\n                        </div>\n                      </div>\n                      <div className=\"bg-gray-50 p-4 rounded-lg\">\n                        <p className=\"text-sm text-gray-600\">\n                          Drill sowing ensures uniform seed placement at optimal\n                          depth for consistent germination. Proper irrigation\n                          within the first week is crucial for seed\n                          establishment.\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                )}\n            </CardContent>\n          </Card>\n\n          {/* Inputs & Treatments Section */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            {/* Fertilizer Recommendations - UPDATED */}\n            {selectedRecord.fer_rec && selectedRecord.fer_rec.length > 0 && (\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Beaker className=\"h-5 w-5 text-amber-600\" />\n                    Fertilizer Recommendations\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-3\">\n                    {selectedRecord.fer_rec.map((fertilizer, index) => {\n                      // Try different possible property names\n                      const fertilizerName = \n                        fertilizer.product || \n                        fertilizer.name || \n                        fertilizer.fertilizer_name || \n                        `Fertilizer ${index + 1}`;\n                      \n                      const fertilizerType = fertilizer.type || \"N/A\";\n                      const dosage = fertilizer.dosage || \"Standard dosage\";\n\n                      return (\n                        <div\n                          key={index}\n                          className=\"bg-amber-50 p-4 rounded-lg border border-amber-200\"\n                        >\n                          <div className=\"flex items-start gap-3\">\n                            <div className=\"p-2 bg-amber-100 rounded-lg\">\n                              <Beaker className=\"h-6 w-6 text-amber-600\" />\n                            </div>\n                            <div className=\"flex-1\">\n                              <div className=\"flex justify-between items-start mb-2\">\n                                <h4 className=\"font-semibold text-amber-900\">\n                                  {fertilizerName}\n                                </h4>\n                                <Badge className=\"bg-amber-100 text-amber-800\">\n                                  Recommended\n                                </Badge>\n                              </div>\n                              {fertilizerType !== \"N/A\" && (\n                                <p className=\"text-sm text-amber-700 mb-2\">\n                                  Type: <span className=\"font-medium\">{fertilizerType}</span>\n                                </p>\n                              )}\n                              <p className=\"text-sm text-amber-600\">\n                                <span className=\"font-medium\">Dosage:</span> {dosage}\n                              </p>\n                            </div>\n                          </div>\n                        </div>\n                      );\n                    })}\n                  </div>\n                </CardContent>\n              </Card>\n            )}\n\n            {/* Bio Stimulants */}\n            {selectedRecord.bio_stimulant &&\n              selectedRecord.bio_stimulant.length > 0 && (\n                <Card>\n                  <CardHeader>\n                    <CardTitle className=\"flex items-center gap-2\">\n                      <Shield className=\"h-5 w-5 text-green-600\" />\n                      Bio Stimulants\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"bg-green-50 p-4 rounded-lg border border-green-200\">\n                      <div className=\"flex items-start gap-3\">\n                        <div className=\"p-2 bg-green-100 rounded-lg\">\n                          <Shield className=\"h-6 w-6 text-green-600\" />\n                        </div>\n                        <div>\n                          <h4 className=\"font-semibold text-green-900\">\n                            Bio Stimulant Applied\n                          </h4>\n                          <p className=\"text-sm text-green-700 mt-1\">\n                            Bio stimulants enhance plant growth, stress\n                            resistance, and nutrient uptake\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              )}\n          </div>\n\n          {/* Plant Health & Issues */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            {/* Yellowing Issues */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <AlertCircle className=\"h-5 w-5 text-amber-600\" />\n                  Yellowing Issues\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                {selectedRecord.yellowing_cause &&\n                selectedRecord.yellowing_cause.length > 0 ? (\n                  <div className=\"space-y-4\">\n                    <div>\n                      <Label className=\"font-medium text-gray-700 mb-2\">\n                        Main Causes\n                      </Label>\n                      <div className=\"flex flex-wrap gap-2\">\n                        {getYellowingCauseBadges(\n                          selectedRecord.yellowing_cause,\n                        )}\n                      </div>\n                    </div>\n\n                    {/* Sub Causes */}\n                    {(selectedRecord.yellowing_sub_cause.water_stress?.length >\n                      0 ||\n                      selectedRecord.yellowing_sub_cause.nutrient_deficiency\n                        ?.length > 0) && (\n                      <div>\n                        <Label className=\"font-medium text-gray-700 mb-2\">\n                          Specific Issues\n                        </Label>\n                        <div className=\"space-y-2\">\n                          {selectedRecord.yellowing_sub_cause.water_stress?.map(\n                            (issue, index) => (\n                              <div\n                                key={index}\n                                className=\"flex items-start gap-2 bg-blue-50 p-2 rounded\"\n                              >\n                                <div className=\"w-2 h-2 rounded-full bg-blue-500 mt-2 flex-shrink-0\"></div>\n                                <span className=\"text-sm\">\n                                  Water Stress: {issue}\n                                </span>\n                              </div>\n                            ),\n                          )}\n                          {selectedRecord.yellowing_sub_cause.nutrient_deficiency?.map(\n                            (issue, index) => (\n                              <div\n                                key={index}\n                                className=\"flex items-start gap-2 bg-red-50 p-2 rounded\"\n                              >\n                                <div className=\"w-2 h-2 rounded-full bg-red-500 mt-2 flex-shrink-0\"></div>\n                                <span className=\"text-sm\">\n                                  Nutrient Deficiency: {issue}\n                                </span>\n                              </div>\n                            ),\n                          )}\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                ) : (\n                  <div className=\"text-center py-4 text-gray-500\">\n                    No yellowing issues reported\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n\n            {/* Weed Details */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Bug className=\"h-5 w-5 text-red-600\" />\n                  Weed Details\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-6\">\n                  {/* Weed Information */}\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    <div className=\"space-y-4\">\n                      <div>\n                        <Label className=\"font-medium text-gray-700 mb-2\">\n                          Weed Type\n                        </Label>\n                        <div className=\"bg-gray-50 p-3 rounded-lg\">\n                          <span className=\"font-medium capitalize\">\n                            {selectedRecord.weed_type || \"Not specified\"}\n                          </span>\n                        </div>\n                      </div>\n                      <div>\n                        <Label className=\"font-medium text-gray-700 mb-2\">\n                          Weed Cover\n                        </Label>\n                        <div\n                          className={`p-3 rounded-lg font-bold text-lg text-center ${getWeedCoverColor(\n                            selectedRecord.weed_cover_percentage,\n                          )}`}\n                        >\n                          {selectedRecord.weed_cover_percentage_display ||\n                            \"N/A\"}\n                        </div>\n                      </div>\n                    </div>\n\n                    {/* Weed Photo - FIXED */}\n                    {selectedWeedImageUrl && (\n                      <div>\n                        <Label className=\"font-medium text-gray-700 mb-2\">\n                          Weed Photo\n                        </Label>\n                        <div className=\"rounded-lg overflow-hidden border\">\n                          <img\n                            src={selectedWeedImageUrl}\n                            alt={`Weed photo for ${selectedRecord.crop_name}`}\n                            className=\"w-full h-48 object-cover\"\n                            onError={(e) => {\n                              const parent = e.currentTarget.parentElement;\n                              if (parent) {\n                                parent.innerHTML = `\n                                  <div class=\"w-full h-48 flex flex-col items-center justify-center bg-gray-100\">\n                                    <ImageIcon class=\"h-12 w-12 text-gray-300 mb-2\" />\n                                    <p class=\"text-sm text-gray-400\">Image not available</p>\n                                  </div>\n                                `;\n                              }\n                            }}\n                          />\n                        </div>\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Weedicide Application */}\n                  {selectedRecord.post_emergent_weedicide_applied && (\n                    <div className=\"mt-4\">\n                      <Label className=\"font-medium text-gray-700 mb-2\">\n                        Weedicide Application\n                      </Label>\n                      <div className=\"bg-blue-50 p-4 rounded-lg border border-blue-200\">\n                        <div className=\"flex justify-between items-center\">\n                          <div>\n                            <p className=\"font-medium\">Product Applied</p>\n                            <p className=\"text-lg font-bold text-blue-700\">\n                              {selectedRecord.weedicide_product || \"N/A\"}\n                            </p>\n                          </div>\n                          <Badge variant=\"default\">Applied</Badge>\n                        </div>\n                        <p className=\"text-sm text-gray-600 mt-2\">\n                          Post-emergent weedicide:{\" \"}\n                          {selectedRecord.post_emergent_weedicide_applied}\n                        </p>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n\n          {/* Other Issues */}\n          {selectedRecord.other_issues_text && (\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <AlertCircle className=\"h-5 w-5 text-purple-600\" />\n                  Other Issues & Notes\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"bg-gray-50 p-4 rounded-lg\">\n                  <p className=\"text-gray-700\">\n                    {selectedRecord.other_issues_text}\n                  </p>\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          <DialogFooter>\n            <Button\n              variant=\"outline\"\n              onClick={() => setIsDetailModalOpen(false)}\n            >\n              Close\n            </Button>\n            <Button>Export Report</Button>\n          </DialogFooter>\n        </div>\n      </>\n    );\n  };\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Header Section */}\n      <div className=\"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4\">\n        <div>\n          <h1 className=\"text-3xl font-bold tracking-tight\">\n            Crop Emergence & Monitoring\n          </h1>\n          <p className=\"text-muted-foreground mt-2\">\n            Monitor germination, field practices, crop health issues, and weed\n            presence\n          </p>\n        </div>\n        <div className=\"flex items-center gap-3\">\n          <Button size=\"sm\" onClick={fetchWeedData}>\n            <BarChart3 className=\"h-4 w-4 mr-2\" />\n            Refresh\n          </Button>\n        </div>\n      </div>\n\n      {/* Enhanced Stats Overview */}\n      <div className=\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4\">\n        <Card className=\"bg-gradient-to-br from-green-50 to-green-100 border-green-200\">\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-xs font-medium text-green-700\">\n                  Total Records\n                </p>\n                <h3 className=\"text-xl font-bold text-green-900 mt-1\">\n                  {totalRecords}\n                </h3>\n              </div>\n              <div className=\"h-10 w-10 rounded-full bg-green-200 flex items-center justify-center\">\n                <Leaf className=\"h-5 w-5 text-green-700\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200\">\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-xs font-medium text-blue-700\">\n                  Healthy Crops\n                </p>\n                <h3 className=\"text-xl font-bold text-blue-900 mt-1\">\n                  {healthyCrops}\n                </h3>\n              </div>\n              <div className=\"h-10 w-10 rounded-full bg-blue-200 flex items-center justify-center\">\n                <CheckCircle className=\"h-5 w-5 text-blue-700\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"bg-gradient-to-br from-red-50 to-red-100 border-red-200\">\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-xs font-medium text-red-700\">\n                  Weeds Present\n                </p>\n                <h3 className=\"text-xl font-bold text-red-900 mt-1\">\n                  {weedsPresentCount}\n                </h3>\n              </div>\n              <div className=\"h-10 w-10 rounded-full bg-red-200 flex items-center justify-center\">\n                <Bug className=\"h-5 w-5 text-red-700\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"bg-gradient-to-br from-amber-50 to-amber-100 border-amber-200\">\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-xs font-medium text-amber-700\">\n                  Drill Sowing\n                </p>\n                <h3 className=\"text-xl font-bold text-amber-900 mt-1\">\n                  {drillSowingDoneCount}\n                </h3>\n                <p className=\"text-xs text-amber-600 mt-1\">\n                  {irrigationWithinWeekCount} irrigated\n                </p>\n              </div>\n              <div className=\"h-10 w-10 rounded-full bg-amber-200 flex items-center justify-center\">\n                <Tractor className=\"h-5 w-5 text-amber-700\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"bg-gradient-to-br from-cyan-50 to-cyan-100 border-cyan-200\">\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-xs font-medium text-cyan-700\">\n                  Yellowing Issues\n                </p>\n                <h3 className=\"text-xl font-bold text-cyan-900 mt-1\">\n                  {yellowingIssuesCount}\n                </h3>\n              </div>\n              <div className=\"h-10 w-10 rounded-full bg-cyan-200 flex items-center justify-center\">\n                <AlertCircle className=\"h-5 w-5 text-cyan-700\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Filters and Controls */}\n      <Card>\n        <CardContent className=\"p-6\">\n          <div className=\"flex flex-col lg:flex-row gap-4 items-center\">\n            <div className=\"flex-1 w-full lg:w-auto\">\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4\" />\n                <Input\n                  placeholder=\"Search by crop name, health status, or weed type...\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  className=\"pl-10 w-full lg:w-[400px]\"\n                />\n              </div>\n            </div>\n\n            <div className=\"flex flex-wrap items-center gap-3\">\n              <div className=\"flex items-center gap-2\">\n                <Filter className=\"h-4 w-4 text-muted-foreground\" />\n                <Select value={filterField} onValueChange={setFilterField}>\n                  <SelectTrigger className=\"w-[180px]\">\n                    <SelectValue placeholder=\"Filter by field\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">All Fields</SelectItem>\n                    {uniqueFields.map((farmName) => (\n                      <SelectItem key={farmName} value={farmName}>\n                        {farmName}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <Tabs\n                value={activeTab}\n                onValueChange={setActiveTab}\n                className=\"w-auto\"\n              >\n                <TabsList>\n                  <TabsTrigger value=\"all\">All</TabsTrigger>\n                  <TabsTrigger value=\"issues\">With Issues</TabsTrigger>\n                  <TabsTrigger value=\"healthy\">Healthy Only</TabsTrigger>\n                  <TabsTrigger value=\"weeds\">Weeds Present</TabsTrigger>\n                  <TabsTrigger value=\"germination\">\n                    Germination{\" \"}\n                    <Badge className=\"ml-1\">{weedData.length}</Badge>\n                  </TabsTrigger>\n                </TabsList>\n              </Tabs>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Results Section */}\n      <div>\n        <div className=\"flex justify-between items-center mb-4\">\n          <h2 className=\"text-xl font-semibold\">\n            Crop Emergence Records\n            <span className=\"text-muted-foreground font-normal ml-2\">\n              ({filteredData.length}{\" \"}\n              {filteredData.length === 1 ? \"record\" : \"records\"})\n            </span>\n          </h2>\n          <p className=\"text-sm text-muted-foreground\">\n            Showing germination percentages, field practices, and crop health\n            data\n          </p>\n        </div>\n\n        {filteredData.length === 0 ? (\n          <Card>\n            <CardContent className=\"py-12 text-center\">\n              <h3 className=\"text-lg font-semibold text-gray-700 mb-2\">\n                No crop emergence data found\n              </h3>\n              <p className=\"text-gray-500 max-w-sm mx-auto\">\n                {searchQuery\n                  ? \"No records match your search criteria. Try different keywords.\"\n                  : \"No crop emergence data has been recorded yet.\"}\n              </p>\n            </CardContent>\n          </Card>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {filteredData.map(renderCard)}\n          </div>\n        )}\n      </div>\n\n      {/* Detail Modal */}\n      <Dialog open={isDetailModalOpen} onOpenChange={setIsDetailModalOpen}>\n        <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto\">\n          {renderDetailModal()}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 10933, "column": 0}, "map": {"version":3,"sources":["file:///D:/Nextjs/landdirectorateDashboardVersion1-main/landdirectorateDashboardVersion1-main/components/stage-forms/booting-form.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport {\r\n  Card, CardContent, CardHeader, CardTitle,\r\n} from '@/components/ui/card'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Label } from '@/components/ui/label'\r\nimport { Separator } from '@/components/ui/separator'\r\nimport {\r\n  Tabs, TabsList, TabsTrigger,\r\n} from '@/components/ui/tabs'\r\nimport {\r\n  Dialog, DialogContent, DialogHeader,\r\n  DialogTitle, DialogDescription, DialogFooter,\r\n} from '@/components/ui/dialog'\r\nimport {\r\n  Select, SelectContent, SelectItem,\r\n  SelectTrigger, SelectValue,\r\n} from '@/components/ui/select'\r\nimport { Skeleton } from '@/components/ui/skeleton'\r\n\r\nimport {\r\n  Wheat, Sprout, Leaf, AlertCircle, Search, Filter,\r\n  Calendar, Package, Eye, ChevronRight,\r\n  ThermometerSun, Thermometer, Droplet,\r\n  CloudRain, Sun, Cloud, Wind,\r\n} from 'lucide-react'\r\n\r\n/* ===================== TYPES ===================== */\r\n\r\nexport interface FarmData {\r\n  id: number\r\n  farm: number\r\n  farm_name: string\r\n  farmer_name: string\r\n  crop_name: string\r\n  variety: string\r\n  method_of_sowing: string\r\n  seed_rate: string\r\n  raya_sowing_date: string\r\n\r\n  germination_percentage: 'Good' | 'Average' | 'Poor'\r\n  germination_issues?: Record<string, string[]> | null\r\n\r\n  farm_picture?: string | null\r\n\r\n  max_temp_day?: number | null\r\n  min_temp_day?: number | null\r\n  avg_temp_night?: number | null\r\n  humidity?: number | null\r\n  precipitation?: number | null\r\n\r\n  seed_treatment?: boolean\r\n  seed_treatment_product?: string | null\r\n  soil_conditioner?: boolean\r\n  soil_conditioner_product?: string | null\r\n  bio_stimulant?: string | null\r\n  aphid_recommendation?: string | string[] | null\r\n}\r\n\r\n/* ===================== COMPONENT ===================== */\r\n\r\nexport function BootingForm() {\r\n  const [farmData, setFarmData] = useState<FarmData[]>([])\r\n  const [filteredFarms, setFilteredFarms] = useState<FarmData[]>([])\r\n  const [selectedFarm, setSelectedFarm] = useState<FarmData | null>(null)\r\n\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState<string | null>(null)\r\n\r\n  const [searchQuery, setSearchQuery] = useState('')\r\n  const [activeTab, setActiveTab] = useState<'all' | 'good' | 'average' | 'poor' | 'issues' | 'recent'>('all')\r\n  const [selectedFarmNumber, setSelectedFarmNumber] = useState('all')\r\n\r\n  const [isDetailModalOpen, setIsDetailModalOpen] = useState(false)\r\n\r\n  /* ===================== FETCH ===================== */\r\n\r\n  useEffect(() => {\r\n    fetchFarmData()\r\n  }, [])\r\n\r\n  const fetchFarmData = async () => {\r\n    try {\r\n      const token = localStorage.getItem('authToken')\r\n      if (!token) return\r\n\r\n      setLoading(true)\r\n\r\n      const res = await fetch(\r\n        'https://rda.ngrok.app/api/sowing-emergence-stageView/',\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n            'ngrok-skip-browser-warning': 'true',\r\n          },\r\n        }\r\n      )\r\n\r\n      if (!res.ok) throw new Error(`HTTP ${res.status}`)\r\n\r\n      const json = await res.json()\r\n\r\n      // ✅ NORMALIZE DATA (CRITICAL FIX)\r\n      const normalized: FarmData[] = (json.results || []).map((farm: FarmData) => ({\r\n        ...farm,\r\n        germination_issues: farm.germination_issues ?? {},\r\n      }))\r\n\r\n      setFarmData(normalized)\r\n      setFilteredFarms(normalized)\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to load data')\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  /* ===================== FILTERING ===================== */\r\n\r\n  useEffect(() => {\r\n    let results = [...farmData]\r\n\r\n    if (searchQuery.trim()) {\r\n      const q = searchQuery.toLowerCase()\r\n      results = results.filter(f =>\r\n        f.crop_name.toLowerCase().includes(q) ||\r\n        f.variety.toLowerCase().includes(q) ||\r\n        f.method_of_sowing.toLowerCase().includes(q) ||\r\n        f.farm.toString().includes(q)\r\n      )\r\n    }\r\n\r\n    if (selectedFarmNumber !== 'all') {\r\n      results = results.filter(f => f.farm.toString() === selectedFarmNumber)\r\n    }\r\n\r\n    if (activeTab === 'issues') {\r\n      results = results.filter(f => Object.keys(f.germination_issues ?? {}).length > 0)\r\n    } else if (activeTab !== 'all') {\r\n      results = results.filter(f => f.germination_percentage.toLowerCase() === activeTab)\r\n    }\r\n\r\n    setFilteredFarms(results)\r\n  }, [farmData, searchQuery, activeTab, selectedFarmNumber])\r\n\r\n  /* ===================== HELPERS ===================== */\r\n\r\n  const getGerminationColor = (status: string) => {\r\n    if (status === 'Good') return 'bg-green-100 text-green-800'\r\n    if (status === 'Average') return 'bg-yellow-100 text-yellow-800'\r\n    if (status === 'Poor') return 'bg-red-100 text-red-800'\r\n    return 'bg-gray-100'\r\n  }\r\n\r\n  const formatDate = (date: string) =>\r\n    new Date(date).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })\r\n\r\n  const parseAphidRecommendation = (rec: string | string[]) =>\r\n    Array.isArray(rec) ? rec : (() => {\r\n      try {\r\n        const parsed = JSON.parse(rec)\r\n        return Array.isArray(parsed) ? parsed : [rec]\r\n      } catch {\r\n        return [rec]\r\n      }\r\n    })()\r\n\r\n  /* ===================== UI ===================== */\r\n\r\n  if (loading) {\r\n    return <Skeleton className=\"h-64 w-full\" />\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Card>\r\n        <CardContent className=\"py-10 text-center text-red-600\">\r\n          <AlertCircle className=\"mx-auto mb-4\" />\r\n          <p>{error}</p>\r\n          <Button className=\"mt-4\" onClick={fetchFarmData}>Retry</Button>\r\n        </CardContent>\r\n      </Card>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <h2 className=\"text-3xl font-bold\">Sowing & Emergence Data</h2>\r\n\r\n      {/* SEARCH + FILTER */}\r\n      <div className=\"flex gap-4\">\r\n        <Input\r\n          placeholder=\"Search farms…\"\r\n          value={searchQuery}\r\n          onChange={e => setSearchQuery(e.target.value)}\r\n        />\r\n\r\n        <Tabs value={activeTab} onValueChange={v => setActiveTab(v as any)}>\r\n          <TabsList>\r\n            <TabsTrigger value=\"all\">All</TabsTrigger>\r\n            <TabsTrigger value=\"good\">Good</TabsTrigger>\r\n            <TabsTrigger value=\"average\">Average</TabsTrigger>\r\n            <TabsTrigger value=\"poor\">Poor</TabsTrigger>\r\n            <TabsTrigger value=\"issues\">Issues</TabsTrigger>\r\n          </TabsList>\r\n        </Tabs>\r\n      </div>\r\n\r\n      {/* CARDS */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n        {filteredFarms.map(farm => (\r\n          <Card key={farm.id} className=\"hover:shadow-lg transition\">\r\n            <CardContent className=\"p-5 space-y-3\">\r\n              <div className=\"flex justify-between\">\r\n                <h3 className=\"font-semibold\">{farm.crop_name}</h3>\r\n                <Badge className={getGerminationColor(farm.germination_percentage)}>\r\n                  {farm.germination_percentage}\r\n                </Badge>\r\n              </div>\r\n\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                Farm #{farm.farm} • {farm.farm_name}\r\n              </p>\r\n\r\n              <Separator />\r\n\r\n              <div className=\"flex justify-between text-sm\">\r\n                <span>Sowing Date</span>\r\n                <span>{formatDate(farm.raya_sowing_date)}</span>\r\n              </div>\r\n\r\n              <Button\r\n                variant=\"outline\"\r\n                className=\"w-full\"\r\n                onClick={() => {\r\n                  setSelectedFarm(farm)\r\n                  setIsDetailModalOpen(true)\r\n                }}\r\n              >\r\n                <Eye className=\"mr-2 h-4 w-4\" /> View Details\r\n              </Button>\r\n            </CardContent>\r\n          </Card>\r\n        ))}\r\n      </div>\r\n\r\n      {/* DETAIL MODAL */}\r\n      <Dialog open={isDetailModalOpen} onOpenChange={setIsDetailModalOpen}>\r\n        <DialogContent className=\"max-w-3xl\">\r\n          {selectedFarm && (\r\n            <>\r\n              <DialogHeader>\r\n                <DialogTitle>{selectedFarm.crop_name}</DialogTitle>\r\n                <DialogDescription>\r\n                  {selectedFarm.farm_name} • Farmer: {selectedFarm.farmer_name}\r\n                </DialogDescription>\r\n              </DialogHeader>\r\n\r\n              <Card>\r\n                <CardHeader>\r\n                  <CardTitle>Germination Issues</CardTitle>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  {Object.keys(selectedFarm.germination_issues ?? {}).length > 0 ? (\r\n                    Object.entries(selectedFarm.germination_issues ?? {}).map(([k, v]) => (\r\n                      <div key={k} className=\"mb-3\">\r\n                        <Label>{k}</Label>\r\n                        <div className=\"flex flex-wrap gap-2 mt-1\">\r\n                          {(v ?? []).map((issue, i) => (\r\n                            <Badge key={i} variant=\"outline\">{issue}</Badge>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                    ))\r\n                  ) : (\r\n                    <p className=\"text-muted-foreground\">No issues reported</p>\r\n                  )}\r\n                </CardContent>\r\n              </Card>\r\n\r\n              <DialogFooter>\r\n                <Button onClick={() => setIsDetailModalOpen(false)}>Close</Button>\r\n              </DialogFooter>\r\n            </>\r\n          )}\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAGA;AAQA;AAEA;AAAA;AAxBA;;;;;;;;;;;;;AAiEO,SAAS;IACd,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAa,EAAE;IACvD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAa,EAAE;IACjE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAkB;IAElE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAElD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAA4D;IACtG,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,iNAAQ,EAAC;IAE7D,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,iNAAQ,EAAC;IAE3D,qDAAqD,GAErD,IAAA,kNAAS,EAAC;QACR;IACF,GAAG,EAAE;IAEL,MAAM,gBAAgB;QACpB,IAAI;YACF,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,IAAI,CAAC,OAAO;YAEZ,WAAW;YAEX,MAAM,MAAM,MAAM,MAChB,yDACA;gBACE,SAAS;oBACP,eAAe,CAAC,OAAO,EAAE,OAAO;oBAChC,8BAA8B;gBAChC;YACF;YAGF,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,CAAC,KAAK,EAAE,IAAI,MAAM,EAAE;YAEjD,MAAM,OAAO,MAAM,IAAI,IAAI;YAE3B,kCAAkC;YAClC,MAAM,aAAyB,CAAC,KAAK,OAAO,IAAI,EAAE,EAAE,GAAG,CAAC,CAAC,OAAmB,CAAC;oBAC3E,GAAG,IAAI;oBACP,oBAAoB,KAAK,kBAAkB,IAAI,CAAC;gBAClD,CAAC;YAED,YAAY;YACZ,iBAAiB;QACnB,EAAE,OAAO,KAAK;YACZ,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;QAChD,SAAU;YACR,WAAW;QACb;IACF;IAEA,yDAAyD,GAEzD,IAAA,kNAAS,EAAC;QACR,IAAI,UAAU;eAAI;SAAS;QAE3B,IAAI,YAAY,IAAI,IAAI;YACtB,MAAM,IAAI,YAAY,WAAW;YACjC,UAAU,QAAQ,MAAM,CAAC,CAAA,IACvB,EAAE,SAAS,CAAC,WAAW,GAAG,QAAQ,CAAC,MACnC,EAAE,OAAO,CAAC,WAAW,GAAG,QAAQ,CAAC,MACjC,EAAE,gBAAgB,CAAC,WAAW,GAAG,QAAQ,CAAC,MAC1C,EAAE,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QAE/B;QAEA,IAAI,uBAAuB,OAAO;YAChC,UAAU,QAAQ,MAAM,CAAC,CAAA,IAAK,EAAE,IAAI,CAAC,QAAQ,OAAO;QACtD;QAEA,IAAI,cAAc,UAAU;YAC1B,UAAU,QAAQ,MAAM,CAAC,CAAA,IAAK,OAAO,IAAI,CAAC,EAAE,kBAAkB,IAAI,CAAC,GAAG,MAAM,GAAG;QACjF,OAAO,IAAI,cAAc,OAAO;YAC9B,UAAU,QAAQ,MAAM,CAAC,CAAA,IAAK,EAAE,sBAAsB,CAAC,WAAW,OAAO;QAC3E;QAEA,iBAAiB;IACnB,GAAG;QAAC;QAAU;QAAa;QAAW;KAAmB;IAEzD,uDAAuD,GAEvD,MAAM,sBAAsB,CAAC;QAC3B,IAAI,WAAW,QAAQ,OAAO;QAC9B,IAAI,WAAW,WAAW,OAAO;QACjC,IAAI,WAAW,QAAQ,OAAO;QAC9B,OAAO;IACT;IAEA,MAAM,aAAa,CAAC,OAClB,IAAI,KAAK,MAAM,kBAAkB,CAAC,SAAS;YAAE,OAAO;YAAS,KAAK;YAAW,MAAM;QAAU;IAE/F,MAAM,2BAA2B,CAAC,MAChC,MAAM,OAAO,CAAC,OAAO,MAAM,CAAC;YAC1B,IAAI;gBACF,MAAM,SAAS,KAAK,KAAK,CAAC;gBAC1B,OAAO,MAAM,OAAO,CAAC,UAAU,SAAS;oBAAC;iBAAI;YAC/C,EAAE,OAAM;gBACN,OAAO;oBAAC;iBAAI;YACd;QACF,CAAC;IAEH,kDAAkD,GAElD,IAAI,SAAS;QACX,qBAAO,8OAAC,yIAAQ;YAAC,WAAU;;;;;;IAC7B;IAEA,IAAI,OAAO;QACT,qBACE,8OAAC,iIAAI;sBACH,cAAA,8OAAC,wIAAW;gBAAC,WAAU;;kCACrB,8OAAC,mOAAW;wBAAC,WAAU;;;;;;kCACvB,8OAAC;kCAAG;;;;;;kCACJ,8OAAC,qIAAM;wBAAC,WAAU;wBAAO,SAAS;kCAAe;;;;;;;;;;;;;;;;;IAIzD;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAqB;;;;;;0BAGnC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,mIAAK;wBACJ,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAA,IAAK,eAAe,EAAE,MAAM,CAAC,KAAK;;;;;;kCAG9C,8OAAC,iIAAI;wBAAC,OAAO;wBAAW,eAAe,CAAA,IAAK,aAAa;kCACvD,cAAA,8OAAC,qIAAQ;;8CACP,8OAAC,wIAAW;oCAAC,OAAM;8CAAM;;;;;;8CACzB,8OAAC,wIAAW;oCAAC,OAAM;8CAAO;;;;;;8CAC1B,8OAAC,wIAAW;oCAAC,OAAM;8CAAU;;;;;;8CAC7B,8OAAC,wIAAW;oCAAC,OAAM;8CAAO;;;;;;8CAC1B,8OAAC,wIAAW;oCAAC,OAAM;8CAAS;;;;;;;;;;;;;;;;;;;;;;;0BAMlC,8OAAC;gBAAI,WAAU;0BACZ,cAAc,GAAG,CAAC,CAAA,qBACjB,8OAAC,iIAAI;wBAAe,WAAU;kCAC5B,cAAA,8OAAC,wIAAW;4BAAC,WAAU;;8CACrB,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAG,WAAU;sDAAiB,KAAK,SAAS;;;;;;sDAC7C,8OAAC,mIAAK;4CAAC,WAAW,oBAAoB,KAAK,sBAAsB;sDAC9D,KAAK,sBAAsB;;;;;;;;;;;;8CAIhC,8OAAC;oCAAE,WAAU;;wCAAgC;wCACpC,KAAK,IAAI;wCAAC;wCAAI,KAAK,SAAS;;;;;;;8CAGrC,8OAAC,2IAAS;;;;;8CAEV,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;sDAAK;;;;;;sDACN,8OAAC;sDAAM,WAAW,KAAK,gBAAgB;;;;;;;;;;;;8CAGzC,8OAAC,qIAAM;oCACL,SAAQ;oCACR,WAAU;oCACV,SAAS;wCACP,gBAAgB;wCAChB,qBAAqB;oCACvB;;sDAEA,8OAAC,uMAAG;4CAAC,WAAU;;;;;;wCAAiB;;;;;;;;;;;;;uBA5B3B,KAAK,EAAE;;;;;;;;;;0BAoCtB,8OAAC,qIAAM;gBAAC,MAAM;gBAAmB,cAAc;0BAC7C,cAAA,8OAAC,4IAAa;oBAAC,WAAU;8BACtB,8BACC;;0CACE,8OAAC,2IAAY;;kDACX,8OAAC,0IAAW;kDAAE,aAAa,SAAS;;;;;;kDACpC,8OAAC,gJAAiB;;4CACf,aAAa,SAAS;4CAAC;4CAAY,aAAa,WAAW;;;;;;;;;;;;;0CAIhE,8OAAC,iIAAI;;kDACH,8OAAC,uIAAU;kDACT,cAAA,8OAAC,sIAAS;sDAAC;;;;;;;;;;;kDAEb,8OAAC,wIAAW;kDACT,OAAO,IAAI,CAAC,aAAa,kBAAkB,IAAI,CAAC,GAAG,MAAM,GAAG,IAC3D,OAAO,OAAO,CAAC,aAAa,kBAAkB,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,iBAC/D,8OAAC;gDAAY,WAAU;;kEACrB,8OAAC,mIAAK;kEAAE;;;;;;kEACR,8OAAC;wDAAI,WAAU;kEACZ,CAAC,KAAK,EAAE,EAAE,GAAG,CAAC,CAAC,OAAO,kBACrB,8OAAC,mIAAK;gEAAS,SAAQ;0EAAW;+DAAtB;;;;;;;;;;;+CAJR;;;;sEAUZ,8OAAC;4CAAE,WAAU;sDAAwB;;;;;;;;;;;;;;;;;0CAK3C,8OAAC,2IAAY;0CACX,cAAA,8OAAC,qIAAM;oCAAC,SAAS,IAAM,qBAAqB;8CAAQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQpE"}}]
}