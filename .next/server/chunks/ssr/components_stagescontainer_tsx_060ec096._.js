module.exports=[96728,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(21958),e=a.i(3130),f=a.i(40695),g=a.i(5522),h=a.i(54161),i=a.i(7379),j=a.i(17171),k=a.i(65733),l=a.i(87682),m=a.i(24987),n=a.i(41675),o=a.i(46007),p=a.i(70047),q=a.i(16201);let r=(0,a.i(70106).default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var s=a.i(50522),t=a.i(77156),u=a.i(81464),v=a.i(87532),w=a.i(84505),x=a.i(39761),y=a.i(35050),z=a.i(92e3),A=a.i(83497),B=a.i(41710),C=a.i(50463);function D(){let[a,D]=(0,c.useState)([]),[E,F]=(0,c.useState)([]),[G,H]=(0,c.useState)(null),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(!0),[M,N]=(0,c.useState)(null),[O,P]=(0,c.useState)(""),[Q,R]=(0,c.useState)("all"),[S,T]=(0,c.useState)("all"),[U,V]=(0,c.useState)(1),[W,X]=(0,c.useState)(!1),Y=a.length,Z=a.filter(a=>a.land_prepared).length,$=a.filter(a=>!a.land_prepared).length,_=[...new Set(a.map(a=>a.field))].length,aa=Array.from(new Map(a.map(a=>[a.field,{id:a.field,field_name:a.field_name}])).values());(0,c.useEffect)(()=>{ab()},[]),(0,c.useEffect)(()=>{let b=[...a];if(""!==O.trim()){let a=O.toLowerCase();b=b.filter(b=>b.crop_name.toLowerCase().includes(a)||b.organic_amendments_used.toLowerCase().includes(a)||b.methods_used.toLowerCase().includes(a))}if("all"!==Q){let a=parseInt(Q);b=b.filter(b=>b.field===a)}"prepared"===S?b=b.filter(a=>a.land_prepared):"not-prepared"===S?b=b.filter(a=>!a.land_prepared):"burnt"===S?b=b.filter(a=>"burnt"===a.residue_management):"incorporated"===S&&(b=b.filter(a=>"incorporated"===a.residue_management)),F(b)},[O,Q,S,a]);let ab=async()=>{try{return L(!0),void N("No authentication token found")}catch(a){N(a instanceof Error?a.message:"Failed to fetch data"),console.error("Error fetching land preparation data:",a)}finally{L(!1)}},ac=async()=>{try{return}catch(a){console.error("Error loading more data:",a)}},ad=a=>a?"bg-green-100 text-green-800":"bg-red-100 text-red-800",ae=a=>{switch(a?.toLowerCase()){case"burnt":return"bg-orange-100 text-orange-800";case"incorporated":return"bg-green-100 text-green-800";case"removed":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},af=a=>a?new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Not specified",ag=a=>a.includes("[object Object]")?"Various methods":a.split(",").map(a=>a.trim()).filter(Boolean),ah=a=>a.includes("[object Object]")?"Various organic amendments":a.split(",").map(a=>a.trim()).filter(Boolean);return K?(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(C.Skeleton,{className:"h-10 w-48"}),(0,b.jsx)(C.Skeleton,{className:"h-4 w-64 mt-2"})]}),(0,b.jsx)(C.Skeleton,{className:"h-10 w-32"})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[1,2,3,4].map(a=>(0,b.jsx)(C.Skeleton,{className:"h-32 rounded-lg"},a))}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(a=>(0,b.jsx)(C.Skeleton,{className:"h-64 rounded-lg"},a))})]}):M?(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"text-center py-8 text-red-500",children:[(0,b.jsx)(z.AlertCircle,{className:"h-12 w-12 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-lg font-semibold",children:"Error Loading Data"}),(0,b.jsx)("p",{className:"text-sm mt-2",children:M}),(0,b.jsx)(f.Button,{onClick:ab,className:"mt-4",children:"Retry"})]})})}):(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Land Preparation Records"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-2",children:"Track land preparation activities, methods used, and residue management"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(w.Download,{className:"h-4 w-4 mr-2"}),"Export"]}),(0,b.jsxs)(f.Button,{size:"sm",onClick:ab,children:[(0,b.jsx)(x.BarChart3,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,b.jsx)(e.Card,{className:"bg-gradient-to-br from-amber-50 to-amber-100 border-amber-200",children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-amber-700",children:"Total Records"}),(0,b.jsx)("h3",{className:"text-2xl font-bold text-amber-900 mt-2",children:Y})]}),(0,b.jsx)("div",{className:"h-12 w-12 rounded-full bg-amber-200 flex items-center justify-center",children:(0,b.jsx)(m.MapPin,{className:"h-6 w-6 text-amber-700"})})]})})}),(0,b.jsx)(e.Card,{className:"bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:(0,b.jsxs)(e.CardContent,{className:"pt-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-green-700",children:"Land Prepared"}),(0,b.jsx)("h3",{className:"text-2xl font-bold text-green-900 mt-2",children:Z})]}),(0,b.jsx)("div",{className:"h-12 w-12 rounded-full bg-green-200 flex items-center justify-center",children:(0,b.jsx)(q.CheckCircle,{className:"h-6 w-6 text-green-700"})})]}),(0,b.jsxs)("p",{className:"text-xs text-green-600 mt-2",children:[Y>0?(Z/Y*100).toFixed(1):0,"% of total"]})]})}),(0,b.jsx)(e.Card,{className:"bg-gradient-to-br from-red-50 to-red-100 border-red-200",children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-red-700",children:"Not Prepared"}),(0,b.jsx)("h3",{className:"text-2xl font-bold text-red-900 mt-2",children:$})]}),(0,b.jsx)("div",{className:"h-12 w-12 rounded-full bg-red-200 flex items-center justify-center",children:(0,b.jsx)(r,{className:"h-6 w-6 text-red-700"})})]})})}),(0,b.jsx)(e.Card,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-blue-700",children:"Active Fields"}),(0,b.jsx)("h3",{className:"text-2xl font-bold text-blue-900 mt-2",children:_})]}),(0,b.jsx)("div",{className:"h-12 w-12 rounded-full bg-blue-200 flex items-center justify-center",children:(0,b.jsx)(o.Sprout,{className:"h-6 w-6 text-blue-700"})})]})})})]}),(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4 items-center",children:[(0,b.jsx)("div",{className:"flex-1 w-full lg:w-auto",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(v.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,b.jsx)(g.Input,{placeholder:"Search by crop name, organic amendments, or methods...",value:O,onChange:a=>P(a.target.value),className:"pl-10 w-full lg:w-[400px]"})]})}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(u.Filter,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)(l.Select,{value:Q,onValueChange:R,children:[(0,b.jsx)(l.SelectTrigger,{className:"w-[180px]",children:(0,b.jsx)(l.SelectValue,{placeholder:"Filter by field"})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"all",children:"All Fields"}),aa.map(a=>(0,b.jsx)(l.SelectItem,{value:a.id.toString(),className:"capitalize",children:a.field_name},a.id))]})]})]}),(0,b.jsx)(d.Tabs,{value:S,onValueChange:T,className:"w-auto",children:(0,b.jsxs)(d.TabsList,{children:[(0,b.jsx)(d.TabsTrigger,{value:"all",children:"All"}),(0,b.jsx)(d.TabsTrigger,{value:"prepared",children:"Prepared"}),(0,b.jsx)(d.TabsTrigger,{value:"not-prepared",children:"Not Prepared"}),(0,b.jsx)(d.TabsTrigger,{value:"burnt",children:"Burnt Residue"})]})})]})]})})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,b.jsxs)("h2",{className:"text-xl font-semibold",children:["Land Preparation Records",(0,b.jsxs)("span",{className:"text-muted-foreground font-normal ml-2",children:["(",E.length," ",1===E.length?"record":"records",")"]})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Sorted by latest preparation date"})]}),0===E.length?(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"py-12 text-center",children:[(0,b.jsx)(m.MapPin,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No land preparation data found"}),(0,b.jsx)("p",{className:"text-gray-500 max-w-sm mx-auto",children:O?"No records match your search criteria. Try different keywords.":"No land preparation data has been recorded yet."})]})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:E.map(a=>{let c=ag(a.methods_used),d=ah(a.organic_amendments_used);return(0,b.jsx)(e.Card,{className:"group hover:shadow-lg transition-all duration-300 hover:border-primary/30 overflow-hidden",children:(0,b.jsxs)(e.CardContent,{className:"p-0",children:[(0,b.jsx)("div",{className:a.land_prepared?"bg-gradient-to-r from-amber-50 to-amber-100 p-5":"bg-gradient-to-r from-red-50 to-red-100 p-5",children:(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 line-clamp-1 capitalize",children:a.crop_name}),(0,b.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Record #",a.id," •",a.field_name]})]}),(0,b.jsx)(h.Badge,{className:ad(a.land_prepared),children:a.land_prepared?"Prepared":"Not Prepared"})]})}),(0,b.jsxs)("div",{className:"p-5",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,b.jsx)(n.Calendar,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"text-sm",children:"Preparation Date"})]}),(0,b.jsx)("span",{className:"font-medium",children:af(a.preparation_date)})]}),a.land_prepared?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"text-sm font-medium text-gray-700 mb-2",children:"Organic Amendments"}),(0,b.jsx)("div",{className:"bg-green-50 p-3 rounded-lg",children:Array.isArray(d)?(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:d.map((a,c)=>(0,b.jsx)(h.Badge,{variant:"outline",className:"bg-white",children:a},c))}):(0,b.jsx)("span",{className:"text-sm",children:d})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,b.jsx)(p.Leaf,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"text-sm",children:"Residue Management"})]}),(0,b.jsx)(h.Badge,{className:ae(a.residue_management),children:a.residue_management_display||"Not specified"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"text-sm font-medium text-gray-700 mb-2",children:"Methods Used"}),(0,b.jsx)("div",{className:"bg-gray-50 p-3 rounded-lg",children:Array.isArray(c)?(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:c.map((a,c)=>(0,b.jsx)(h.Badge,{variant:"secondary",className:"text-xs",children:a},c))}):(0,b.jsx)("span",{className:"text-sm",children:c})})]}),a.expected_sowing_date&&(0,b.jsxs)("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[(0,b.jsxs)("h4",{className:"text-sm font-medium text-blue-800 mb-1 flex items-center gap-1",children:[(0,b.jsx)(B.Clock,{className:"h-4 w-4"}),"Expected Sowing Date"]}),(0,b.jsx)("p",{className:"text-sm text-blue-700",children:af(a.expected_sowing_date)})]})]}):(0,b.jsxs)("div",{className:"mt-4 p-3 bg-red-50 rounded-lg border border-red-200",children:[(0,b.jsxs)("h4",{className:"text-sm font-medium text-red-800 mb-1 flex items-center gap-1",children:[(0,b.jsx)(z.AlertCircle,{className:"h-4 w-4"}),"Reason Not Prepared"]}),(0,b.jsx)("p",{className:"text-sm text-red-700",children:a.reason_not_prepared||"No reason provided"})]})]}),(0,b.jsxs)(f.Button,{onClick:()=>{H(a),J(!0)},variant:"outline",className:"w-full mt-4 gap-2 group-hover:border-primary",children:[(0,b.jsx)(t.Eye,{className:"h-4 w-4"}),"View Full Details",(0,b.jsx)(s.ChevronRight,{className:"h-4 w-4"})]})]}),(0,b.jsx)(e.CardFooter,{className:"border-t pt-4 flex justify-between text-sm text-gray-500",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:`w-2 h-2 rounded-full ${a.land_prepared?"bg-amber-500":"bg-red-500"}`}),(0,b.jsxs)("span",{children:["Field ",a.field]})]})})]})},a.id)})}),W&&(0,b.jsx)("div",{className:"mt-8 text-center",children:(0,b.jsx)(f.Button,{variant:"outline",onClick:ac,children:"Load More Records"})})]})]}),(0,b.jsx)(k.Dialog,{open:I,onOpenChange:J,children:(0,b.jsx)(k.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:(()=>{if(!G)return null;let a=ag(G.methods_used),c=ah(G.organic_amendments_used);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.DialogHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)(k.DialogTitle,{className:"text-2xl flex items-center gap-2",children:[(0,b.jsx)(m.MapPin,{className:"h-6 w-6 text-primary"}),"Land Preparation #",G.id]}),(0,b.jsxs)(k.DialogDescription,{children:["Complete land preparation details • Field ",G.field]})]}),(0,b.jsx)(h.Badge,{className:ad(G.land_prepared),children:G.land_prepared?"Prepared":"Not Prepared"})]})}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(y.Wheat,{className:"h-5 w-5 text-green-600"}),"Crop & Field Details"]})}),(0,b.jsxs)(e.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"text-sm text-muted-foreground",children:"Crop Name"}),(0,b.jsx)("p",{className:"font-medium capitalize",children:G.crop_name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"text-sm text-muted-foreground",children:"Field"}),(0,b.jsxs)("p",{className:"font-medium",children:["Field ",G.field]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"text-sm text-muted-foreground",children:"Field Name"}),(0,b.jsx)("p",{className:"font-medium",children:G.field_name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"text-sm text-muted-foreground",children:"Land Prepared"}),(0,b.jsx)("div",{className:"flex items-center gap-1",children:G.land_prepared?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(q.CheckCircle,{className:"h-4 w-4 text-green-500"}),(0,b.jsx)("span",{className:"text-green-600 font-medium",children:"Yes"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(r,{className:"h-4 w-4 text-red-500"}),(0,b.jsx)("span",{className:"text-red-600",children:"No"})]})})]})]}),(0,b.jsx)(i.Separator,{}),(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"text-sm text-muted-foreground mb-2",children:"Preparation Date"}),(0,b.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg flex items-center gap-2",children:[(0,b.jsx)(n.Calendar,{className:"h-4 w-4 text-gray-500"}),(0,b.jsx)("span",{className:"font-medium",children:af(G.preparation_date)})]})]})]})]}),G.land_prepared?(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(A.Package,{className:"h-5 w-5 text-amber-600"}),"Preparation Methods"]})}),(0,b.jsxs)(e.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"font-medium text-gray-700 mb-2",children:"Methods Used"}),(0,b.jsx)("div",{className:"bg-gray-50 p-3 rounded-lg",children:Array.isArray(a)&&a.length>0?(0,b.jsx)("div",{className:"space-y-2",children:a.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),(0,b.jsx)("span",{className:"text-sm",children:a})]},c))}):(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"No methods specified"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"font-medium text-gray-700 mb-2",children:"Organic Amendments"}),(0,b.jsx)("div",{className:"bg-green-50 p-3 rounded-lg",children:Array.isArray(c)&&c.length>0?(0,b.jsx)("div",{className:"space-y-2",children:c.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500"}),(0,b.jsx)("span",{className:"text-sm",children:a})]},c))}):(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"No organic amendments specified"})})]})]})]}):(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(z.AlertCircle,{className:"h-5 w-5 text-red-600"}),"Reason Not Prepared"]})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(z.AlertCircle,{className:"h-6 w-6 text-red-600 mt-1"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-red-800 mb-1",children:"Reason for Not Preparing Land"}),(0,b.jsx)("p",{className:"text-red-700",children:G.reason_not_prepared||"No reason provided"})]})]})})})]})]}),G.land_prepared&&(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(p.Leaf,{className:"h-5 w-5 text-blue-600"}),"Residue Management"]})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"space-y-3",children:(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"font-medium text-gray-700 mb-2",children:"Management Method"}),(0,b.jsx)("div",{className:`p-3 rounded-lg ${ae(G.residue_management)}`,children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"font-medium",children:G.residue_management_display||"Not specified"}),(0,b.jsx)(h.Badge,{variant:"outline",className:"bg-white",children:G.residue_management||"N/A"})]})})]})})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(n.Calendar,{className:"h-5 w-5 text-purple-600"}),"Sowing Schedule"]})}),(0,b.jsx)(e.CardContent,{children:G.expected_sowing_date?(0,b.jsx)("div",{className:"space-y-3",children:(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"font-medium text-gray-700 mb-2",children:"Expected Sowing Date"}),(0,b.jsx)("div",{className:"bg-purple-50 p-3 rounded-lg",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(n.Calendar,{className:"h-4 w-4 text-purple-600"}),(0,b.jsx)("span",{className:"font-medium",children:af(G.expected_sowing_date)})]})})]})}):(0,b.jsx)("div",{className:"text-center py-4 text-gray-500",children:"No sowing date specified"})})]})]})}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(B.Clock,{className:"h-5 w-5 text-gray-600"}),"Timeline Information"]})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"font-medium text-gray-700 mb-2",children:"Record Created"}),(0,b.jsx)("div",{className:"bg-gray-50 p-3 rounded-lg",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(n.Calendar,{className:"h-4 w-4 text-gray-500"}),(0,b.jsx)("span",{children:af(G.created_at)})]})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"font-medium text-gray-700 mb-2",children:"Record ID"}),(0,b.jsx)("div",{className:"bg-gray-50 p-3 rounded-lg",children:(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("span",{className:"font-medium",children:["#",G.id]}),(0,b.jsx)(h.Badge,{variant:"outline",children:"Land Prep"})]})})]})]})})]}),(0,b.jsxs)(k.DialogFooter,{children:[(0,b.jsx)(f.Button,{variant:"outline",onClick:()=>J(!1),children:"Close"}),(0,b.jsx)(f.Button,{children:"Export Report"})]})]})]})})()})})]})}function E(){let[a,l]=(0,c.useState)([]),[m,n]=(0,c.useState)([]),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(!0),[s,u]=(0,c.useState)(null),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)("all"),[A,B]=(0,c.useState)("all"),[D,E]=(0,c.useState)(!1);(0,c.useEffect)(()=>{F()},[]);let F=async()=>{try{let a=localStorage.getItem("authToken");if(!a)return;r(!0);let b=await fetch("https://rda.ngrok.app/api/sowing-emergence-stageView/",{headers:{Authorization:`Bearer ${a}`,"ngrok-skip-browser-warning":"true"}});if(!b.ok)throw Error(`HTTP ${b.status}`);let c=((await b.json()).results||[]).map(a=>({...a,germination_issues:a.germination_issues??{}}));l(c),n(c)}catch(a){u(a instanceof Error?a.message:"Failed to load data")}finally{r(!1)}};return((0,c.useEffect)(()=>{let b=[...a];if(v.trim()){let a=v.toLowerCase();b=b.filter(b=>b.crop_name.toLowerCase().includes(a)||b.variety.toLowerCase().includes(a)||b.method_of_sowing.toLowerCase().includes(a)||b.farm.toString().includes(a))}"all"!==A&&(b=b.filter(a=>a.farm.toString()===A)),"issues"===x?b=b.filter(a=>Object.keys(a.germination_issues??{}).length>0):"all"!==x&&(b=b.filter(a=>a.germination_percentage.toLowerCase()===x)),n(b)},[a,v,x,A]),q)?(0,b.jsx)(C.Skeleton,{className:"h-64 w-full"}):s?(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"py-10 text-center text-red-600",children:[(0,b.jsx)(z.AlertCircle,{className:"mx-auto mb-4"}),(0,b.jsx)("p",{children:s}),(0,b.jsx)(f.Button,{className:"mt-4",onClick:F,children:"Retry"})]})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("h2",{className:"text-3xl font-bold",children:"Sowing & Emergence Data"}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)(g.Input,{placeholder:"Search farms…",value:v,onChange:a=>w(a.target.value)}),(0,b.jsx)(d.Tabs,{value:x,onValueChange:a=>y(a),children:(0,b.jsxs)(d.TabsList,{children:[(0,b.jsx)(d.TabsTrigger,{value:"all",children:"All"}),(0,b.jsx)(d.TabsTrigger,{value:"good",children:"Good"}),(0,b.jsx)(d.TabsTrigger,{value:"average",children:"Average"}),(0,b.jsx)(d.TabsTrigger,{value:"poor",children:"Poor"}),(0,b.jsx)(d.TabsTrigger,{value:"issues",children:"Issues"})]})})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(a=>{var c;return(0,b.jsx)(e.Card,{className:"hover:shadow-lg transition",children:(0,b.jsxs)(e.CardContent,{className:"p-5 space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("h3",{className:"font-semibold",children:a.crop_name}),(0,b.jsx)(h.Badge,{className:"Good"===(c=a.germination_percentage)?"bg-green-100 text-green-800":"Average"===c?"bg-yellow-100 text-yellow-800":"Poor"===c?"bg-red-100 text-red-800":"bg-gray-100",children:a.germination_percentage})]}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Farm #",a.farm," • ",a.farm_name]}),(0,b.jsx)(i.Separator,{}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{children:"Sowing Date"}),(0,b.jsx)("span",{children:new Date(a.raya_sowing_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]}),(0,b.jsxs)(f.Button,{variant:"outline",className:"w-full",onClick:()=>{p(a),E(!0)},children:[(0,b.jsx)(t.Eye,{className:"mr-2 h-4 w-4"})," View Details"]})]})},a.id)})}),(0,b.jsx)(k.Dialog,{open:D,onOpenChange:E,children:(0,b.jsx)(k.DialogContent,{className:"max-w-3xl",children:o&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(k.DialogHeader,{children:[(0,b.jsx)(k.DialogTitle,{children:o.crop_name}),(0,b.jsxs)(k.DialogDescription,{children:[o.farm_name," • Farmer: ",o.farmer_name]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsx)(e.CardTitle,{children:"Germination Issues"})}),(0,b.jsx)(e.CardContent,{children:Object.keys(o.germination_issues??{}).length>0?Object.entries(o.germination_issues??{}).map(([a,c])=>(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsx)(j.Label,{children:a}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:(c??[]).map((a,c)=>(0,b.jsx)(h.Badge,{variant:"outline",children:a},c))})]},a)):(0,b.jsx)("p",{className:"text-muted-foreground",children:"No issues reported"})})]}),(0,b.jsx)(k.DialogFooter,{children:(0,b.jsx)(f.Button,{onClick:()=>E(!1),children:"Close"})})]})})})]})}var F=a.i(99806);function G(){let[a,m]=(0,c.useState)([]),[B,D]=(0,c.useState)([]),[E,G]=(0,c.useState)(null),[H,I]=(0,c.useState)(!1),[J,K]=(0,c.useState)(!0),[L,M]=(0,c.useState)(null),[N,O]=(0,c.useState)(""),[P,Q]=(0,c.useState)("all"),[R,S]=(0,c.useState)("all"),T=a.length,U=a.filter(a=>"Healthy"===a.crop_health||"healthy"===a.crop_health).length,V=a.filter(a=>a.weeds_present).length,W=a.filter(a=>"Yes"===a.yellowing_observed).length,X=Array.from(new Set(a.map(a=>a.crop_name))).map(a=>({id:a,name:a}));(0,c.useEffect)(()=>{Y()},[]),(0,c.useEffect)(()=>{let b=[...a];if(""!==N.trim()){let a=N.toLowerCase();b=b.filter(b=>b.crop_name.toLowerCase().includes(a)||b.fertilizer_type.toLowerCase().includes(a)||b.bio_stimulant_product.toLowerCase().includes(a))}"all"!==P&&(b=b.filter(a=>a.crop_name===P)),"issues"===R?b=b.filter(a=>"Yes"===a.yellowing_observed||a.weeds_present):"healthy"===R?b=b.filter(a=>"Healthy"===a.crop_health||"healthy"===a.crop_health):"yellowing"===R&&(b=b.filter(a=>"Yes"===a.yellowing_observed)),D(b)},[N,P,R,a]);let Y=async()=>{try{return K(!0),void M("No authentication token found")}catch(a){M(a instanceof Error?a.message:"Failed to fetch data"),console.error("Error fetching growth & tillering data:",a)}finally{K(!1)}},Z=a=>{switch(a.toLowerCase()){case"healthy":return"bg-green-100 text-green-800";case"fair":return"bg-yellow-100 text-yellow-800";case"stressed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},$=a=>a.includes("<")||a.includes("less")?"text-blue-600":a.includes("6-12")?"text-green-600":"text-amber-600",_=a=>a.includes("less_than_6_inches")||"<6"===a?"Less than 6 inches":a,aa=a=>"Yes"===a?"bg-red-100 text-red-800":"bg-green-100 text-green-800",ab=a=>"Yes"===a?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800",ac=a=>(0,b.jsx)("div",{className:"flex items-center gap-1",children:"Yes"===a?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(q.CheckCircle,{className:"h-4 w-4 text-green-500"}),(0,b.jsx)("span",{className:"text-green-600 font-medium",children:"Yes"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(r,{className:"h-4 w-4 text-gray-400"}),(0,b.jsx)("span",{className:"text-gray-500",children:"No"})]})}),ad=a=>(0,b.jsx)("div",{className:"flex items-center gap-1",children:a?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(q.CheckCircle,{className:"h-4 w-4 text-green-500"}),(0,b.jsx)("span",{className:"text-green-600 font-medium",children:"Yes"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(r,{className:"h-4 w-4 text-gray-400"}),(0,b.jsx)("span",{className:"text-gray-500",children:"No"})]})});return J?(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(C.Skeleton,{className:"h-10 w-48"}),(0,b.jsx)(C.Skeleton,{className:"h-4 w-64 mt-2"})]}),(0,b.jsx)(C.Skeleton,{className:"h-10 w-32"})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[1,2,3,4].map(a=>(0,b.jsx)(C.Skeleton,{className:"h-32 rounded-lg"},a))}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(a=>(0,b.jsx)(C.Skeleton,{className:"h-64 rounded-lg"},a))})]}):L?(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"text-center py-8 text-red-500",children:[(0,b.jsx)(z.AlertCircle,{className:"h-12 w-12 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-lg font-semibold",children:"Error Loading Data"}),(0,b.jsx)("p",{className:"text-sm mt-2",children:L}),(0,b.jsx)(f.Button,{onClick:Y,className:"mt-4",children:"Retry"})]})})}):(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Growth & Tillering Stage"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-2",children:"Monitor crop development, fertilizer applications, and pest management"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(w.Download,{className:"h-4 w-4 mr-2"}),"Export"]}),(0,b.jsxs)(f.Button,{size:"sm",onClick:Y,children:[(0,b.jsx)(x.BarChart3,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,b.jsx)(e.Card,{className:"bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-green-700",children:"Total Records"}),(0,b.jsx)("h3",{className:"text-2xl font-bold text-green-900 mt-2",children:T})]}),(0,b.jsx)("div",{className:"h-12 w-12 rounded-full bg-green-200 flex items-center justify-center",children:(0,b.jsx)(o.Sprout,{className:"h-6 w-6 text-green-700"})})]})})}),(0,b.jsx)(e.Card,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:(0,b.jsxs)(e.CardContent,{className:"pt-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-blue-700",children:"Healthy Crops"}),(0,b.jsx)("h3",{className:"text-2xl font-bold text-blue-900 mt-2",children:U})]}),(0,b.jsx)("div",{className:"h-12 w-12 rounded-full bg-blue-200 flex items-center justify-center",children:(0,b.jsx)(q.CheckCircle,{className:"h-6 w-6 text-blue-700"})})]}),(0,b.jsxs)("p",{className:"text-xs text-blue-600 mt-2",children:[T>0?(U/T*100).toFixed(1):0,"% of total"]})]})}),(0,b.jsx)(e.Card,{className:"bg-gradient-to-br from-red-50 to-red-100 border-red-200",children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-red-700",children:"Weeds Present"}),(0,b.jsx)("h3",{className:"text-2xl font-bold text-red-900 mt-2",children:V})]}),(0,b.jsx)("div",{className:"h-12 w-12 rounded-full bg-red-200 flex items-center justify-center",children:(0,b.jsx)(p.Leaf,{className:"h-6 w-6 text-red-700"})})]})})}),(0,b.jsx)(e.Card,{className:"bg-gradient-to-br from-amber-50 to-amber-100 border-amber-200",children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-amber-700",children:"Yellowing Observed"}),(0,b.jsx)("h3",{className:"text-2xl font-bold text-amber-900 mt-2",children:W})]}),(0,b.jsx)("div",{className:"h-12 w-12 rounded-full bg-amber-200 flex items-center justify-center",children:(0,b.jsx)(z.AlertCircle,{className:"h-6 w-6 text-amber-700"})})]})})})]}),(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4 items-center",children:[(0,b.jsx)("div",{className:"flex-1 w-full lg:w-auto",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(v.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,b.jsx)(g.Input,{placeholder:"Search by crop name, fertilizer type, or bio stimulant...",value:N,onChange:a=>O(a.target.value),className:"pl-10 w-full lg:w-[400px]"})]})}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(u.Filter,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)(l.Select,{value:P,onValueChange:Q,children:[(0,b.jsx)(l.SelectTrigger,{className:"w-[180px]",children:(0,b.jsx)(l.SelectValue,{placeholder:"Filter by crop"})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"all",children:"All Crops"}),X.map(a=>(0,b.jsx)(l.SelectItem,{value:a.id,children:a.name},a.id))]})]})]}),(0,b.jsx)(d.Tabs,{value:R,onValueChange:S,className:"w-auto",children:(0,b.jsxs)(d.TabsList,{children:[(0,b.jsx)(d.TabsTrigger,{value:"all",children:"All"}),(0,b.jsx)(d.TabsTrigger,{value:"issues",children:"With Issues"}),(0,b.jsx)(d.TabsTrigger,{value:"healthy",children:"Healthy Only"}),(0,b.jsx)(d.TabsTrigger,{value:"yellowing",children:"Yellowing Observed"})]})})]})]})})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,b.jsxs)("h2",{className:"text-xl font-semibold",children:["Growth & Tillering Records",(0,b.jsxs)("span",{className:"text-muted-foreground font-normal ml-2",children:["(",B.length," ",1===B.length?"record":"records",")"]})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Sorted by latest date"})]}),0===B.length?(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"py-12 text-center",children:[(0,b.jsx)(o.Sprout,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No growth & tillering data found"}),(0,b.jsx)("p",{className:"text-gray-500 max-w-sm mx-auto",children:N?"No records match your search criteria. Try different keywords.":"No growth & tillering data has been recorded yet."})]})}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:B.map(a=>(0,b.jsx)(e.Card,{className:"group hover:shadow-lg transition-all duration-300 hover:border-primary/30 overflow-hidden",children:(0,b.jsxs)(e.CardContent,{className:"p-0",children:[(0,b.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 p-5",children:(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 line-clamp-1",children:a.crop_name}),(0,b.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Record #",a.id," ",a.farm&&`• Farm ${a.farm}`]})]}),(0,b.jsx)(h.Badge,{className:Z(a.crop_health),children:a.crop_health})]})}),(0,b.jsxs)("div",{className:"p-5",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)("div",{className:"space-y-2",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,b.jsx)(A.Package,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"text-sm",children:"Fertilizer"})]}),(0,b.jsx)(h.Badge,{variant:"outline",className:"capitalize",children:a.fertilizer_type})]})}),(0,b.jsx)("div",{className:"space-y-2",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,b.jsx)(p.Leaf,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"text-sm",children:"Yellowing"})]}),(0,b.jsx)(h.Badge,{className:aa(a.yellowing_observed),children:a.yellowing_observed})]})})]}),"Yes"===a.yellowing_observed&&a.yellowing_bio_stimulant&&(0,b.jsxs)("div",{className:"mt-2 p-3 bg-red-50 rounded-lg border border-red-200",children:[(0,b.jsxs)("h4",{className:"text-sm font-medium text-red-800 mb-1 flex items-center gap-1",children:[(0,b.jsx)(z.AlertCircle,{className:"h-4 w-4"}),"Yellowing Treatment"]}),(0,b.jsx)("p",{className:"text-sm text-red-700",children:a.yellowing_bio_stimulant})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"text-sm font-medium text-gray-700 mb-2",children:"Bio Stimulant"}),(0,b.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded-lg",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-medium",children:a.bio_stimulant_product}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Applied: ",a.bio_stimulant_applied]})]}),(0,b.jsx)(h.Badge,{className:ab(a.bio_stimulant_applied),children:a.bio_stimulant_applied})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsx)("div",{className:"bg-gray-50 p-3 rounded-lg",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Weeds Present"}),ad(a.weeds_present)]})}),(0,b.jsx)("div",{className:"bg-gray-50 p-3 rounded-lg",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Crop Height"}),(0,b.jsx)("span",{className:`font-bold ${$(a.crop_height)}`,children:_(a.crop_height)})]})}),(0,b.jsx)("div",{className:"bg-gray-50 p-3 rounded-lg",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Zn Applied"}),ac(a.zn_applied)]})}),(0,b.jsx)("div",{className:"bg-gray-50 p-3 rounded-lg",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"2nd Irrigation"}),ac(a.fertilizers_applied_2nd_irrigation)]})})]}),(a.aphid_control||a.rust_management)&&(0,b.jsxs)("div",{className:"mt-4 p-3 bg-amber-50 rounded-lg border border-amber-200",children:[(0,b.jsxs)("h4",{className:"text-sm font-medium text-amber-800 mb-2 flex items-center gap-1",children:[(0,b.jsx)(F.Bug,{className:"h-4 w-4"}),"Pest Control"]}),(0,b.jsxs)("div",{className:"space-y-1",children:[a.aphid_control&&(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Aphid Control:"}),(0,b.jsx)("span",{className:"font-medium",children:a.aphid_control})]}),a.rust_management&&(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Rust Management:"}),(0,b.jsx)("span",{className:"font-medium",children:a.rust_management})]})]})]})]}),(0,b.jsxs)(f.Button,{onClick:()=>{G(a),I(!0)},variant:"outline",className:"w-full mt-4 gap-2 group-hover:border-primary",children:[(0,b.jsx)(t.Eye,{className:"h-4 w-4"}),"View Full Details",(0,b.jsx)(s.ChevronRight,{className:"h-4 w-4"})]})]}),(0,b.jsx)(e.CardFooter,{className:"border-t pt-4 flex justify-between text-sm text-gray-500",children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(n.Calendar,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:new Date(a.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})})]})},a.id))})]}),(0,b.jsx)(k.Dialog,{open:H,onOpenChange:I,children:(0,b.jsx)(k.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:E?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.DialogHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)(k.DialogTitle,{className:"text-2xl flex items-center gap-2",children:[(0,b.jsx)(o.Sprout,{className:"h-6 w-6 text-primary"}),E.crop_name," - Record #",E.id]}),(0,b.jsxs)(k.DialogDescription,{children:["Complete growth & tillering data"," ",E.farm&&`• Farm ${E.farm}`]})]}),(0,b.jsx)(h.Badge,{className:Z(E.crop_health),children:E.crop_health})]})}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(y.Wheat,{className:"h-5 w-5 text-green-600"}),"Crop Status"]})}),(0,b.jsxs)(e.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"text-sm text-muted-foreground",children:"Crop Name"}),(0,b.jsx)("p",{className:"font-medium",children:E.crop_name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"text-sm text-muted-foreground",children:"Crop Health"}),(0,b.jsx)(h.Badge,{className:Z(E.crop_health),children:E.crop_health})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"text-sm text-muted-foreground",children:"Crop Height"}),(0,b.jsx)("p",{className:`font-bold ${$(E.crop_height)}`,children:_(E.crop_height)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"text-sm text-muted-foreground",children:"Yellowing Observed"}),(0,b.jsx)(h.Badge,{className:aa(E.yellowing_observed),children:E.yellowing_observed})]})]}),(0,b.jsx)(i.Separator,{}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm",children:"Weeds Present"}),ad(E.weeds_present)]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm",children:"Post Emergent Applied"}),ad(E.post_emergent_applied)]})]})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(A.Package,{className:"h-5 w-5 text-amber-600"}),"Fertilizers & Stimulants"]})}),(0,b.jsxs)(e.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"font-medium text-gray-700 mb-2",children:"Fertilizer Type"}),(0,b.jsx)("div",{className:"bg-gray-50 p-3 rounded-lg",children:(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"font-medium capitalize",children:E.fertilizer_type}),(0,b.jsxs)(h.Badge,{variant:"outline",children:["2nd Irrigation:"," ",E.fertilizers_applied_2nd_irrigation]})]})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"font-medium text-gray-700 mb-2",children:"Zinc Application"}),(0,b.jsx)("div",{className:"bg-blue-50 p-3 rounded-lg",children:(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"font-medium",children:E.zn_product}),(0,b.jsx)(h.Badge,{className:ab(E.zn_applied),children:E.zn_applied})]})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"font-medium text-gray-700 mb-2",children:"Bio Stimulant"}),(0,b.jsx)("div",{className:"bg-green-50 p-3 rounded-lg",children:(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-medium",children:E.bio_stimulant_product}),(0,b.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:["Applied: ",E.bio_stimulant_applied]}),"Yes"===E.yellowing_observed&&E.yellowing_bio_stimulant&&(0,b.jsxs)("div",{className:"mt-2 p-2 bg-red-100 rounded border border-red-200",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-red-700",children:"Yellowing Treatment:"}),(0,b.jsx)("p",{className:"text-sm text-red-600 mt-1",children:E.yellowing_bio_stimulant})]})]}),(0,b.jsx)(h.Badge,{className:ab(E.bio_stimulant_applied),children:E.bio_stimulant_applied})]})})]})]})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(F.Bug,{className:"h-5 w-5 text-red-600"}),"Management & Control"]})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"font-medium text-gray-700 mb-2",children:"Plant Growth Regulator"}),(0,b.jsx)("div",{className:"bg-purple-50 p-3 rounded-lg",children:(0,b.jsx)("p",{className:"font-medium",children:E.plant_growth_regulator})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"font-medium text-gray-700 mb-2",children:"Irrigation & Fertilizers"}),(0,b.jsx)("div",{className:"bg-blue-50 p-3 rounded-lg",children:(0,b.jsx)("p",{className:"font-medium",children:E.irrigation_3rd_fertilizers})})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"font-medium text-gray-700 mb-2",children:"Rust Management"}),(0,b.jsx)("div",{className:"bg-orange-50 p-3 rounded-lg",children:(0,b.jsx)("p",{className:"font-medium capitalize",children:E.rust_management})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"font-medium text-gray-700 mb-2",children:"Aphid Control"}),(0,b.jsx)("div",{className:"bg-red-50 p-3 rounded-lg",children:(0,b.jsx)("p",{className:"font-medium",children:E.aphid_control})})]})]})]})})]}),E.post_emergent_applied&&(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(z.AlertCircle,{className:"h-5 w-5 text-amber-600"}),"Post Emergent Details"]})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"font-medium text-gray-700 mb-2",children:"Product"}),(0,b.jsx)("div",{className:"bg-gray-50 p-3 rounded-lg",children:(0,b.jsx)("p",{className:"font-medium",children:E.post_emergent_product||"Not specified"})})]}),E.post_emergent_other_text&&(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"font-medium text-gray-700 mb-2",children:"Additional Notes"}),(0,b.jsx)("div",{className:"bg-blue-50 p-3 rounded-lg",children:(0,b.jsx)("p",{className:"text-gray-700",children:E.post_emergent_other_text})})]})]})})]}),(0,b.jsxs)(k.DialogFooter,{children:[(0,b.jsx)(f.Button,{variant:"outline",onClick:()=>I(!1),children:"Close"}),(0,b.jsx)(f.Button,{children:"Export Report"})]})]})]}):null})})]})}var H=a.i(23102),I=a.i(89474);function J(){let[a,m]=(0,c.useState)([]),[p,B]=(0,c.useState)([]),[D,E]=(0,c.useState)(null),[G,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(!0),[M,N]=(0,c.useState)(null),[O,P]=(0,c.useState)(""),[Q,R]=(0,c.useState)("all"),[S,T]=(0,c.useState)("all"),U=Array.from(new Set(a.map(a=>a.field_name))).sort((a,b)=>a.localeCompare(b)),V=a.length,W=a.filter(a=>"healthy"===a.crop_health).length,X=a.filter(a=>a.aphid_attack).length;a.filter(a=>a.crop_under_stress).length;let Y=a.filter(a=>a.weeds_observed).length;(0,c.useEffect)(()=>{Z()},[]),(0,c.useEffect)(()=>{let b=[...a];if(""!==O.trim()){let a=O.toLowerCase();b=b.filter(b=>b.crop_name.toLowerCase().includes(a)||b.field_name.toLowerCase().includes(a)||b.fertilizer_type&&b.fertilizer_type.toLowerCase().includes(a)||b.crop_health.toLowerCase().includes(a))}"all"!==Q&&(b=b.filter(a=>a.field_name===Q)),"issues"===S?b=b.filter(a=>a.aphid_attack||a.crop_under_stress||a.weeds_observed):"healthy"===S?b=b.filter(a=>"healthy"===a.crop_health):"aphid"===S?b=b.filter(a=>a.aphid_attack):"stress"===S?b=b.filter(a=>a.crop_under_stress):"weeds"===S?b=b.filter(a=>a.weeds_observed):"fair"===S?b=b.filter(a=>"fair"===a.crop_health):"stressed"===S&&(b=b.filter(a=>"stressed"===a.crop_health)),B(b)},[O,Q,S,a]);let Z=async()=>{try{return L(!0),void N("No authentication token found")}catch(a){N(a instanceof Error?a.message:"Failed to fetch data"),console.error("Error fetching rosette data:",a)}finally{L(!1)}},$=a=>{switch(a.toLowerCase()){case"healthy":return"bg-green-100 text-green-800";case"fair":return"bg-yellow-100 text-yellow-800";case"stressed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},_=a=>{switch(a.toLowerCase()){case"healthy":return"Healthy";case"fair":return"Fair";case"stressed":return"Stressed";default:return a}},aa=a=>{switch(a.toLowerCase()){case"less_than_3_inches":return"< 3 inches";case"3_to_6_inches":return"3-6 inches";case"greater_than_6_inches":return"> 6 inches";default:return a.replace(/_/g," ")}},ab=a=>{switch(a.toLowerCase()){case"greater_than_6_inches":return"text-green-600";case"3_to_6_inches":return"text-amber-600";case"less_than_3_inches":return"text-red-600";default:return"text-gray-600"}},ac=a=>(0,b.jsx)("div",{className:"flex items-center gap-1",children:a?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(q.CheckCircle,{className:"h-4 w-4 text-green-500"}),(0,b.jsx)("span",{className:"text-green-600 font-medium",children:"Yes"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(r,{className:"h-4 w-4 text-gray-400"}),(0,b.jsx)("span",{className:"text-gray-500",children:"No"})]})}),ad=a=>a&&""!==a.trim();return K?(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(C.Skeleton,{className:"h-10 w-48"}),(0,b.jsx)(C.Skeleton,{className:"h-4 w-64 mt-2"})]}),(0,b.jsx)(C.Skeleton,{className:"h-10 w-32"})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[1,2,3,4].map(a=>(0,b.jsx)(C.Skeleton,{className:"h-32 rounded-lg"},a))}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(a=>(0,b.jsx)(C.Skeleton,{className:"h-64 rounded-lg"},a))})]}):M?(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"text-center py-8 text-red-500",children:[(0,b.jsx)(z.AlertCircle,{className:"h-12 w-12 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-lg font-semibold",children:"Error Loading Data"}),(0,b.jsx)("p",{className:"text-sm mt-2",children:M}),(0,b.jsx)(f.Button,{onClick:Z,className:"mt-4",children:"Retry"})]})})}):(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Rosette Stage Data"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-2",children:"Monitor crop health, fertilizer applications, and pest control by field"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(w.Download,{className:"h-4 w-4 mr-2"}),"Export"]}),(0,b.jsxs)(f.Button,{size:"sm",onClick:Z,children:[(0,b.jsx)(x.BarChart3,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,b.jsx)(e.Card,{className:"bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-green-700",children:"Total Records"}),(0,b.jsx)("h3",{className:"text-2xl font-bold text-green-900 mt-2",children:V})]}),(0,b.jsx)("div",{className:"h-12 w-12 rounded-full bg-green-200 flex items-center justify-center",children:(0,b.jsx)(y.Wheat,{className:"h-6 w-6 text-green-700"})})]})})}),(0,b.jsx)(e.Card,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:(0,b.jsxs)(e.CardContent,{className:"pt-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-blue-700",children:"Healthy Crops"}),(0,b.jsx)("h3",{className:"text-2xl font-bold text-blue-900 mt-2",children:W})]}),(0,b.jsx)("div",{className:"h-12 w-12 rounded-full bg-blue-200 flex items-center justify-center",children:(0,b.jsx)(q.CheckCircle,{className:"h-6 w-6 text-blue-700"})})]}),(0,b.jsxs)("p",{className:"text-xs text-blue-600 mt-2",children:[V>0?(W/V*100).toFixed(1):0,"% of total"]})]})}),(0,b.jsx)(e.Card,{className:"bg-gradient-to-br from-red-50 to-red-100 border-red-200",children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-red-700",children:"Aphid Attacks"}),(0,b.jsx)("h3",{className:"text-2xl font-bold text-red-900 mt-2",children:X})]}),(0,b.jsx)("div",{className:"h-12 w-12 rounded-full bg-red-200 flex items-center justify-center",children:(0,b.jsx)(F.Bug,{className:"h-6 w-6 text-red-700"})})]})})}),(0,b.jsx)(e.Card,{className:"bg-gradient-to-br from-amber-50 to-amber-100 border-amber-200",children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-amber-700",children:"Weeds Observed"}),(0,b.jsx)("h3",{className:"text-2xl font-bold text-amber-900 mt-2",children:Y})]}),(0,b.jsx)("div",{className:"h-12 w-12 rounded-full bg-amber-200 flex items-center justify-center",children:(0,b.jsx)(z.AlertCircle,{className:"h-6 w-6 text-amber-700"})})]})})})]}),(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4 items-center",children:[(0,b.jsx)("div",{className:"flex-1 w-full lg:w-auto",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(v.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,b.jsx)(g.Input,{placeholder:"Search by crop, fertilizer, health, or field number...",value:O,onChange:a=>P(a.target.value),className:"pl-10 w-full lg:w-[400px]"})]})}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(u.Filter,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)(l.Select,{value:Q,onValueChange:R,children:[(0,b.jsx)(l.SelectTrigger,{className:"w-[180px]",children:(0,b.jsx)(l.SelectValue,{placeholder:"Select Field"})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"all",children:"All Fields"}),U.map(a=>(0,b.jsx)(l.SelectItem,{value:a,className:"capitalize",children:a},a))]})]})]}),(0,b.jsx)(d.Tabs,{value:S,onValueChange:T,className:"w-auto",children:(0,b.jsxs)(d.TabsList,{children:[(0,b.jsx)(d.TabsTrigger,{value:"all",children:"All"}),(0,b.jsx)(d.TabsTrigger,{value:"issues",children:"With Issues"}),(0,b.jsx)(d.TabsTrigger,{value:"healthy",children:"Healthy"}),(0,b.jsx)(d.TabsTrigger,{value:"fair",children:"Fair"}),(0,b.jsx)(d.TabsTrigger,{value:"stressed",children:"Stressed"}),(0,b.jsx)(d.TabsTrigger,{value:"aphid",children:"Aphid Attack"}),(0,b.jsx)(d.TabsTrigger,{value:"weeds",children:"Weeds"})]})})]})]})})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,b.jsxs)("h2",{className:"text-xl font-semibold",children:["Rosette Stage Records",(0,b.jsxs)("span",{className:"text-muted-foreground font-normal ml-2",children:["(",p.length," ",1===p.length?"record":"records",")"]})]}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:["all"!==Q&&(0,b.jsx)(h.Badge,{variant:"outline",className:"mr-2 capitalize",children:Q}),"Sorted by latest date"]})]}),0===p.length?(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"py-12 text-center",children:[(0,b.jsx)(o.Sprout,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No rosette data found"}),(0,b.jsx)("p",{className:"text-gray-500 max-w-sm mx-auto",children:O?"No records match your search criteria. Try different keywords.":"all"!==Q?`No data found for ${Q}`:"No rosette stage data has been recorded yet."})]})}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map(a=>(0,b.jsx)(e.Card,{className:"group hover:shadow-lg transition-all duration-300 hover:border-primary/30 overflow-hidden",children:(0,b.jsxs)(e.CardContent,{className:"p-0",children:[(0,b.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 p-5",children:(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 line-clamp-1 capitalize",children:a.crop_name}),(0,b.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Record #",a.id," • ",a.field_name]})]}),(0,b.jsxs)("div",{className:"flex flex-col items-end gap-1",children:[(0,b.jsx)(h.Badge,{variant:"outline",className:"bg-white/90 capitalize",children:a.field_name}),(0,b.jsx)(h.Badge,{className:$(a.crop_health),children:_(a.crop_health)})]})]})}),(0,b.jsxs)("div",{className:"p-5",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,b.jsx)(I.Scale,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"text-sm",children:"Crop Height"})]}),(0,b.jsx)("span",{className:`font-bold ${ab(a.crop_height)}`,children:aa(a.crop_height)})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,b.jsx)(A.Package,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"text-sm",children:"Fertilizer"})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("span",{className:"font-medium",children:a.fertilizer_type||"None"}),a.fertilizer_quantity_bags&&(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:[a.fertilizer_quantity_bags," bags"]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsx)("div",{className:"bg-gray-50 p-3 rounded-lg",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Weeds Observed"}),ac(a.weeds_observed)]})}),(0,b.jsx)("div",{className:"bg-gray-50 p-3 rounded-lg",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Aphid Attack"}),ac(a.aphid_attack)]})}),(0,b.jsx)("div",{className:"bg-gray-50 p-3 rounded-lg",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Crop Stress"}),ac(a.crop_under_stress)]})}),(0,b.jsx)("div",{className:"bg-gray-50 p-3 rounded-lg",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Fertilizers Applied"}),ac(a.fertilizers_applied)]})})]}),(0,b.jsxs)("div",{className:"mt-4 p-3 bg-amber-50 rounded-lg border border-amber-200",children:[(0,b.jsxs)("h4",{className:"text-sm font-medium text-amber-800 mb-2 flex items-center gap-1",children:[(0,b.jsx)(z.AlertCircle,{className:"h-4 w-4"}),"Key Recommendations"]}),(0,b.jsxs)("div",{className:"space-y-2",children:[ad(a.recommendation_irrigation_fertilizers)&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500 flex-shrink-0"}),(0,b.jsxs)("div",{className:"text-xs",children:[(0,b.jsx)("span",{className:"font-medium text-gray-700",children:"Fertilizer:"}),(0,b.jsx)("span",{className:"text-gray-600 ml-1",children:a.recommendation_irrigation_fertilizers})]})]}),ad(a.recommendation_sulphur_kumulus)&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-yellow-500 flex-shrink-0"}),(0,b.jsxs)("div",{className:"text-xs",children:[(0,b.jsx)("span",{className:"font-medium text-gray-700",children:"Sulphur:"}),(0,b.jsx)("span",{className:"text-gray-600 ml-1",children:a.recommendation_sulphur_kumulus})]})]}),ad(a.recommendation_white_rust)&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-blue-500 flex-shrink-0"}),(0,b.jsxs)("div",{className:"text-xs",children:[(0,b.jsx)("span",{className:"font-medium text-gray-700",children:"White Rust:"}),(0,b.jsx)("span",{className:"text-gray-600 ml-1",children:a.recommendation_white_rust})]})]}),ad(a.recommendation_aphid_ulala)&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-red-500 flex-shrink-0"}),(0,b.jsxs)("div",{className:"text-xs",children:[(0,b.jsx)("span",{className:"font-medium text-gray-700",children:"Aphid Control:"}),(0,b.jsx)("span",{className:"text-gray-600 ml-1",children:a.recommendation_aphid_ulala})]})]})]})]})]}),(0,b.jsxs)(f.Button,{onClick:()=>{E(a),J(!0)},variant:"outline",className:"w-full mt-4 gap-2 group-hover:border-primary",children:[(0,b.jsx)(t.Eye,{className:"h-4 w-4"}),"View Field Details",(0,b.jsx)(s.ChevronRight,{className:"h-4 w-4"})]})]}),(0,b.jsx)(e.CardFooter,{className:"border-t pt-4 flex justify-between text-sm text-gray-500",children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(n.Calendar,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:new Date(a.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})})]})},a.id))})]}),(0,b.jsx)(k.Dialog,{open:G,onOpenChange:J,children:(0,b.jsx)(k.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:D&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.DialogHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)(k.DialogTitle,{className:"text-2xl flex items-center gap-2",children:[(0,b.jsx)(y.Wheat,{className:"h-6 w-6 text-primary"}),D.crop_name," - ",D.field_name]}),(0,b.jsxs)(k.DialogDescription,{children:["Complete rosette stage data for ",D.field_name]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(h.Badge,{variant:"outline",children:[(0,b.jsx)(j.Label,{children:"Farm Name"}),(0,b.jsx)("p",{className:"font-bold capitalize",children:D.field_name})]}),(0,b.jsx)(h.Badge,{className:$(D.crop_health),children:_(D.crop_health)})]})]})}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(o.Sprout,{className:"h-5 w-5 text-green-600"}),"Crop Status"]})}),(0,b.jsxs)(e.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"text-sm text-muted-foreground",children:"Field Number"}),(0,b.jsxs)("p",{className:"font-bold text-lg",children:["#",D.field]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"text-sm text-muted-foreground",children:"Crop Height"}),(0,b.jsx)("p",{className:`font-bold text-lg ${ab(D.crop_height)}`,children:aa(D.crop_height)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"text-sm text-muted-foreground",children:"Crop Health"}),(0,b.jsx)(h.Badge,{className:$(D.crop_health),children:_(D.crop_health)})]})]}),(0,b.jsx)(i.Separator,{}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm",children:"Crop Under Stress"}),ac(D.crop_under_stress)]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm",children:"Weeds Observed"}),ac(D.weeds_observed)]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm",children:"Aphid Attack"}),ac(D.aphid_attack)]})]})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(A.Package,{className:"h-5 w-5 text-amber-600"}),"Field Applications"]})}),(0,b.jsxs)(e.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"text-sm text-muted-foreground",children:"Fertilizer"}),(0,b.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg mt-1",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"font-medium",children:D.fertilizer_type||"None"}),D.fertilizer_quantity_bags&&(0,b.jsxs)(h.Badge,{variant:"outline",children:[D.fertilizer_quantity_bags," bags"]})]}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Applied:"," ",D.fertilizers_applied?"Yes":"No"]})]})]}),D.post_emergent_applied&&(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"text-sm text-muted-foreground",children:"Post Emergent"}),(0,b.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg mt-1",children:[(0,b.jsx)("p",{className:"font-medium",children:D.post_emergent_product}),D.post_emergent_other_text&&(0,b.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:D.post_emergent_other_text})]})]})]})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(F.Bug,{className:"h-5 w-5 text-red-600"}),"Field Chemicals & Treatments"]})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"font-medium text-gray-700 mb-2",children:"Sulphur Application"}),(0,b.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded-lg",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-medium",children:D.sulphur_product||"None"}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Applied:"," ",D.sulphur_applied?"Yes":"No"]})]}),D.sulphur_other_text&&(0,b.jsxs)(h.Badge,{variant:"outline",children:["Note: ",D.sulphur_other_text]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"font-medium text-gray-700 mb-2",children:"Amino Application"}),(0,b.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded-lg",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-medium",children:D.amino_product||"None"}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Applied:"," ",D.amino_applied?"Yes":"No"]})]}),D.amino_other_text&&(0,b.jsxs)(h.Badge,{variant:"outline",children:["Note: ",D.amino_other_text]})]})]}),D.aphid_attack&&(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"font-medium text-gray-700 mb-2",children:"Aphid Control"}),(0,b.jsxs)("div",{className:"bg-red-50 p-3 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"font-medium text-red-700",children:D.aphid_pesticide}),(0,b.jsx)(h.Badge,{variant:"destructive",children:"Urgent"})]}),D.aphid_other_text&&(0,b.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:D.aphid_other_text})]})]})]})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(z.AlertCircle,{className:"h-5 w-5 text-blue-600"}),"Field Recommendations"]})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{className:`p-3 rounded-lg ${ad(D.recommendation_irrigation_fertilizers)?"bg-green-50 border border-green-200":"bg-gray-50"}`,children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)(A.Package,{className:`h-4 w-4 ${ad(D.recommendation_irrigation_fertilizers)?"text-green-600":"text-gray-400"}`}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Fertilizer"})]}),(0,b.jsx)("p",{className:`text-sm ${ad(D.recommendation_irrigation_fertilizers)?"text-green-700 font-medium":"text-gray-500"}`,children:D.recommendation_irrigation_fertilizers||"N/A"})]}),(0,b.jsxs)("div",{className:`p-3 rounded-lg ${ad(D.recommendation_sulphur_kumulus)?"bg-yellow-50 border border-yellow-200":"bg-gray-50"}`,children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)(H.Thermometer,{className:`h-4 w-4 ${ad(D.recommendation_sulphur_kumulus)?"text-yellow-600":"text-gray-400"}`}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Sulphur"})]}),(0,b.jsx)("p",{className:`text-sm ${ad(D.recommendation_sulphur_kumulus)?"text-yellow-700 font-medium":"text-gray-500"}`,children:D.recommendation_sulphur_kumulus||"N/A"})]}),(0,b.jsxs)("div",{className:`p-3 rounded-lg ${ad(D.recommendation_white_rust)?"bg-blue-50 border border-blue-200":"bg-gray-50"}`,children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)(z.AlertCircle,{className:`h-4 w-4 ${ad(D.recommendation_white_rust)?"text-blue-600":"text-gray-400"}`}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"White Rust"})]}),(0,b.jsx)("p",{className:`text-sm ${ad(D.recommendation_white_rust)?"text-blue-700 font-medium":"text-gray-500"}`,children:D.recommendation_white_rust||"N/A"})]}),(0,b.jsxs)("div",{className:`p-3 rounded-lg ${ad(D.recommendation_aphid_ulala)?"bg-red-50 border border-red-200":"bg-gray-50"}`,children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)(F.Bug,{className:`h-4 w-4 ${ad(D.recommendation_aphid_ulala)?"text-red-600":"text-gray-400"}`}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Aphid Control"})]}),(0,b.jsx)("p",{className:`text-sm ${ad(D.recommendation_aphid_ulala)?"text-red-700 font-medium":"text-gray-500"}`,children:D.recommendation_aphid_ulala||"N/A"})]})]})})]}),(0,b.jsxs)(k.DialogFooter,{children:[(0,b.jsx)(f.Button,{variant:"outline",onClick:()=>J(!1),children:"Close"}),(0,b.jsx)(f.Button,{children:"Export Field Report"})]})]})]})})})]})}function K(){let[a,m]=(0,c.useState)([]),[n,o]=(0,c.useState)([]),[B,D]=(0,c.useState)(null),[E,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)(!0),[J,K]=(0,c.useState)(null),[L,M]=(0,c.useState)(""),[N,O]=(0,c.useState)("all"),[P,Q]=(0,c.useState)("all"),R="https://rda.ngrok.app",S=a.length,T=a.filter(a=>"healthy"===a.crop_health).length,U=a.filter(a=>a.weeds_present).length,V=a.filter(a=>a.yellowing_cause&&a.yellowing_cause.length>0).length,W=Array.from(new Set(a.map(a=>a.farm_name)));(0,c.useEffect)(()=>{X()},[]),(0,c.useEffect)(()=>{let b=[...a];if(""!==L.trim()){let a=L.toLowerCase();b=b.filter(b=>b.crop_name.toLowerCase().includes(a)||b.crop_health.toLowerCase().includes(a)||b.weed_type.toLowerCase().includes(a))}"all"!==N&&(b=b.filter(a=>a.farm_name===N)),"issues"===P?b=b.filter(a=>a.yellowing_cause&&a.yellowing_cause.length>0||a.weeds_present):"healthy"===P?b=b.filter(a=>"healthy"===a.crop_health):"weeds"===P&&(b=b.filter(a=>a.weeds_present)),o(b)},[L,N,P,a]);let X=async()=>{try{return I(!0),void K("No authentication token found")}catch(a){K(a instanceof Error?a.message:"Failed to fetch data"),console.error("Error fetching weed monitoring data:",a)}finally{I(!1)}},Y=a=>a?a.startsWith("http")?a:a.startsWith("/")?`${R}${a}`:`${R}/${a}`:null,Z=a=>{switch(a.toLowerCase()){case"healthy":return"bg-green-100 text-green-800";case"fair":return"bg-yellow-100 text-yellow-800";case"stressed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},$=a=>{let b=parseInt(a.split("-")[0]);return b<10?"text-green-600":b<30?"text-amber-600":"text-red-600"},_=a=>a.map((a,c)=>{let d="bg-gray-100 text-gray-800",e=a.replace("_"," ");switch(a){case"nutrient_deficiency":d="bg-red-100 text-red-800",e="Nutrient Deficiency";break;case"water_stress":d="bg-blue-100 text-blue-800",e="Water Stress";break;case"disease":d="bg-purple-100 text-purple-800",e="Disease";break;case"pest_damage":d="bg-orange-100 text-orange-800",e="Pest Damage"}return(0,b.jsx)(h.Badge,{className:`text-xs ${d}`,children:e},c)}),aa=a=>(0,b.jsx)("div",{className:"flex items-center gap-1",children:a?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(q.CheckCircle,{className:"h-4 w-4 text-green-500"}),(0,b.jsx)("span",{className:"text-green-600 font-medium",children:"Yes"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(r,{className:"h-4 w-4 text-gray-400"}),(0,b.jsx)("span",{className:"text-gray-500",children:"No"})]})});return H?(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(C.Skeleton,{className:"h-10 w-48"}),(0,b.jsx)(C.Skeleton,{className:"h-4 w-64 mt-2"})]}),(0,b.jsx)(C.Skeleton,{className:"h-10 w-32"})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[1,2,3,4].map(a=>(0,b.jsx)(C.Skeleton,{className:"h-32 rounded-lg"},a))}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(a=>(0,b.jsx)(C.Skeleton,{className:"h-64 rounded-lg"},a))})]}):J?(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"text-center py-8 text-red-500",children:[(0,b.jsx)(z.AlertCircle,{className:"h-12 w-12 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-lg font-semibold",children:"Error Loading Data"}),(0,b.jsx)("p",{className:"text-sm mt-2",children:J}),(0,b.jsx)(f.Button,{onClick:X,className:"mt-4",children:"Retry"})]})})}):(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Weed Monitoring & Crop Health"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-2",children:"Monitor weed presence, crop health issues, and yellowing causes"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(w.Download,{className:"h-4 w-4 mr-2"}),"Export"]}),(0,b.jsxs)(f.Button,{size:"sm",onClick:X,children:[(0,b.jsx)(x.BarChart3,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,b.jsx)(e.Card,{className:"bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-green-700",children:"Total Records"}),(0,b.jsx)("h3",{className:"text-2xl font-bold text-green-900 mt-2",children:S})]}),(0,b.jsx)("div",{className:"h-12 w-12 rounded-full bg-green-200 flex items-center justify-center",children:(0,b.jsx)(p.Leaf,{className:"h-6 w-6 text-green-700"})})]})})}),(0,b.jsx)(e.Card,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:(0,b.jsxs)(e.CardContent,{className:"pt-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-blue-700",children:"Healthy Crops"}),(0,b.jsx)("h3",{className:"text-2xl font-bold text-blue-900 mt-2",children:T})]}),(0,b.jsx)("div",{className:"h-12 w-12 rounded-full bg-blue-200 flex items-center justify-center",children:(0,b.jsx)(q.CheckCircle,{className:"h-6 w-6 text-blue-700"})})]}),(0,b.jsxs)("p",{className:"text-xs text-blue-600 mt-2",children:[S>0?(T/S*100).toFixed(1):0,"% of total"]})]})}),(0,b.jsx)(e.Card,{className:"bg-gradient-to-br from-red-50 to-red-100 border-red-200",children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-red-700",children:"Weeds Present"}),(0,b.jsx)("h3",{className:"text-2xl font-bold text-red-900 mt-2",children:U})]}),(0,b.jsx)("div",{className:"h-12 w-12 rounded-full bg-red-200 flex items-center justify-center",children:(0,b.jsx)(F.Bug,{className:"h-6 w-6 text-red-700"})})]})})}),(0,b.jsx)(e.Card,{className:"bg-gradient-to-br from-amber-50 to-amber-100 border-amber-200",children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-amber-700",children:"Yellowing Issues"}),(0,b.jsx)("h3",{className:"text-2xl font-bold text-amber-900 mt-2",children:V})]}),(0,b.jsx)("div",{className:"h-12 w-12 rounded-full bg-amber-200 flex items-center justify-center",children:(0,b.jsx)(z.AlertCircle,{className:"h-6 w-6 text-amber-700"})})]})})})]}),(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4 items-center",children:[(0,b.jsx)("div",{className:"flex-1 w-full lg:w-auto",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(v.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,b.jsx)(g.Input,{placeholder:"Search by crop name, health status, or weed type...",value:L,onChange:a=>M(a.target.value),className:"pl-10 w-full lg:w-[400px]"})]})}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(u.Filter,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)(l.Select,{value:N,onValueChange:O,children:[(0,b.jsx)(l.SelectTrigger,{className:"w-[180px]",children:(0,b.jsx)(l.SelectValue,{placeholder:"Filter by field"})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"all",children:"All Fields"}),W.map(a=>(0,b.jsx)(l.SelectItem,{value:a,children:a},a))]})]})]}),(0,b.jsx)(d.Tabs,{value:P,onValueChange:Q,className:"w-auto",children:(0,b.jsxs)(d.TabsList,{children:[(0,b.jsx)(d.TabsTrigger,{value:"all",children:"All"}),(0,b.jsx)(d.TabsTrigger,{value:"issues",children:"With Issues"}),(0,b.jsx)(d.TabsTrigger,{value:"healthy",children:"Healthy Only"}),(0,b.jsx)(d.TabsTrigger,{value:"weeds",children:"Weeds Present"})]})})]})]})})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,b.jsxs)("h2",{className:"text-xl font-semibold",children:["Weed Monitoring Records",(0,b.jsxs)("span",{className:"text-muted-foreground font-normal ml-2",children:["(",n.length," ",1===n.length?"record":"records",")"]})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Sorted by latest date"})]}),0===n.length?(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"py-12 text-center",children:[(0,b.jsx)(p.Leaf,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No weed monitoring data found"}),(0,b.jsx)("p",{className:"text-gray-500 max-w-sm mx-auto",children:L?"No records match your search criteria. Try different keywords.":"No weed monitoring data has been recorded yet."})]})}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(a=>{let c=Y(a.weed_photo);return(0,b.jsx)(e.Card,{className:"group hover:shadow-lg transition-all duration-300 hover:border-primary/30 overflow-hidden",children:(0,b.jsxs)(e.CardContent,{className:"p-0",children:[(0,b.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-5",children:(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 line-clamp-1 capitalize",children:a.crop_name}),(0,b.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Record #",a.id," • ",a.farm_name]})]}),(0,b.jsx)(h.Badge,{className:Z(a.crop_health),children:a.crop_health})]})}),(0,b.jsxs)("div",{className:"p-5",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[a.yellowing_cause&&a.yellowing_cause.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"text-sm font-medium text-gray-700 mb-2",children:"Yellowing Causes"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:_(a.yellowing_cause)})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,b.jsx)(p.Leaf,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"text-sm",children:"Weed Presence"})]}),aa(a.weeds_present)]}),a.weeds_present&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Weed Type"}),(0,b.jsx)(h.Badge,{variant:"outline",className:"capitalize",children:a.weed_type})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Cover Percentage"}),(0,b.jsx)("span",{className:`font-bold ${$(a.weed_cover_percentage)}`,children:a.weed_cover_percentage_display})]})]})]}),a.post_emergent_weedicide_applied&&(0,b.jsxs)("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[(0,b.jsxs)("h4",{className:"text-sm font-medium text-blue-800 mb-1 flex items-center gap-1",children:[(0,b.jsx)(A.Package,{className:"h-4 w-4"}),"Weedicide Applied"]}),(0,b.jsx)("p",{className:"text-sm",children:a.weedicide_product})]}),c&&(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsx)(j.Label,{className:"text-sm font-medium text-gray-700 mb-2",children:"Weed Photo"}),(0,b.jsx)("div",{className:"relative h-32 rounded-lg overflow-hidden bg-gray-100",children:(0,b.jsx)("img",{src:c,alt:`Weed photo for ${a.crop_name}`,className:"w-full h-full object-cover",onError:a=>{a.currentTarget.style.display="none",a.currentTarget.parentElement.innerHTML=`
                          <div class="w-full h-full flex flex-col items-center justify-center">
                            <ImageIcon class="h-8 w-8 text-gray-300 mb-2" />
                            <p class="text-xs text-gray-400">Image unavailable</p>
                          </div>
                        `}})})]})]}),(0,b.jsxs)(f.Button,{onClick:()=>{D(a),G(!0)},variant:"outline",className:"w-full mt-4 gap-2 group-hover:border-primary",children:[(0,b.jsx)(t.Eye,{className:"h-4 w-4"}),"View Full Details",(0,b.jsx)(s.ChevronRight,{className:"h-4 w-4"})]})]}),(0,b.jsx)(e.CardFooter,{className:"border-t pt-4 flex justify-between text-sm text-gray-500",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500"}),(0,b.jsx)("span",{children:a.farm_name})]})})]})},a.id)})})]}),(0,b.jsx)(k.Dialog,{open:E,onOpenChange:G,children:(0,b.jsx)(k.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:(()=>{if(!B)return null;let a=Y(B.weed_photo);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.DialogHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)(k.DialogTitle,{className:"text-2xl flex items-center gap-2",children:[(0,b.jsx)(y.Wheat,{className:"h-6 w-6 text-primary"}),B.crop_name," — ",B.farm_name]}),(0,b.jsxs)(k.DialogDescription,{children:["Complete weed monitoring data • ",B.farm_name]})]}),(0,b.jsx)(h.Badge,{className:Z(B.crop_health),children:B.crop_health})]})}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(q.CheckCircle,{className:"h-5 w-5 text-green-600"}),"Crop Status"]})}),(0,b.jsxs)(e.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"text-sm text-muted-foreground",children:"Crop Name"}),(0,b.jsx)("p",{className:"font-medium capitalize",children:B.crop_name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"text-sm text-muted-foreground",children:"Crop Health"}),(0,b.jsx)(h.Badge,{className:Z(B.crop_health),children:B.crop_health})]})]}),(0,b.jsx)(i.Separator,{}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm",children:"Weeds Present"}),aa(B.weeds_present)]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm",children:"Leave Observations"}),aa(B.leave_observations)]})]})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(z.AlertCircle,{className:"h-5 w-5 text-amber-600"}),"Yellowing Issues"]})}),(0,b.jsx)(e.CardContent,{children:B.yellowing_cause.length>0?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"font-medium text-gray-700 mb-2",children:"Main Causes"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:_(B.yellowing_cause)})]}),(B.yellowing_sub_cause.water_stress?.length>0||B.yellowing_sub_cause.nutrient_deficiency?.length>0)&&(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"font-medium text-gray-700 mb-2",children:"Specific Issues"}),(0,b.jsxs)("div",{className:"space-y-2",children:[B.yellowing_sub_cause.water_stress?.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-start gap-2 bg-blue-50 p-2 rounded",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-blue-500 mt-2 flex-shrink-0"}),(0,b.jsxs)("span",{className:"text-sm",children:["Water Stress: ",a]})]},c)),B.yellowing_sub_cause.nutrient_deficiency?.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-start gap-2 bg-red-50 p-2 rounded",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-red-500 mt-2 flex-shrink-0"}),(0,b.jsxs)("span",{className:"text-sm",children:["Nutrient Deficiency: ",a]})]},c))]})]})]}):(0,b.jsx)("div",{className:"text-center py-4 text-gray-500",children:"No yellowing issues reported"})})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(F.Bug,{className:"h-5 w-5 text-red-600"}),"Weed Details"]})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"font-medium text-gray-700 mb-2",children:"Weed Type"}),(0,b.jsx)("div",{className:"bg-gray-50 p-3 rounded-lg",children:(0,b.jsx)("span",{className:"font-medium capitalize",children:B.weed_type})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"font-medium text-gray-700 mb-2",children:"Weed Cover"}),(0,b.jsx)("div",{className:`p-3 rounded-lg font-bold text-lg text-center ${$(B.weed_cover_percentage)}`,children:B.weed_cover_percentage_display})]})]}),a&&(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"font-medium text-gray-700 mb-2",children:"Weed Photo"}),(0,b.jsx)("div",{className:"rounded-lg overflow-hidden border",children:(0,b.jsx)("img",{src:a,alt:`Weed photo for ${B.crop_name}`,className:"w-full h-48 object-cover",onError:a=>{a.currentTarget.style.display="none",a.currentTarget.parentElement.innerHTML=`
                              <div class="w-full h-48 flex flex-col items-center justify-center bg-gray-100">
                                <ImageIcon class="h-12 w-12 text-gray-300 mb-2" />
                                <p class="text-sm text-gray-400">Image not available</p>
                              </div>
                            `}})})]})]}),B.post_emergent_weedicide_applied&&(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsx)(j.Label,{className:"font-medium text-gray-700 mb-2",children:"Weedicide Application"}),(0,b.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:"Product Applied"}),(0,b.jsx)("p",{className:"text-lg font-bold text-blue-700",children:B.weedicide_product})]}),(0,b.jsx)(h.Badge,{variant:"default",children:"Applied"})]}),(0,b.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:["Post-emergent weedicide:"," ",B.post_emergent_weedicide_applied]})]})]})]})})]}),B.other_issues_text&&(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(z.AlertCircle,{className:"h-5 w-5 text-purple-600"}),"Other Issues & Notes"]})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,b.jsx)("p",{className:"text-gray-700",children:B.other_issues_text})})})]}),(0,b.jsxs)(k.DialogFooter,{children:[(0,b.jsx)(f.Button,{variant:"outline",onClick:()=>G(!1),children:"Close"}),(0,b.jsx)(f.Button,{children:"Export Report"})]})]})]})})()})})]})}function L(){let[a,e]=(0,c.useState)("pre-sowing");return(0,b.jsxs)(d.Tabs,{value:a,onValueChange:e,className:"w-full",children:[(0,b.jsxs)(d.TabsList,{className:"grid w-full grid-cols-2 lg:grid-cols-5 mb-6",children:[(0,b.jsx)(d.TabsTrigger,{value:"pre-sowing",children:"Pre-Sowing"}),(0,b.jsx)(d.TabsTrigger,{value:"sowing",children:"Sowing & Emergence"}),(0,b.jsx)(d.TabsTrigger,{value:"emergence",children:"Emergence"}),(0,b.jsx)(d.TabsTrigger,{value:"growth",children:"Growth & Tillering"}),(0,b.jsx)(d.TabsTrigger,{value:"rosette",children:"Rosette Stage"})]}),(0,b.jsx)(d.TabsContent,{value:"pre-sowing",children:(0,b.jsx)(D,{})}),(0,b.jsx)(d.TabsContent,{value:"sowing",children:(0,b.jsx)(E,{})}),(0,b.jsx)(d.TabsContent,{value:"emergence",children:(0,b.jsx)(K,{})}),(0,b.jsx)(d.TabsContent,{value:"growth",children:(0,b.jsx)(G,{})}),(0,b.jsx)(d.TabsContent,{value:"rosette",children:(0,b.jsx)(J,{})})]})}a.s(["StagesContainer",()=>L],96728)}];

//# sourceMappingURL=components_stagescontainer_tsx_060ec096._.js.map