(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,86536,e=>{"use strict";let t=(0,e.i(75254).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],86536)},46897,e=>{"use strict";let t=(0,e.i(75254).default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],46897)},3116,e=>{"use strict";let t=(0,e.i(75254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],3116)},55436,e=>{"use strict";let t=(0,e.i(75254).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);e.s(["Search",()=>t],55436)},97548,e=>{"use strict";let t=(0,e.i(75254).default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);e.s(["Filter",()=>t],97548)},94179,e=>{"use strict";var t=e.i(43476),s=e.i(91918),a=e.i(25913),r=e.i(47163);let i=(0,a.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function n({className:e,variant:a,asChild:n=!1,...l}){let o=n?s.Slot:"span";return(0,t.jsx)(o,{"data-slot":"badge",className:(0,r.cn)(i({variant:a}),e),...l})}e.s(["Badge",()=>n])},63059,e=>{"use strict";let t=(0,e.i(75254).default)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>t],63059)},23750,e=>{"use strict";var t=e.i(43476),s=e.i(47163);function a({className:e,type:a,...r}){return(0,t.jsx)("input",{type:a,"data-slot":"input",className:(0,s.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}e.s(["Input",()=>a])},27341,75830,86318,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(81140),r=e.i(30030),i=e.i(20783),n=e.i(91918);function l(e){let a=e+"CollectionProvider",[l,o]=(0,r.createContextScope)(a),[c,d]=l(a,{collectionRef:{current:null},itemMap:new Map}),m=e=>{let{scope:a,children:r}=e,i=s.default.useRef(null),n=s.default.useRef(new Map).current;return(0,t.jsx)(c,{scope:a,itemMap:n,collectionRef:i,children:r})};m.displayName=a;let u=e+"CollectionSlot",x=s.default.forwardRef((e,s)=>{let{scope:a,children:r}=e,l=d(u,a),o=(0,i.useComposedRefs)(s,l.collectionRef);return(0,t.jsx)(n.Slot,{ref:o,children:r})});x.displayName=u;let h=e+"CollectionItemSlot",f="data-radix-collection-item",p=s.default.forwardRef((e,a)=>{let{scope:r,children:l,...o}=e,c=s.default.useRef(null),m=(0,i.useComposedRefs)(a,c),u=d(h,r);return s.default.useEffect(()=>(u.itemMap.set(c,{ref:c,...o}),()=>void u.itemMap.delete(c))),(0,t.jsx)(n.Slot,{...{[f]:""},ref:m,children:l})});return p.displayName=h,[{Provider:m,Slot:x,ItemSlot:p},function(t){let a=d(e+"CollectionConsumer",t);return s.default.useCallback(()=>{let e=a.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll(`[${f}]`));return Array.from(a.itemMap.values()).sort((e,s)=>t.indexOf(e.ref.current)-t.indexOf(s.ref.current))},[a.collectionRef,a.itemMap])},o]}e.s(["createCollection",()=>l],75830);var o=e.i(10772),c=e.i(48425),d=e.i(30207),m=e.i(69340),u=s.createContext(void 0);function x(e){let t=s.useContext(u);return e||t||"ltr"}e.s(["useDirection",()=>x],86318);var h="rovingFocusGroup.onEntryFocus",f={bubbles:!1,cancelable:!0},p="RovingFocusGroup",[g,v,j]=l(p),[b,y]=(0,r.createContextScope)(p,[j]),[N,w]=b(p),C=s.forwardRef((e,s)=>(0,t.jsx)(g.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,t.jsx)(g.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,t.jsx)(k,{...e,ref:s})})}));C.displayName=p;var k=s.forwardRef((e,r)=>{let{__scopeRovingFocusGroup:n,orientation:l,loop:o=!1,dir:u,currentTabStopId:p,defaultCurrentTabStopId:g,onCurrentTabStopIdChange:j,onEntryFocus:b,preventScrollOnEntryFocus:y=!1,...w}=e,C=s.useRef(null),k=(0,i.useComposedRefs)(r,C),T=x(u),[S=null,D]=(0,m.useControllableState)({prop:p,defaultProp:g,onChange:j}),[_,E]=s.useState(!1),M=(0,d.useCallbackRef)(b),I=v(n),F=s.useRef(!1),[P,A]=s.useState(0);return s.useEffect(()=>{let e=C.current;if(e)return e.addEventListener(h,M),()=>e.removeEventListener(h,M)},[M]),(0,t.jsx)(N,{scope:n,orientation:l,dir:T,loop:o,currentTabStopId:S,onItemFocus:s.useCallback(e=>D(e),[D]),onItemShiftTab:s.useCallback(()=>E(!0),[]),onFocusableItemAdd:s.useCallback(()=>A(e=>e+1),[]),onFocusableItemRemove:s.useCallback(()=>A(e=>e-1),[]),children:(0,t.jsx)(c.Primitive.div,{tabIndex:_||0===P?-1:0,"data-orientation":l,...w,ref:k,style:{outline:"none",...e.style},onMouseDown:(0,a.composeEventHandlers)(e.onMouseDown,()=>{F.current=!0}),onFocus:(0,a.composeEventHandlers)(e.onFocus,e=>{let t=!F.current;if(e.target===e.currentTarget&&t&&!_){let t=new CustomEvent(h,f);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=I().filter(e=>e.focusable);R([e.find(e=>e.active),e.find(e=>e.id===S),...e].filter(Boolean).map(e=>e.ref.current),y)}}F.current=!1}),onBlur:(0,a.composeEventHandlers)(e.onBlur,()=>E(!1))})})}),T="RovingFocusGroupItem",S=s.forwardRef((e,r)=>{let{__scopeRovingFocusGroup:i,focusable:n=!0,active:l=!1,tabStopId:d,...m}=e,u=(0,o.useId)(),x=d||u,h=w(T,i),f=h.currentTabStopId===x,p=v(i),{onFocusableItemAdd:j,onFocusableItemRemove:b}=h;return s.useEffect(()=>{if(n)return j(),()=>b()},[n,j,b]),(0,t.jsx)(g.ItemSlot,{scope:i,id:x,focusable:n,active:l,children:(0,t.jsx)(c.Primitive.span,{tabIndex:f?0:-1,"data-orientation":h.orientation,...m,ref:r,onMouseDown:(0,a.composeEventHandlers)(e.onMouseDown,e=>{n?h.onItemFocus(x):e.preventDefault()}),onFocus:(0,a.composeEventHandlers)(e.onFocus,()=>h.onItemFocus(x)),onKeyDown:(0,a.composeEventHandlers)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void h.onItemShiftTab();if(e.target!==e.currentTarget)return;let t=function(e,t,s){var a;let r=(a=e.key,"rtl"!==s?a:"ArrowLeft"===a?"ArrowRight":"ArrowRight"===a?"ArrowLeft":a);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(r))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(r)))return D[r]}(e,h.orientation,h.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let r=p().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)r.reverse();else if("prev"===t||"next"===t){var s,a;"prev"===t&&r.reverse();let i=r.indexOf(e.currentTarget);r=h.loop?(s=r,a=i+1,s.map((e,t)=>s[(a+t)%s.length])):r.slice(i+1)}setTimeout(()=>R(r))}})})})});S.displayName=T;var D={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function R(e,t=!1){let s=document.activeElement;for(let a of e)if(a===s||(a.focus({preventScroll:t}),document.activeElement!==s))return}var _=e.i(96626),E="Tabs",[M,I]=(0,r.createContextScope)(E,[y]),F=y(),[P,A]=M(E),B=s.forwardRef((e,s)=>{let{__scopeTabs:a,value:r,onValueChange:i,defaultValue:n,orientation:l="horizontal",dir:d,activationMode:u="automatic",...h}=e,f=x(d),[p,g]=(0,m.useControllableState)({prop:r,onChange:i,defaultProp:n});return(0,t.jsx)(P,{scope:a,baseId:(0,o.useId)(),value:p,onValueChange:g,orientation:l,dir:f,activationMode:u,children:(0,t.jsx)(c.Primitive.div,{dir:f,"data-orientation":l,...h,ref:s})})});B.displayName=E;var H="TabsList",V=s.forwardRef((e,s)=>{let{__scopeTabs:a,loop:r=!0,...i}=e,n=A(H,a),l=F(a);return(0,t.jsx)(C,{asChild:!0,...l,orientation:n.orientation,dir:n.dir,loop:r,children:(0,t.jsx)(c.Primitive.div,{role:"tablist","aria-orientation":n.orientation,...i,ref:s})})});V.displayName=H;var z="TabsTrigger",L=s.forwardRef((e,s)=>{let{__scopeTabs:r,value:i,disabled:n=!1,...l}=e,o=A(z,r),d=F(r),m=O(o.baseId,i),u=U(o.baseId,i),x=i===o.value;return(0,t.jsx)(S,{asChild:!0,...d,focusable:!n,active:x,children:(0,t.jsx)(c.Primitive.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":u,"data-state":x?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:m,...l,ref:s,onMouseDown:(0,a.composeEventHandlers)(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(i)}),onKeyDown:(0,a.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(i)}),onFocus:(0,a.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==o.activationMode;x||n||!e||o.onValueChange(i)})})})});L.displayName=z;var $="TabsContent",K=s.forwardRef((e,a)=>{let{__scopeTabs:r,value:i,forceMount:n,children:l,...o}=e,d=A($,r),m=O(d.baseId,i),u=U(d.baseId,i),x=i===d.value,h=s.useRef(x);return s.useEffect(()=>{let e=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,t.jsx)(_.Presence,{present:n||x,children:({present:s})=>(0,t.jsx)(c.Primitive.div,{"data-state":x?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":m,hidden:!s,id:u,tabIndex:0,...o,ref:a,style:{...e.style,animationDuration:h.current?"0s":void 0},children:s&&l})})});function O(e,t){return`${e}-trigger-${t}`}function U(e,t){return`${e}-content-${t}`}K.displayName=$;var q=e.i(47163);function G({className:e,...s}){return(0,t.jsx)(B,{"data-slot":"tabs",className:(0,q.cn)("flex flex-col gap-2",e),...s})}function J({className:e,...s}){return(0,t.jsx)(V,{"data-slot":"tabs-list",className:(0,q.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...s})}function W({className:e,...s}){return(0,t.jsx)(L,{"data-slot":"tabs-trigger",className:(0,q.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...s})}function X({className:e,...s}){return(0,t.jsx)(K,{"data-slot":"tabs-content",className:(0,q.cn)("flex-1 outline-none",e),...s})}e.s(["Tabs",()=>G,"TabsContent",()=>X,"TabsList",()=>J,"TabsTrigger",()=>W],27341)},40160,e=>{"use strict";let t=(0,e.i(75254).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);e.s(["Download",()=>t],40160)},69035,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(48425),r="horizontal",i=["horizontal","vertical"],n=s.forwardRef((e,s)=>{var n;let{decorative:l,orientation:o=r,...c}=e,d=(n=o,i.includes(n))?o:r;return(0,t.jsx)(a.Primitive.div,{"data-orientation":d,...l?{role:"none"}:{"aria-orientation":"vertical"===d?d:void 0,role:"separator"},...c,ref:s})});n.displayName="Separator";var l=e.i(47163);function o({className:e,orientation:s="horizontal",decorative:a=!0,...r}){return(0,t.jsx)(n,{"data-slot":"separator",decorative:a,orientation:s,className:(0,l.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}e.s(["Separator",()=>o],69035)},73708,e=>{"use strict";let t=(0,e.i(75254).default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);e.s(["Image",()=>t],73708)},98321,e=>{"use strict";let t=(0,e.i(75254).default)("Crop",[["path",{d:"M6 2v14a2 2 0 0 0 2 2h14",key:"ron5a4"}],["path",{d:"M18 22V8a2 2 0 0 0-2-2H2",key:"7s9ehn"}]]);e.s(["Crop",()=>t],98321)},59419,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(53199),r=e.i(22623),i=e.i(23750),n=e.i(67881),l=e.i(30374),o=e.i(70065),c=e.i(94179),d=e.i(27341),m=e.i(87316),u=e.i(3116),x=e.i(46897),h=e.i(84614),f=e.i(31674),p=e.i(63059),g=e.i(55436),v=e.i(97548),j=e.i(40160);let b=(0,e.i(75254).default)("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);var y=e.i(98321),N=e.i(17923),w=e.i(86536),C=e.i(37727),k=e.i(73708),T=e.i(63209),S=e.i(69035);function D(){let[e,D]=(0,s.useState)([]),[R,_]=(0,s.useState)([]),[E,M]=(0,s.useState)(null),[I,F]=(0,s.useState)(""),[P,A]=(0,s.useState)("newest"),[B,H]=(0,s.useState)(!0),[V,z]=(0,s.useState)("all"),[L,$]=(0,s.useState)(!1),[K,O]=(0,s.useState)(null),U=async()=>{try{H(!0);let e=localStorage.getItem("authToken"),t=await fetch("https://rda.ngrok.app/api/visits/",{method:"GET",headers:{Authorization:`Bearer ${e}`,"ngrok-skip-browser-warning":"true"}});if(!t.ok)throw Error(`HTTP ${t.status}`);let s=await t.text(),a=t.headers.get("content-type")||"";if(!a.includes("application/json"))throw Error(`Expected JSON but got: ${a}`);let r=JSON.parse(s);console.log(r),r.results?(D(r.results),_(r.results)):(console.warn('No "results" key in response'),D([]),_([]))}catch(e){console.error("Error fetching visits:",e),D([]),_([])}finally{H(!1)}};(0,s.useEffect)(()=>{U()},[]),(0,s.useEffect)(()=>{let t=[...e];if("all"!==V&&(t=t.filter(e=>{if("recent"===V){let t=new Date(e.visit_date);return 7>=Math.ceil(Math.abs(new Date().getTime()-t.getTime())/864e5)}return"withPhotos"!==V||e.photos?.length>0})),""!==I.trim()){let e=I.toLowerCase();t=t.filter(t=>`${t.farmer_name} ${t.field_name} ${t.crop} ${t.crop_stage_display}`.toLowerCase().includes(e))}t.sort((e,t)=>"newest"===P?new Date(t.visit_date).getTime()-new Date(e.visit_date).getTime():new Date(e.visit_date).getTime()-new Date(t.visit_date).getTime()),_(t)},[I,P,e,V]);let q=e=>new Date(e).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),G=e=>({planting:"bg-blue-100 text-blue-800",vegetative:"bg-green-100 text-green-800",flowering:"bg-purple-100 text-purple-800",harvesting:"bg-amber-100 text-amber-800","post-harvest":"bg-gray-100 text-gray-800"})[e.toLowerCase()]||"bg-gray-100 text-gray-800";return(0,t.jsxs)("div",{className:"flex h-screen bg-background",children:[(0,t.jsx)(a.Sidebar,{}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,t.jsx)(r.DashboardHeader,{}),(0,t.jsx)("main",{className:"flex-1 overflow-y-auto",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Field Visits"}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:"Track and monitor all farm officer activities and field inspections"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(n.Button,{variant:"outline",className:"gap-2",children:[(0,t.jsx)(j.Download,{className:"h-4 w-4"}),"Export"]}),(0,t.jsxs)(n.Button,{onClick:U,className:"gap-2",children:[(0,t.jsx)(b,{className:"h-4 w-4"}),"Refresh"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsx)(o.Card,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:(0,t.jsx)(o.CardContent,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-blue-700",children:"Total Visits"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-blue-900 mt-2",children:e.length})]}),(0,t.jsx)(N.BarChart3,{className:"h-10 w-10 text-blue-600"})]})})}),(0,t.jsx)(o.Card,{className:"bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:(0,t.jsx)(o.CardContent,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-green-700",children:"Farmers Visited"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-green-900 mt-2",children:[...new Set(e.map(e=>e.farmer_name))].length})]}),(0,t.jsx)(h.User,{className:"h-10 w-10 text-green-600"})]})})}),(0,t.jsx)(o.Card,{className:"bg-gradient-to-br from-amber-50 to-amber-100 border-amber-200",children:(0,t.jsx)(o.CardContent,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-amber-700",children:"Photos Taken"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-amber-900 mt-2",children:e.reduce((e,t)=>e+(t.photos?.length||0),0)})]}),(0,t.jsx)(k.Image,{className:"h-10 w-10 text-amber-600"})]})})})]}),(0,t.jsx)(o.Card,{className:"border shadow-sm",children:(0,t.jsx)(o.CardContent,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4 items-center",children:[(0,t.jsx)("div",{className:"flex-1 w-full lg:w-auto",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(g.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,t.jsx)(i.Input,{placeholder:"Search visits by farmer, field, crop, or stage...",value:I,onChange:e=>F(e.target.value),className:"pl-10 w-full lg:w-[400px]"})]})}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,t.jsx)(d.Tabs,{defaultValue:"all",className:"w-full lg:w-auto",onValueChange:z,children:(0,t.jsxs)(d.TabsList,{children:[(0,t.jsx)(d.TabsTrigger,{value:"all",children:"All Visits"}),(0,t.jsx)(d.TabsTrigger,{value:"recent",children:"Recent"}),(0,t.jsx)(d.TabsTrigger,{value:"withPhotos",children:"With Photos"})]})}),(0,t.jsxs)(n.Button,{variant:"outline",onClick:()=>A("newest"===P?"oldest":"newest"),className:"gap-2",children:[(0,t.jsx)(v.Filter,{className:"h-4 w-4"}),"newest"===P?"Newest First":"Oldest First"]})]})]})})}),B&&(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),(0,t.jsx)("p",{className:"text-gray-600 mt-4",children:"Loading field visits..."})]})}),!B&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-gray-800",children:[R.length," ",1===R.length?"Visit":"Visits"," Found"]}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["Sorted by ","newest"===P?"most recent":"oldest first"]})]}),0===R.length?(0,t.jsx)(o.Card,{className:"border-dashed",children:(0,t.jsxs)(o.CardContent,{className:"p-12 text-center",children:[(0,t.jsx)(T.AlertCircle,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No visits found"}),(0,t.jsx)("p",{className:"text-gray-500",children:I?"Try adjusting your search terms":"No field visits have been recorded yet"})]})}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:R.map(e=>(0,t.jsx)(o.Card,{className:"group cursor-pointer hover:shadow-lg transition-all duration-300 hover:border-primary/30 overflow-hidden",onClick:()=>M(e),children:(0,t.jsxs)(o.CardContent,{className:"p-0",children:[(0,t.jsxs)("div",{className:"relative h-48 overflow-hidden bg-gray-100",children:[e.photos?.length>0?(0,t.jsx)("img",{src:e.photos[0],alt:e.field_name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200",children:(0,t.jsx)(k.Image,{className:"h-12 w-12 text-gray-400"})}),(0,t.jsxs)(c.Badge,{className:"absolute top-3 right-3 bg-white/90 text-gray-800 hover:bg-white",children:[e.photos?.length||0," photos"]})]}),(0,t.jsxs)("div",{className:"p-5",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,t.jsx)(c.Badge,{className:G(e.crop_stage),children:e.crop_stage_display}),(0,t.jsx)("span",{className:"text-xs text-gray-500 font-medium",children:q(e.visit_date)})]}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-1",children:e.farmer_name}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.field_name}),(0,t.jsx)(S.Separator,{className:"my-4"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,t.jsx)(y.Crop,{className:"h-4 w-4 mr-2 text-gray-400"}),(0,t.jsx)("span",{className:"font-medium",children:"Crop:"}),(0,t.jsx)("span",{className:"ml-2",children:e.crop})]}),(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,t.jsx)(h.User,{className:"h-4 w-4 mr-2 text-gray-400"}),(0,t.jsx)("span",{className:"font-medium",children:"Officer:"}),(0,t.jsx)("span",{className:"ml-2 line-clamp-1",children:e.conducted_by_name})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between pt-3",children:[(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,t.jsx)(u.Clock,{className:"h-3 w-3 mr-1"}),e.visit_time]}),(0,t.jsxs)(n.Button,{variant:"ghost",size:"sm",className:"gap-1 text-primary",children:["View Details",(0,t.jsx)(p.ChevronRight,{className:"h-4 w-4"})]})]})]})]})]})},e.id))})]})]})})]}),(0,t.jsx)(l.Dialog,{open:!!E,onOpenChange:()=>M(null),children:(0,t.jsx)(l.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:E&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l.DialogHeader,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(l.DialogTitle,{className:"text-2xl",children:"Visit Details"}),(0,t.jsx)(n.Button,{variant:"ghost",size:"sm",onClick:()=>M(null),className:"h-8 w-8 p-0",children:(0,t.jsx)(C.X,{className:"h-4 w-4"})})]}),(0,t.jsx)(l.DialogDescription,{children:"Complete field visit information"})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 p-4 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:E.farmer_name}),(0,t.jsx)("p",{className:"text-gray-700",children:E.field_name})]}),(0,t.jsx)(c.Badge,{className:`text-sm px-3 py-1 ${G(E.crop_stage)}`,children:E.crop_stage_display})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)(o.Card,{children:[(0,t.jsx)(o.CardHeader,{children:(0,t.jsxs)(o.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,t.jsx)(m.Calendar,{className:"h-5 w-5 text-blue-600"}),"Visit Information"]})}),(0,t.jsx)(o.CardContent,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Date:"}),(0,t.jsx)("span",{className:"font-medium",children:q(E.visit_date)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Time:"}),(0,t.jsx)("span",{className:"font-medium",children:E.visit_time})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Conducted By:"}),(0,t.jsx)("span",{className:"font-medium text-right",children:E.conducted_by_name})]})]})})]}),(0,t.jsxs)(o.Card,{children:[(0,t.jsx)(o.CardHeader,{children:(0,t.jsxs)(o.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,t.jsx)(f.Leaf,{className:"h-5 w-5 text-green-600"}),"Crop Details"]})}),(0,t.jsx)(o.CardContent,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Crop Type:"}),(0,t.jsx)("span",{className:"font-medium",children:E.crop})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Growth Stage:"}),(0,t.jsx)("span",{className:"font-medium",children:E.crop_stage_display})]}),E.latitude&&E.longitude&&(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Location:"}),(0,t.jsxs)(n.Button,{variant:"outline",size:"sm",className:"gap-1",onClick:()=>{O({latitude:E.latitude,longitude:E.longitude,name:`${E.field_name}`,cropName:E.crop,farmerName:E.farmer_name}),$(!0)},children:[(0,t.jsx)(x.MapPin,{className:"h-4 w-4"}),"View Map"]})]})]})})]})]}),(0,t.jsxs)(o.Card,{children:[(0,t.jsx)(o.CardHeader,{children:(0,t.jsxs)(o.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,t.jsx)(k.Image,{className:"h-5 w-5 text-amber-600"}),"Field Photos (",E.photos?.length||0,")"]})}),(0,t.jsx)(o.CardContent,{children:E.photos?.length>0?(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:E.photos.map((e,s)=>(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)("img",{src:e,alt:`Field photo ${s+1}`,className:"w-full h-48 object-cover rounded-lg"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center",children:(0,t.jsx)(w.Eye,{className:"h-8 w-8 text-white"})})]},s))}):(0,t.jsxs)("div",{className:"text-center py-8 border-2 border-dashed rounded-lg",children:[(0,t.jsx)(k.Image,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),(0,t.jsx)("p",{className:"text-gray-500",children:"No photos were taken during this visit"})]})})]}),(0,t.jsxs)(l.DialogFooter,{className:"gap-2",children:[(0,t.jsx)(n.Button,{variant:"outline",onClick:()=>M(null),children:"Close"}),(0,t.jsxs)(n.Button,{className:"gap-2",children:[(0,t.jsx)(j.Download,{className:"h-4 w-4"}),"Export Report"]})]})]})]})})})]})}e.s(["default",()=>D],59419)}]);